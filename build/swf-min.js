/*! BUI - v0.1.0 - 2013-11-18
* https://github.com/dxq613/bui
* Copyright (c) 2013 dxq613; Licensed MIT */
define("bui/swf/ua",function(){function a(){var a,c="ShockwaveFlash";if(navigator.plugins&&navigator.mimeTypes.length)a=(navigator.plugins["Shockwave Flash"]||0).description;else if(i.ActiveXObject)try{a=new ActiveXObject(c+"."+c).GetVariable("$version")}catch(d){BUI.log("getFlashVersion failed via ActiveXObject")}return a?b(a):void 0}function b(a){return a.match(/\d+/g).splice(0,3)}function c(a){var c="string"==typeof a?b(a):a,e=a;return BUI.isArray(c)&&(e=parseFloat(c[0]+"."+d(c[1],3)+d(c[2],5))),e||0}function d(a,b){a=a||0,a+="";var c=b+1-a.length;return new Array(c>0?c:0).join("0")+a}function e(b){return(b||h)&&(h=!1,g=a()),g}function f(a,b){return c(e(b))>=c(a)}var g,h=!0,i=window;return{fpv:e,fpvGTE:f}}),define("bui/swf",function(a){function b(a){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode.removeChild(a)}function c(a){var b,c,d,e="",f=[],g=a.nodeName.toLowerCase();if("object"==g)for(e=$(a).attr("data"),e&&f.push(a),b=a.childNodes,c=0;c<b.length;c++)d=b[c],1==d.nodeType&&("movie"==($(d).attr("name")||"").toLowerCase()?f.push(d):"embed"==d.nodeName.toLowerCase()?f.push(d):"object"==d.nodeName.toLowerCase()&&f.push(d));else"embed"==g&&f.push(a);return f}function d(a){var b=r;return k.each(a,function(a,c){c=c.toLowerCase(),c in D?b+=i(c,a):c==q&&(b+=i(c,h(a)))}),b}function e(a,b,c){return f(a,b,c,m.ie)+v+"/"+B+w}function f(a,b,c,e){var f,g=r,h=r;return void 0==e&&(e=m.ie),k.each(b,function(a,b){g+=j(b,a)}),e?(g+=j("classid",p),h+=i("movie",a)):(g+=j("data",a),g+=j("type",o)),h+=d(c),f=v+B+g+w+h}function g(a,b,c){var d,e;return m.ie?(d=f(a,b,c,1),delete b.id,delete b.style,e=f(a,b,c,0)):(e=f(a,b,c,0),delete b.id,delete b.style,d=f(a,b,c,1)),d+e+v+"/"+B+w+v+"/"+B+w}function h(a){var b,c=[];return k.each(a,function(a,b){"string"!=typeof a&&(a=n.stringify(a)),a&&c.push(b+"="+C(a))}),b=c.join("&")}function i(a,b){return'<param name="'+a+'" value="'+b+'"></param>'}function j(a,b){return s+a+t+u+b+u}var k=a("bui/common"),l=a("bui/swf/ua"),m=k.UA,n=k.JSON,o="application/x-shockwave-flash",p="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",q="flashvars",r="",s=" ",t="=",u='"',v="<",w=">",x=document,y=l.fpv,z=l.fpvGEQ,A=l.fpvGTE,B="object",C=encodeURIComponent,D={wmode:r,allowscriptaccess:r,allownetworking:r,allowfullscreen:r,play:"false",loop:r,menu:r,quality:r,scale:r,salign:r,bgcolor:r,devicefont:r,hasPriority:r,base:r,swliveconnect:r,seamlesstabbing:r},E=function(a){E.superclass.constructor.call(this,a),this.initializer()};return k.extend(E,k.Base,{initializer:function(){var a,b,c,d,f=this,h=f.get("expressInstall"),i=f.get("htmlMode"),j=f.get("params"),l=f.get("attrs"),n=f.get("document"),o=$("<span>"),p=f.get("elBefore"),q=f.get("src"),r=f.get("version");return c=l.id=l.id||k.guid("ks-swf-"),y()?(r&&!A(r)&&(f.set("status",E.Status.TOO_LOW),h&&(q=h,(!("width"in l)||!/%$/.test(l.width)&&parseInt(l.width,10)<310)&&(l.width="310"),(!("height"in l)||!/%$/.test(l.height)&&parseInt(l.height,10)<137)&&(l.height="137"),d=j.flashVars=j.flashVars||{},k.mix(d,{MMredirectURL:location.href,MMplayerType:m.ie?"ActiveX":"PlugIn",MMdoctitle:n.title.slice(0,47)+" - Flash Player Installation"}))),b="full"==i?g(q,l,j):e(q,l,j),f.set("html",b),p?o.insertBefore(p):o.appendTo(f.get("render")),"outerHTML"in o[0]?o[0].outerHTML=b:o.replaceWith($(b)),a=n.getElementById(c),f.set("swfObject",a),"full"==i&&(m.ie?f.set("swfObject",a):f.set("swfObject",a.parentNode)),f.set("el",a),f.get("status")||f.set("status",E.Status.SUCCESS),void 0):(f.set("status",E.Status.NOT_INSTALLED),void 0)},callSWF:function(a,b){var c,d,e=this.get("el");b=b||[];try{e[a]&&(c=e[a].apply(e,b))}catch(f){d="",0!==b.length&&(d="'"+b.join("', '")+"'"),c=new Function("swf","return swf."+a+"("+d+");")(e)}return c},destroy:function(){var a=this;a.detach();var c=a.get("swfObject");m.ie?(c.style.display="none",function(){4==c.readyState?b(c):setTimeout(arguments.callee,10)}()):c.parentNode.removeChild(c)}},{ATTRS:{expressInstall:{},src:{},version:{value:"9"},params:{value:{}},attrs:{value:{}},render:{setter:function(a){return"string"==typeof a&&(a=$(a)[0]),a},valueFn:function(){return document.body}},elBefore:{setter:function(a){return"string"==typeof a&&(a=$(a)[0]),a}},document:{value:x},status:{},el:{},swfObject:{},html:{},htmlMode:{value:"default"}},getSrc:function(a){var b=c(a)[0],d=b&&b.nodeName.toLowerCase();return"embed"==d?$(b).attr("src"):"object"==d?$(b).attr("data"):"param"==d?$(b).attr("value"):null},Status:{TOO_LOW:"flash version is too low",NOT_INSTALLED:"flash is not installed",SUCCESS:"success"},HtmlMode:{DEFAULT:"default",FULL:"full"},fpv:y,fpvGEQ:z,fpvGTE:A}),E});