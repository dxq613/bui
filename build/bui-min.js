/*! BUI - v0.1.0 - 2013-11-18
* https://github.com/dxq613/bui
* Copyright (c) 2013 dxq613; Licensed MIT */
this.seajs={_seajs:this.seajs},seajs.version="1.3.0",seajs._util={},seajs._config={debug:"%DEBUG%",preload:[]},function(a){var b=Object.prototype.toString,c=Array.prototype;a.isString=function(a){return"[object String]"===b.call(a)},a.isFunction=function(a){return"[object Function]"===b.call(a)},a.isRegExp=function(a){return"[object RegExp]"===b.call(a)},a.isObject=function(a){return a===Object(a)},a.isArray=Array.isArray||function(a){return"[object Array]"===b.call(a)},a.indexOf=c.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1};var d=a.forEach=c.forEach?function(a,b){a.forEach(b)}:function(a,b){for(var c=0;c<a.length;c++)b(a[c],c,a)};a.map=c.map?function(a,b){return a.map(b)}:function(a,b){var c=[];return d(a,function(a,d,e){c.push(b(a,d,e))}),c},a.filter=c.filter?function(a,b){return a.filter(b)}:function(a,b){var c=[];return d(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c};var e=a.keys=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};a.unique=function(a){var b={};return d(a,function(a){b[a]=1}),e(b)},a.now=Date.now||function(){return(new Date).getTime()}}(seajs._util),function(a){a.log=function(){if("undefined"!=typeof console){var a=Array.prototype.slice.call(arguments),b="log",c=a[a.length-1];if(console[c]&&(b=a.pop()),"log"!==b||seajs.debug){if(console[b].apply)return console[b].apply(console,a),void 0;var d=a.length;1===d?console[b](a[0]):2===d?console[b](a[0],a[1]):3===d?console[b](a[0],a[1],a[2]):console[b](a.join(" "))}}}}(seajs._util),function(a,b,c){function d(a){var b=a.match(p);return(b?b[0]:".")+"/"}function e(a){if(q.lastIndex=0,q.test(a)&&(a=a.replace(q,"$1/")),-1===a.indexOf("."))return a;for(var b,c=a.split("/"),d=[],e=0;e<c.length;e++)if(b=c[e],".."===b){if(0===d.length)throw new Error("The path is invalid: "+a);d.pop()}else"."!==b&&d.push(b);return d.join("/")}function f(a){a=e(a);var b=a.charAt(a.length-1);return"/"===b?a:("#"===b?a=a.slice(0,-1):-1!==a.indexOf("?")||r.test(a)||(a+=".js"),a.indexOf(":80/")>0&&(a=a.replace(":80/","/")),a)}function g(a){if("#"===a.charAt(0))return a.substring(1);var c=b.alias;if(c&&n(a)){var d=a.split("/"),e=d[0];c.hasOwnProperty(e)&&(d[0]=c[e],a=d.join("/"))}return a}function h(c){var f=b.map||[];if(!f.length)return c;for(var g=c,h=0;h<f.length;h++){var i=f[h];if(a.isArray(i)&&2===i.length){var j=i[0];(a.isString(j)&&g.indexOf(j)>-1||a.isRegExp(j)&&j.test(g))&&(g=g.replace(j,i[1]))}else a.isFunction(i)&&(g=i(g))}return k(g)||(g=e(d(v)+g)),g!==c&&(t[g]=c),g}function i(a){return t[a]||a}function j(a,c){if(!a)return"";a=g(a),c||(c=v);var e;return k(a)?e=a:l(a)?(0===a.indexOf("./")&&(a=a.substring(2)),e=d(c)+a):e=m(a)?c.match(s)[1]+a:b.base+"/"+a,f(e)}function k(a){return a.indexOf("://")>0||0===a.indexOf("//")}function l(a){return 0===a.indexOf("./")||0===a.indexOf("../")}function m(a){return"/"===a.charAt(0)&&"/"!==a.charAt(1)}function n(a){var b=a.charAt(0);return-1===a.indexOf("://")&&"."!==b&&"/"!==b}function o(a){return"/"!==a.charAt(0)&&(a="/"+a),a}var p=/.*(?=\/.*$)/,q=/([^:\/])\/\/+/g,r=/\.(?:css|js)$/,s=/^(.*?\w)(?:\/|$)/,t={},u=c.location,v=u.protocol+"//"+u.host+o(u.pathname);v.indexOf("\\")>0&&(v=v.replace(/\\/g,"/")),a.dirname=d,a.realpath=e,a.normalize=f,a.parseAlias=g,a.parseMap=h,a.unParseMap=i,a.id2Uri=j,a.isAbsolute=k,a.isRoot=m,a.isTopLevel=n,a.pageUri=v}(seajs._util,seajs._config,this),function(a,b){function c(a,b){"SCRIPT"===a.nodeName?d(a,b):e(a,b)}function d(a,c){a.onload=a.onerror=a.onreadystatechange=function(){n.test(a.readyState)&&(a.onload=a.onerror=a.onreadystatechange=null,a.parentNode&&!b.debug&&k.removeChild(a),a=void 0,c())}}function e(b,c){p||q?(a.log("Start poll to fetch css"),setTimeout(function(){f(b,c)},1)):b.onload=b.onerror=function(){b.onload=b.onerror=null,b=void 0,c()}}function f(a,b){var c;if(p)a.sheet&&(c=!0);else if(a.sheet)try{a.sheet.cssRules&&(c=!0)}catch(d){"NS_ERROR_DOM_SECURITY_ERR"===d.name&&(c=!0)}setTimeout(function(){c?b():f(a,b)},1)}function g(){}var h,i,j=document,k=j.head||j.getElementsByTagName("head")[0]||j.documentElement,l=k.getElementsByTagName("base")[0],m=/\.css(?:\?|$)/i,n=/loaded|complete|undefined/;a.fetch=function(b,d,e){var f=m.test(b),i=document.createElement(f?"link":"script");if(e){var j=a.isFunction(e)?e(b):e;j&&(i.charset=j)}c(i,d||g),f?(i.rel="stylesheet",i.href=b):(i.async="async",i.src=b),h=i,l?k.insertBefore(i,l):k.appendChild(i),h=null},a.getCurrentScript=function(){if(h)return h;if(i&&"interactive"===i.readyState)return i;for(var a=k.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b];if("interactive"===c.readyState)return i=c,c}},a.getScriptAbsoluteSrc=function(a){return a.hasAttribute?a.src:a.getAttribute("src",4)},a.importStyle=function(a,b){if(!b||!j.getElementById(b)){var c=j.createElement("style");b&&(c.id=b),k.appendChild(c),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(j.createTextNode(a))}};var o=navigator.userAgent,p=Number(o.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536,q=o.indexOf("Firefox")>0&&!("onload"in document.createElement("link"))}(seajs._util,seajs._config,this),function(a){function b(a){return a.replace(/^\s*\/\*[\s\S]*?\*\/\s*$/gm,"").replace(/^\s*\/\/.*$/gm,"")}var c=/(?:^|[^.$])\brequire\s*\(\s*(["'])([^"'\s\)]+)\1\s*\)/g;a.parseDependencies=function(d){var e,f=[];for(d=b(d),c.lastIndex=0;e=c.exec(d);)e[2]&&f.push(e[2]);return a.unique(f)}}(seajs._util),function(a,b,c){function d(a,b){this.uri=a,this.status=b||0}function e(a,c){return b.isString(a)?d._resolve(a,c):b.map(a,function(a){return e(a,c)})}function f(a,e){var f=b.parseMap(a);return u[f]?(p[a]=p[f],e(),void 0):t[f]?(v[f].push(e),void 0):(t[f]=!0,v[f]=[e],d._fetch(f,function(){u[f]=!0;var c=p[a];c.status===s.FETCHING&&(c.status=s.FETCHED),w&&(d._save(a,w),w=null),x&&c.status===s.FETCHED&&(p[a]=x,x.realUri=a),x=null,t[f]&&delete t[f];var e=v[f];e&&(delete v[f],b.forEach(e,function(a){a()}))},c.charset),void 0)}function g(a,c){var f=p[a]||(p[a]=new d(a));return f.status<s.SAVED&&(f.id=c.id||a,f.dependencies=e(b.filter(c.dependencies||[],function(a){return!!a}),a),f.factory=c.factory,f.status=s.SAVED),f}function h(a,b){var c=a(b.require,b.exports,b);void 0!==c&&(b.exports=c)}function i(a){return!!q[a.realUri||a.uri]}function j(a){var c=a.realUri||a.uri,d=q[c];d&&(b.forEach(d,function(b){h(b,a)}),delete q[c])}function k(a){var c=a.uri;return b.filter(a.dependencies,function(a){y=[c];var b=l(p[a]);return b&&(y.push(c),m(y)),!b})}function l(a){if(!a||a.status!==s.SAVED)return!1;y.push(a.uri);var b=a.dependencies;if(b.length){if(n(b,y))return!0;for(var c=0;c<b.length;c++)if(l(p[b[c]]))return!0}return y.pop(),!1}function m(a,c){b.log("Found circular dependencies:",a.join(" --> "),c)}function n(a,c){var d=a.concat(c);return d.length>b.unique(d).length}function o(a){var b=c.preload.slice();c.preload=[],b.length?z._use(b,a):a()}var p={},q={},r=[],s={FETCHING:1,FETCHED:2,SAVED:3,READY:4,COMPILING:5,COMPILED:6};d.prototype._use=function(a,c){b.isString(a)&&(a=[a]);var d=e(a,this.uri);this._load(d,function(){o(function(){var a=b.map(d,function(a){return a?p[a]._compile():null});c&&c.apply(null,a)})})},d.prototype._load=function(a,c){function e(a){(a||{}).status<s.READY&&(a.status=s.READY),0===--i&&c()}var g=b.filter(a,function(a){return a&&(!p[a]||p[a].status<s.READY)}),h=g.length;if(0===h)return c(),void 0;for(var i=h,j=0;h>j;j++)!function(a){function b(){if(c=p[a],c.status>=s.SAVED){var b=k(c);b.length?d.prototype._load(b,function(){e(c)}):e(c)}else e()}var c=p[a]||(p[a]=new d(a,s.FETCHING));c.status>=s.FETCHED?b():f(a,b)}(g[j])},d.prototype._compile=function(){function a(a){var b=e(a,c.uri),d=p[b];return d?d.status===s.COMPILING?d.exports:(d.parent=c,d._compile()):null}var c=this;if(c.status===s.COMPILED)return c.exports;if(c.status<s.SAVED&&!i(c))return null;c.status=s.COMPILING,a.async=function(a,b){c._use(a,b)},a.resolve=function(a){return e(a,c.uri)},a.cache=p,c.require=a,c.exports={};var d=c.factory;return b.isFunction(d)?(r.push(c),h(d,c),r.pop()):void 0!==d&&(c.exports=d),c.status=s.COMPILED,j(c),c.exports},d._define=function(a,c,f){var g=arguments.length;1===g?(f=a,a=void 0):2===g&&(f=c,c=void 0,b.isArray(a)&&(c=a,a=void 0)),!b.isArray(c)&&b.isFunction(f)&&(c=b.parseDependencies(f.toString()));var h,i={id:a,dependencies:c,factory:f};if(document.attachEvent){var j=b.getCurrentScript();j&&(h=b.unParseMap(b.getScriptAbsoluteSrc(j))),h||b.log("Failed to derive URI from interactive script for:",f.toString(),"warn")}var k=a?e(a):h;if(k){if(k===h){var l=p[h];l&&l.realUri&&l.status===s.SAVED&&(p[h]=null)}var m=d._save(k,i);h?(p[h]||{}).status===s.FETCHING&&(p[h]=m,m.realUri=h):x||(x=m)}else w=i},d._getCompilingModule=function(){return r[r.length-1]},d._find=function(a){var c=[];return b.forEach(b.keys(p),function(d){if(b.isString(a)&&d.indexOf(a)>-1||b.isRegExp(a)&&a.test(d)){var e=p[d];e.exports&&c.push(e.exports)}}),c},d._modify=function(b,c){var d=e(b),f=p[d];return f&&f.status===s.COMPILED?h(c,f):(q[d]||(q[d]=[]),q[d].push(c)),a},d.STATUS=s,d._resolve=b.id2Uri,d._fetch=b.fetch,d._save=g;var t={},u={},v={},w=null,x=null,y=[],z=new d(b.pageUri,s.COMPILED);a.use=function(b,c){return o(function(){z._use(b,c)}),a},a.define=d._define,a.cache=d.cache=p,a.find=d._find,a.modify=d._modify,d.fetchedList=u,a.pluginSDK={Module:d,util:b,config:c}}(seajs,seajs._util,seajs._config),function(a,b,c){function d(){c.debug&&(a.debug=!!c.debug)}function e(a){if(-1===a.indexOf("??"))return a;var c=a.split("??"),d=c[0],e=b.filter(c[1].split(","),function(a){return-1!==a.indexOf("sea.js")});return d+e[0]}function f(a,c,d){a&&a!==c&&b.log("The alias config is conflicted:","key =",'"'+d+'"',"previous =",'"'+a+'"',"current =",'"'+c+'"',"warn")}var g="seajs-ts=",h=g+b.now(),i=document.getElementById("seajsnode");if(!i){var j=document.getElementsByTagName("script");i=j[j.length-1]}var k=i&&b.getScriptAbsoluteSrc(i)||b.pageUri,l=b.dirname(e(k));b.loaderDir=l;var m=l.match(/^(.+\/)seajs\/[\.\d]+(?:-dev)?\/$/);m&&(l=m[1]),c.base=l,c.main=i&&i.getAttribute("data-main"),c.charset="utf-8",a.config=function(e){for(var i in e)if(e.hasOwnProperty(i)){var j=c[i],k=e[i];if(j&&"alias"===i){for(var l in k)if(k.hasOwnProperty(l)){var m=j[l],n=k[l];/^\d+\.\d+\.\d+$/.test(n)&&(n=l+"/"+n+"/"+l),f(m,n,l),j[l]=n}}else!j||"map"!==i&&"preload"!==i?c[i]=k:(b.isString(k)&&(k=[k]),b.forEach(k,function(a){a&&j.push(a)}))}var o=c.base;return o&&!b.isAbsolute(o)&&(c.base=b.id2Uri((b.isRoot(o)?"":"./")+o+"/")),2===c.debug&&(c.debug=1,a.config({map:[[/^.*$/,function(a){return-1===a.indexOf(g)&&(a+=(-1===a.indexOf("?")?"?":"&")+h),a}]]})),d(),this},d()}(seajs,seajs._util,seajs._config),function(a,b,c){function d(){var a=[],d=c.location.search;return d=d.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),d+=" "+document.cookie,d.replace(/seajs-(\w+)=[1-9]/g,function(b,c){a.push(c)}),b.unique(a)}a.log=b.log,a.importStyle=b.importStyle,a.config({alias:{seajs:b.loaderDir}}),b.forEach(d(),function(b){a.use("seajs/plugin-"+b),"debug"===b&&(a._use=a.use,a._useArgs=[],a.use=function(){return a._useArgs.push(arguments),a})})}(seajs,seajs._util,this),function(a,b,c){var d=a._seajs;return d&&!d.args?(c.seajs=a._seajs,void 0):(c.define=a.define,b.main&&a.use(b.main),function(b){if(b)for(var c={0:"config",1:"use",2:"define"},d=0;d<b.length;d+=2)a[c[b[d]]].apply(a,b[d+1])}((d||0).args),c.define.cmd={},delete a.define,delete a._util,delete a._config,delete a._seajs,void 0)}(seajs,seajs._config,this);var loaderPath=seajs.pluginSDK.util.loaderDir;seajs.config({map:[[/.js$/,"-min.js"]],alias:{bui:loaderPath},charset:"utf-8"});var BUI=BUI||{};BUI.use=seajs.use,BUI.config=seajs.config,BUI.setDebug=function(a){BUI.debug=a,a?seajs.config({map:[["-min.js",".js"]]}):seajs.config({map:[[/.js$/,"-min.js"]]})},define("bui/common",["bui/ua","bui/json","bui/date","bui/array","bui/keycode","bui/observable","bui/base","bui/component"],function(a){var b=a("bui/util");return b.mix(b,{UA:a("bui/ua"),JSON:a("bui/json"),Date:a("bui/date"),Array:a("bui/array"),KeyCode:a("bui/keycode"),Observable:a("bui/observable"),Base:a("bui/base"),Component:a("bui/component")}),b});var BUI=BUI||{};!BUI.use&&seajs&&(BUI.use=seajs.use,BUI.config=seajs.config),define("bui/util",function(){function a(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=a[d]||{},b(a[d],c[d]))}function b(a,b){for(var c in b)b.hasOwnProperty(c)&&("value"==c?BUI.isObject(b[c])?(a[c]=a[c]||{},BUI.mix(a[c],b[c])):BUI.isArray(b[c])?(a[c]=a[c]||[],BUI.mix(a[c],b[c])):a[c]=b[c]:a[c]=b[c])}!function(a){a.fn&&(a.fn.on=a.fn.on||a.fn.bind,a.fn.off=a.fn.off||a.fn.unbind)}(jQuery);var c=window,d=Object.prototype,e=d.toString,f="ATTRS",g="PARSER",h="guid";$.extend(BUI,{version:1,subVersion:2,isFunction:function(a){return"function"==typeof a},isArray:"isArray"in Array?Array.isArray:function(a){return"[object Array]"===e.call(a)},isDate:function(a){return"[object Date]"===e.call(a)},isObject:"[object Object]"===e.call(null)?function(a){return null!==a&&void 0!==a&&"[object Object]"===e.call(a)&&void 0===a.ownerDocument}:function(a){return"[object Object]"===e.call(a)},augment:function(a){if(!BUI.isFunction(a))return a;for(var b=1;b<arguments.length;b++)BUI.mix(a.prototype,arguments[b].prototype||arguments[b]);return a},cloneObject:function(a){var b=BUI.isArray(a)?[]:{};return BUI.mix(!0,b,a)},error:function(a){if(BUI.debug)throw a},extend:function(a,b,c,d){BUI.isFunction(b)||(c=b,b=a,a=function(){});var e=Object.create?function(a,b){return Object.create(a,{constructor:{value:b}})}:function(a,b){function c(){}c.prototype=a;var d=new c;return d.constructor=b,d},f=e(b.prototype,a);return a.prototype=BUI.mix(f,a.prototype),a.superclass=e(b.prototype,b),BUI.mix(f,c),BUI.mix(a,d),a},guid:function(){var a={};return function(b){return b=b||BUI.prefix+h,a[b]?a[b]+=1:a[b]=1,b+a[b]}}(),isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},log:function(a){BUI.debug&&c.console&&c.console.log&&c.console.log(a)},merge:function(){var a=$.makeArray(arguments);return a.unshift({}),BUI.mix.apply(null,a)},mix:function(){return $.extend.apply(null,arguments)},app:function(a){return window[a]||(window[a]={namespace:function(b){return BUI.namespace(b,window[a])}}),window[a]},mixin:function(b,c,d){d=d||[f,g];var e=c;if(e){b.mixins=e;var h={},i=e.concat(b);BUI.each(i,function(b){b&&BUI.each(d,function(c){b[c]&&(h[c]=h[c]||{},"ATTRS"==c?a(h[c],b[c]):BUI.mix(h[c],b[c]))})}),BUI.each(h,function(a,c){b[c]=a});var j={};BUI.each(i,function(a){if(a){var b=a.prototype;for(var c in b)b.hasOwnProperty(c)&&(j[c]=b[c])}}),BUI.each(j,function(a,c){b.prototype[c]=a})}return b},namespace:function(a,b){if(b=b||BUI,!a)return b;for(var c=a.split("."),d=b,e=0;e<c.length;e++){var f=c[e];d[f]||(d[f]={}),d=d[f]}return d},prefix:"bui-",substitute:function(a,b,c){return BUI.isString(a)&&(BUI.isObject(b)||BUI.isArray(b))?a.replace(c||/\\?\{([^{}]+)\}/g,function(a,c){return"\\"===a.charAt(0)?a.slice(1):void 0===b[c]?"":b[c]}):a},ucfirst:function(a){return a+="",a.charAt(0).toUpperCase()+a.substring(1)},isInView:function(a){var b=a.left,c=a.top,d=BUI.viewportWidth(),e=BUI.viewportHeight(),f=BUI.scrollTop(),g=BUI.scrollLeft();return g>b||b>g+d?!1:f>c||c>f+e?!1:!0},isInVerticalView:function(a){var b=BUI.viewportHeight(),c=BUI.scrollTop();return c>a||a>c+b?!1:!0},isInHorizontalView:function(a){var b=BUI.viewportWidth(),c=BUI.scrollLeft();return c>a||a>c+b?!1:!0},viewportWidth:function(){return $(window).width()},viewportHeight:function(){return $(window).height()},scrollLeft:function(){return $(window).scrollLeft()},scrollTop:function(){return $(window).scrollTop()},docWidth:function(){var a=document.documentElement||document.body;return $(a).width()},docHeight:function(){var a=document.documentElement||document.body;return $(a).height()},each:function(a,b){a&&$.each(a,function(a,c){return b(c,a)})},wrapBehavior:function(a,b){return a["__bui_wrap_"+b]=function(c){a.get("disabled")||a[b](c)}},getWrapBehavior:function(a,b){return a["__bui_wrap_"+b]}});var i=BUI.FormHelper={serializeToObject:function(a){var b=$(a).serializeArray(),c={};return BUI.each(b,function(a){var b=a.name;c[b]?(BUI.isArray(c[b])||(c[b]=[c[b]]),c[b].push(a.value)):c[b]=a.value}),c},setFields:function(a,b){for(var c in b)b.hasOwnProperty(c)&&BUI.FormHelper.setField(a,c,b[c])},clear:function(a){var b=$.makeArray(a.elements);BUI.each(b,function(a){"checkbox"===a.type||"radio"===a.type?$(a).attr("checked",!1):$(a).val(""),$(a).change()})},setField:function(a,b,c){var d=a.elements[b];d&&d.type?i._setFieldValue(d,c):(BUI.isArray(d)||d&&d.length)&&BUI.each(d,function(a){i._setFieldValue(a,c)})},_setFieldValue:function(a,b){"checkbox"===a.type?a.value==""+b||BUI.isArray(b)&&-1!==BUI.Array.indexOf(a.value,b)?$(a).attr("checked",!0):$(a).attr("checked",!1):"radio"===a.type?a.value==""+b?$(a).attr("checked",!0):$(a).attr("checked",!1):$(a).val(b)},getField:function(a,b){return BUI.FormHelper.serializeToObject(a)[b]}};return BUI}),define("bui/array",["bui/util"],function(a){var b=a("bui/util");return b.Array={peek:function(a){return a[a.length-1]},indexOf:function(a,b,c){for(var d=null==c?0:0>c?Math.max(0,b.length+c):c,e=d;e<b.length;e++)if(e in b&&b[e]===a)return e;return-1},contains:function(a,c){return b.Array.indexOf(a,c)>=0},each:b.each,equals:function(a,b){if(a==b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=!0,d=0;d<a.length;d++)if(a[d]!==b[d]){c=!1;break}return c},filter:function(a,c){var d=[];return b.Array.each(a,function(a,b){c(a,b)&&d.push(a)}),d},map:function(a,c){var d=[];return b.Array.each(a,function(a,b){d.push(c(a,b))}),d},find:function(a,c){var d=b.Array.findIndex(a,c);return 0>d?null:a[d]},findIndex:function(a,c){var d=-1;return b.Array.each(a,function(a,b){return c(a,b)?(d=b,!1):void 0}),d},isEmpty:function(a){return 0==a.length},add:function(a,b){a.push(b)},addAt:function(a,c,d){b.Array.splice(a,d,0,c)},empty:function(a){if(!(a instanceof Array))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0},remove:function(a,c){var d,e=b.Array.indexOf(c,a);return(d=e>=0)&&b.Array.removeAt(a,e),d},removeAt:function(a,c){return 1==b.Array.splice(a,c,1).length},slice:function(a,b,c){return arguments.length<=2?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)},splice:function(a){return Array.prototype.splice.apply(a,b.Array.slice(arguments,1))}},b.Array}),define("bui/observable",["bui/util"],function(a){function b(){return new d}var c=a("bui/util"),d=function(){this._init()};c.augment(d,{_functions:null,_init:function(){var a=this;a._functions=[]},add:function(a){this._functions.push(a)},remove:function(a){var b=this._functions;index=c.Array.indexOf(a,b),index>=0&&b.splice(index,1)},empty:function(){var a=this._functions.length;this._functions.splice(0,a)},fireWith:function(a,b){var d,e=this;return c.each(e._functions,function(c){return d=c.apply(a,b),d===!1?!1:void 0}),d}});var e=function(a){this._events=[],this._eventMap={},this._bubblesEvents=[],this._initEvents(a)};return c.augment(e,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(a){var b=this,c=b._eventMap;return c[a]},_initEvents:function(a){var b=this,c=null;if(a&&(c=a.listeners||{},a.handler&&(c.click=a.handler),c))for(var d in c)c.hasOwnProperty(d)&&b.on(d,c[d])},_isBubbles:function(a){return c.Array.indexOf(a,this._bubblesEvents)>=0},addTarget:function(a){this._bubbleTarget=a},addEvents:function(a){function d(a){-1===c.Array.indexOf(a,f)&&(g[a]=b(),f.push(a))}var e=this,f=e._events,g=e._eventMap;c.isArray(a)?$.each(a,function(a,b){d(b)}):d(a)},clearListeners:function(){var a=this,b=a._eventMap;for(var c in b)b.hasOwnProperty(c)&&b[c].empty()},fire:function(a,b){var c,d=this,e=d._getCallbacks(a),f=$.makeArray(arguments);if(b||(b={},f.push(b)),b.target||(b.target=d),e&&(c=e.fireWith(d,Array.prototype.slice.call(f,1))),d._isBubbles(a)){var g=d._bubbleTarget;g&&g.fire&&g.fire(a,b)}return c},on:function(a,b){var d=a.split(" "),e=this,f=null;return d.length>1?c.each(d,function(a){e.on(a,b)}):(f=e._getCallbacks(a),f?f.add(b):(e.addEvents(a),e.on(a,b))),e},off:function(a,b){if(!a&&!b)return this.clearListeners(),this;var c=this,d=c._getCallbacks(a);return d&&d.remove(b),c},publish:function(a,b){var d=this,e=d._bubblesEvents;if(b.bubbles)-1===c.Array.indexOf(a,e)&&e.push(a);else{var f=c.Array.indexOf(a,e);-1!==f&&e.splice(f,1)}}}),e}),define("bui/ua",function(){function a(a){var b=0;return parseFloat(a.replace(/\./g,function(){return 0===b++?".":""}))}function b(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c={browser:b[1]||"",version:b[2]||"0"},d={};return c.browser&&(d[c.browser]=!0,d.version=c.version),d.chrome?d.webkit=!0:d.webkit&&(d.safari=!0),d}var c=$.UA||function(){var c=$.browser||b(navigator.userAgent),d=a(c.version),e={ie:c.msie&&d,webkit:c.webkit&&d,opera:c.opera&&d,mozilla:c.mozilla&&d};return e}();return c}),define("bui/json",["bui/ua"],function(a){function b(a){return 10>a?"0"+a:a}function c(a){return l.lastIndex=0,l.test(a)?'"'+a.replace(l,function(a){var b=m[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,b){var e,f,g,h,l,m=i,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof k&&(n=k.call(b,a,n)),typeof n){case"string":return c(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(i+=j,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(h=n.length,e=0;h>e;e+=1)l[e]=d(e,n)||"null";return g=0===l.length?"[]":i?"[\n"+i+l.join(",\n"+i)+"\n"+m+"]":"["+l.join(",")+"]",i=m,g}if(k&&"object"==typeof k)for(h=k.length,e=0;h>e;e+=1)f=k[e],"string"==typeof f&&(g=d(f,n),g&&l.push(c(f)+(i?": ":":")+g));else for(f in n)Object.hasOwnProperty.call(n,f)&&(g=d(f,n),g&&l.push(c(f)+(i?": ":":")+g));return g=0===l.length?"{}":i?"{\n"+i+l.join(",\n"+i)+"\n"+m+"}":"{"+l.join(",")+"}",i=m,g}}function e(a){try{return new Function("return "+a+";")()}catch(b){throw"Json parse error!"}}var f=window,g=a("bui/ua"),h=f.JSON;(!h||g.ie<9)&&(h=f.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var i,j,k,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof h.stringify&&(h.stringify=function(a,b,c){var e;if(i="",j="","number"==typeof c)for(e=0;c>e;e+=1)j+=" ";else"string"==typeof c&&(j=c);if(k=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return d("",{"":a})});var h={parse:$.parseJSON,looseParse:e,stringify:h.stringify};return h}),define("bui/keycode",function(){var a={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return a}),define("bui/date",function(){function a(b,c){if(b instanceof Date)return b;if("undefined"==typeof c||null==c||""==c){for(var d=new Array("y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s"),e=0;e<d.length;e++){var f=a(b,d[e]);if(null!=f)return f}return null}b+="";var g,h,i=0,j=0,k="",l="",m=new Date,n=m.getYear(),o=m.getMonth()+1,p=1,q=0,r=0,s=0;for(this.isInteger=function(a){return/^\d*$/.test(a)},this.getInt=function(a,b,c,d){for(var e=d;e>=c;e--){var f=a.substring(b,b+e);if(f.length<c)return null;if(this.isInteger(f))return f}return null};j<c.length;){for(k=c.charAt(j),l="";c.charAt(j)==k&&j<c.length;)l+=c.charAt(j++);if("yyyy"==l||"yy"==l||"y"==l){if("yyyy"==l&&(g=4,h=4),"yy"==l&&(g=2,h=2),"y"==l&&(g=2,h=4),n=this.getInt(b,i,g,h),null==n)return null;i+=n.length,2==n.length&&(n=n>70?1900+(n-0):2e3+(n-0))}else if("mm"==l||"m"==l){if(o=this.getInt(b,i,l.length,2),null==o||1>o||o>12)return null;i+=o.length}else if("dd"==l||"d"==l){if(p=this.getInt(b,i,l.length,2),null==p||1>p||p>31)return null;i+=p.length}else if("hh"==l||"h"==l){if(q=this.getInt(b,i,l.length,2),null==q||1>q||q>12)return null;i+=q.length}else if("HH"==l||"H"==l){if(q=this.getInt(b,i,l.length,2),null==q||0>q||q>23)return null;i+=q.length}else if("MM"==l||"M"==l){if(r=this.getInt(b,i,l.length,2),null==r||0>r||r>59)return null;i+=r.length}else if("ss"==l||"s"==l){if(s=this.getInt(b,i,l.length,2),null==s||0>s||s>59)return null;i+=s.length}else{if(b.substring(i,i+l.length)!=l)return null;i+=l.length}}if(i!=b.length)return null;if(2==o)if(0==n%4&&0!=n%100||0==n%400){if(p>29)return null}else if(p>28)return null;return(4==o||6==o||9==o||11==o)&&p>30?null:new Date(n,o-1,p,q,r,s)}function b(a,b,c){var d=new Date(c);switch(isNaN(d)&&(d=new Date),b=parseInt(b,10),a){case"s":d=new Date(d.getTime()+1e3*b);break;case"n":d=new Date(d.getTime()+6e4*b);break;case"h":d=new Date(d.getTime()+36e5*b);break;case"d":d=new Date(d.getTime()+864e5*b);break;case"w":d=new Date(d.getTime()+6048e5*b);break;case"m":d=new Date(d.getFullYear(),d.getMonth()+b,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds());break;case"y":d=new Date(d.getFullYear()+b,d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())}return d}var c=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,d=function(){var a=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a},e={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},f={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(g,h,i){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(g)||/\d/.test(g)||(h=g,g=void 0),g=g?new Date(g):new Date,isNaN(g))throw SyntaxError("invalid date");h=String(e[h]||h||e["default"]),"UTC:"===h.slice(0,4)&&(h=h.slice(4),i=!0);var j=i?"getUTC":"get",k=g[j+"Date"](),l=g[j+"Day"](),m=g[j+"Month"](),n=g[j+"FullYear"](),o=g[j+"Hours"](),p=g[j+"Minutes"](),q=g[j+"Seconds"](),r=g[j+"Milliseconds"](),s=i?0:g.getTimezoneOffset(),t={d:k,dd:d(k,void 0),ddd:f.dayNames[l],dddd:f.dayNames[l+7],w:f.dayNames[l+14],m:m+1,mm:d(m+1,void 0),mmm:f.monthNames[m],mmmm:f.monthNames[m+12],yy:String(n).slice(2),yyyy:n,h:o%12||12,hh:d(o%12||12,void 0),H:o,HH:d(o,void 0),M:p,MM:d(p,void 0),s:q,ss:d(q,void 0),l:d(r,3),L:d(r>99?Math.round(r/10):r,void 0),t:12>o?"a":"p",tt:12>o?"am":"pm",T:12>o?"A":"P",TT:12>o?"AM":"PM",Z:i?"UTC":(String(g).match(b)||[""]).pop().replace(c,""),o:(s>0?"-":"+")+d(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][k%10>3?0:(10!==k%100-k%10)*k%10]};return h.replace(a,function(a){return a in t?t[a]:a.slice(1,a.length-1)})}}(),e={add:function(a,c,d){return b(a,c,d)},addHour:function(a,c){return b("h",a,c)},addMinute:function(a,c){return b("n",a,c)},addSecond:function(a,c){return b("s",a,c)},addDay:function(a,c){return b("d",a,c)},addWeek:function(a,c){return b("w",a,c)},addMonths:function(a,c){return b("m",a,c)},addYear:function(a,c){return b("y",a,c)},isDateEquals:function(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},isEquals:function(a,b){return a==b?!0:a&&b?a.getTime&&b.getTime?a.getTime()==b.getTime():!1:!1},isDateString:function(a){return c.test(a)},format:function(a,b,c){return d(a,b,c)},parse:function(b,c){return a(b,c)},today:function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},getDate:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())}};return e}),define("bui/base",["bui/observable"],function(a){function b(a,b,c){var d=a[b]||{};return c&&(a[b]=d),d}function c(a,b){return BUI.isString(b)?a[b]:b}function d(a,b,c,d,e){var f=c;return a.fire(b+BUI.ucfirst(c)+"Change",{attrName:f,prevVal:d,newVal:e})}function e(a,b,c,e){e=e||{};var f,g;return g=a.get(b),$.isPlainObject(c)||BUI.isArray(c)||g!==c?e.silent||!1!==d(a,"before",b,g,c)?(f=a._set(b,c,e),f===!1?f:(e.silent||(c=a.__attrVals[b],d(a,"after",b,g,c)),a)):!1:void 0}var f={},g=a("bui/observable"),h=function(a){var b=this,c=b.constructor,d=[];for(this.__attrs={},this.__attrVals={},g.apply(this,arguments);c;)d.push(c),c.extensions&&(BUI.mixin(c,c.extensions),delete c.extensions),c=c.superclass?c.superclass.constructor:null;for(var e=d.length-1;e>=0;e--)b.addAttrs(d[e].ATTRS,!0);b._initAttrs(a)};return h.INVALID=f,BUI.extend(h,g),BUI.augment(h,{addAttr:function(a,b){var c=this,d=c.__attrs,e=d[a];e||(e=d[a]={});for(var f in b)b.hasOwnProperty(f)&&("value"==f?BUI.isObject(b[f])?(e[f]=e[f]||{},BUI.mix(e[f],b[f])):BUI.isArray(b[f])?(e[f]=e[f]||[],BUI.mix(e[f],b[f])):e[f]=b[f]:e[f]=b[f]);return c},addAttrs:function(a,b,c){var d=this;return a?("boolean"==typeof b&&(c=b,b=null),BUI.each(a,function(a,b){d.addAttr(b,a,c)}),b&&d.set(b),d):d},hasAttr:function(a){return a&&this.__attrs.hasOwnProperty(a)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(a){var d,e,f,g=this,h=g.__attrVals;return d=b(g.__attrs,a),e=d.getter,f=a in h?h[a]:g._getDefAttrVal(a),e&&(e=c(g,e))&&(f=e.call(g,f,a)),f},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(a){var b=this;return b.hasAttr(a)&&(delete b.__attrs[a],delete b.__attrVals[a]),b},set:function(a,b,c){var d=this;if($.isPlainObject(a)){c=b;var f=Object(a);for(a in f)f.hasOwnProperty(a)&&e(d,a,f[a],c);return d}return e(d,a,b,c)},setInternal:function(a,b,c){return this._set(a,b,c)},_getDefAttrVal:function(a){var d,e=this,f=e.__attrs,g=b(f,a),h=g.valueFn;return h&&(h=c(e,h))&&(d=h.call(e),void 0!==d&&(g.value=d),delete g.valueFn,f[a]=g),g.value},_set:function(a,d){var e,g=this,h=b(g.__attrs,a,!0),i=h.setter;return i&&(i=c(g,i))&&(e=i.call(g,d,a)),e===f?!1:(void 0!==e&&(d=e),g.__attrVals[a]=d,void 0)},_initAttrs:function(a){var b=this;if(a)for(var c in a)a.hasOwnProperty(c)&&b._set(c,a[c])
}}),h}),define("bui/component",["bui/component/manage","bui/component/uibase","bui/component/view","bui/component/controller"],function(a){function b(a,b){var d,e;return a&&(e=a.xclass)&&(b&&!a.prefixCls&&(a.prefixCls=b.get("prefixCls")),d=c.Manager.getConstructorByXClass(e),d||BUI.error("can not find class by xclass desc : "+e),a=new d(a)),a}var c={};return BUI.mix(c,{Manager:a("bui/component/manage"),UIBase:a("bui/component/uibase"),View:a("bui/component/view"),Controller:a("bui/component/controller")}),c.create=b,c}),define("bui/component/manage",function(){function a(a){for(var b,c=a.split(/\s+/),d=-1,f=null,g=0;g<c.length;g++){var h=e[c[g]];h&&(b=h.priority)>d&&(d=b,f=h.constructor)}return f}function b(a){for(var b in e){var c=e[b];if(c.constructor==a)return b}return 0}function c(a,b){BUI.isFunction(b)?e[a]={constructor:b,priority:0}:(b.priority=b.priority||0,e[a]=b)}function d(a){for(var b=$.trim(a).split(/\s+/),c=0;c<b.length;c++)b[c]&&(b[c]=this.get("prefixCls")+b[c]);return b.join(" ")}var e={},f={},g={__instances:f,addComponent:function(a,b){f[a]=b},removeComponent:function(a){delete f[a]},eachComponent:function(a){BUI.each(f,a)},getComponent:function(a){return f[a]},getCssClassWithPrefix:d,getXClassByConstructor:b,getConstructorByXClass:a,setConstructorByXClass:c};return g}),function(){var a="bui/component/uibase/";define("bui/component/uibase",[a+"base",a+"align",a+"autoshow",a+"autohide",a+"close",a+"collapseable",a+"drag",a+"keynav",a+"list",a+"listitem",a+"mask",a+"position",a+"selection",a+"stdmod",a+"decorate",a+"tpl",a+"childcfg",a+"bindable",a+"depends"],function(b){var c=b(a+"base");return BUI.mix(c,{Align:b(a+"align"),AutoShow:b(a+"autoshow"),AutoHide:b(a+"autohide"),Close:b(a+"close"),Collapseable:b(a+"collapseable"),Drag:b(a+"drag"),KeyNav:b(a+"keynav"),List:b(a+"list"),ListItem:b(a+"listitem"),Mask:b(a+"mask"),Position:b(a+"position"),Selection:b(a+"selection"),StdMod:b(a+"stdmod"),Decorate:b(a+"decorate"),Tpl:b(a+"tpl"),ChildCfg:b(a+"childcfg"),Bindable:b(a+"bindable"),Depends:b(a+"depends")}),BUI.mix(c,{CloseView:c.Close.View,CollapseableView:c.Collapseable.View,ChildList:c.List.ChildList,ListItemView:c.ListItem.View,MaskView:c.Mask.View,PositionView:c.Position.View,StdModView:c.StdMod.View,TplView:c.Tpl.View}),c})}(),define("bui/component/uibase/base",["bui/component/manage"],function(a){function b(a){c(a,"initializer","constructor")}function c(a,b,c){for(var d,e,f,g,h=a.constructor,i=[];h;){if(g=[],f=h.mixins)for(var j=0;j<f.length;j++)d=f[j],d&&("constructor"!=c&&(d=d.prototype.hasOwnProperty(c)?d.prototype[c]:null),d&&g.push(d));h.prototype.hasOwnProperty(b)&&(e=h.prototype[b])&&g.push(e),g.length&&i.push.apply(i,g.reverse()),h=h.superclass&&h.superclass.constructor}for(j=i.length-1;j>=0;j--)i[j]&&i[j].call(a)}function d(a){for(var b,c,d,e=a.constructor;e;){if(e.prototype.hasOwnProperty("destructor")&&e.prototype.destructor.apply(a),b=e.mixins)for(d=b.length-1;d>=0;d--)c=b[d]&&b[d].prototype.__destructor,c&&c.apply(a);e=e.superclass&&e.superclass.constructor}}function e(a){a&&BUI.each(a,function(b,c){BUI.isFunction(b)&&(a[c]=new b)})}function f(a,b,c){b&&BUI.each(b,function(b){b[c]&&b[c](a)})}function g(a){var b,c,d=a.getAttrs();for(b in d)d.hasOwnProperty(b)&&(c=k+l(b),a[c]&&function(b,c){a.on("after"+l(b)+"Change",function(b){b.target===a&&a[c](b.newVal,b)})}(b,c))}function h(a){var b,c,d=a.getAttrs();for(var e in d)if(d.hasOwnProperty(e)){var f=k+l(e);(c=a[f])&&d[e].sync!==!1&&void 0!==(b=a.get(e))&&c.call(a,b)}}function i(a){for(var b=[];a.base;)b.push(a),a=a.base;for(var c=b.length-1;c>=0;c--){var d=b[c];BUI.mix(d.prototype,d.px),BUI.mix(d,d.sx),d.base=null,d.px=null,d.sx=null}}var j=a("bui/component/manage"),k="_uiSet",l=BUI.ucfirst,m=$.noop,n=a("bui/base"),o=function(a){var c=this;n.apply(c,arguments),c.setInternal("userConfig",a),b(c,a);var d=c.get("plugins");c.get("listeners"),e(d);var g=c.get("xclass");g&&(c.__xclass=g),f(c,d,"initializer"),a&&a.autoRender&&c.render()};return o.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{value:[]},rendered:{value:!1},xclass:{valueFn:function(){return j.getXClassByConstructor(this.constructor)}}},BUI.extend(o,n),BUI.augment(o,{create:function(){var a=this;return a.get("created")||(a.fire("beforeCreateDom"),c(a,"createDom","__createDom"),a._set("created",!0),a.fire("afterCreateDom"),f(a,a.get("plugins"),"createDom")),a},render:function(){var a=this;if(!a.get("rendered")){var b=a.get("plugins");a.create(void 0),a.fire("beforeRenderUI"),c(a,"renderUI","__renderUI"),a.fire("afterRenderUI"),f(a,b,"renderUI"),a.fire("beforeBindUI"),g(a),c(a,"bindUI","__bindUI"),a.fire("afterBindUI"),f(a,b,"bindUI"),a.fire("beforeSyncUI"),h(a),c(a,"syncUI","__syncUI"),a.fire("afterSyncUI"),f(a,b,"syncUI"),a._set("rendered",!0)}return a},createDom:m,renderUI:m,bindUI:m,syncUI:m,destroy:function(){var a=this;return a.fire("beforeDestroy"),f(a,a.get("plugins"),"destructor"),d(a),a.fire("afterDestroy"),a.off(),a.clearAttrVals(),a.destroyed=!0,a}}),BUI.mix(o,{define:function(a,b,c,d){function e(){var a=this.constructor;a.base&&i(a),o.apply(this,arguments)}return $.isPlainObject(b)&&(d=c,c=b,b=[]),BUI.extend(e,a),e.base=a,e.px=c,e.sx=d,b.length&&(e.extensions=b),e},extend:function p(){var a,b=$.makeArray(arguments),c=b[b.length-1];if(b.unshift(this),c.xclass&&(b.pop(),b.push(c.xclass)),a=o.define.apply(o,b),c.xclass){var d=c.priority||(this.priority?this.priority+1:1);j.setConstructorByXClass(c.xclass,{constructor:a,priority:d}),a.__xclass=c.xclass,a.priority=d,a.toString=function(){return c.xclass}}return a.extend=p,a}}),o}),define("bui/component/uibase/align",["bui/ua"],function(a){function b(a){var b,c=a.ownerDocument,d=c.body,e=$(a).css("position"),f="fixed"==e||"absolute"==e;if(!f)return"html"==a.nodeName.toLowerCase()?null:a.parentNode;for(b=a.parentNode;b&&b!=d;b=b.parentNode)if(e=$(b).css("position"),"static"!=e)return b;return null}function c(a){var c,d,e,f,g={left:0,right:1/0,top:0,bottom:1/0},h=a.ownerDocument,i=h.body,j=h.documentElement;for(c=a;c=b(c);)if((!n.ie||0!=c.clientWidth)&&c!=i&&c!=j&&"visible"!=$(c).css("overflow")){var k=$(c).offset();k.left+=c.clientLeft,k.top+=c.clientTop,g.top=Math.max(g.top,k.top),g.right=Math.min(g.right,k.left+c.clientWidth),g.bottom=Math.min(g.bottom,k.top+c.clientHeight),g.left=Math.max(g.left,k.left)}return d=$(p).scrollLeft(),e=$(p).scrollTop(),g.left=Math.max(g.left,d),g.top=Math.max(g.top,e),f={width:BUI.viewportWidth(),height:BUI.viewportHeight()},g.right=Math.min(g.right,d+f.width),g.bottom=Math.min(g.bottom,e+f.height),g.top>=0&&g.left>=0&&g.bottom>g.top&&g.right>g.left?g:null}function d(a,b,c,d){var e,f,g,h;return e={left:a.left,top:a.top},g=l(b,c[0]),h=l(a,c[1]),f=[h.left-g.left,h.top-g.top],{left:e.left-f[0]+ +d[0],top:e.top-f[1]+ +d[1]}}function e(a,b,c){return a.left<c.left||a.left+b.width>c.right}function f(a,b,c){return a.top<c.top||a.top+b.height>c.bottom}function g(a,b,c,d){var e=BUI.cloneObject(a),f={width:b.width,height:b.height};return d.adjustX&&e.left<c.left&&(e.left=c.left),d.resizeWidth&&e.left>=c.left&&e.left+f.width>c.right&&(f.width-=e.left+f.width-c.right),d.adjustX&&e.left+f.width>c.right&&(e.left=Math.max(c.right-f.width,c.left)),d.adjustY&&e.top<c.top&&(e.top=c.top),d.resizeHeight&&e.top>=c.top&&e.top+f.height>c.bottom&&(f.height-=e.top+f.height-c.bottom),d.adjustY&&e.top+f.height>c.bottom&&(e.top=Math.max(c.bottom-f.height,c.top)),BUI.mix(e,f)}function h(a,b,c){var d=[];return $.each(a,function(a,e){d.push(e.replace(b,function(a){return c[a]}))}),d}function i(a,b){return a[b]=-a[b],a}function j(){}function k(a){var b,c,d;return a.length&&!$.isWindow(a[0])?(b=a.offset(),c=a.outerWidth(),d=a.outerHeight()):(b={left:BUI.scrollLeft(),top:BUI.scrollTop()},c=BUI.viewportWidth(),d=BUI.viewportHeight()),b.width=c,b.height=d,b}function l(a,b){var c,d,e=b.charAt(0),f=b.charAt(1),g=a.width,h=a.height;return c=a.left,d=a.top,"c"===e?d+=h/2:"b"===e&&(d+=h),"c"===f?c+=g/2:"r"===f&&(c+=g),{left:c,top:d}}function m(a){var b=a.attr("class"),c=new RegExp("s?"+o+"[a-z]{2}-[a-z]{2}","ig"),d=c.exec(b);d&&a.removeClass(d.join(" "))}var n=a("bui/ua"),o="x-align-",p=window;return j.__getOffsetParent=b,j.__getVisibleRectForElement=c,j.ATTRS={align:{value:{}}},j.prototype={_uiSetAlign:function(a){var b,c,d="";a&&a.points&&(this.align(a.node,a.points,a.offset,a.overflow),this.set("cachePosition",null),b=this.get("el"),m(b),c=a.points.join("-"),d=o+c,b.addClass(d))},align:function(a,b,j,l){a=$(a||p),j=j&&[].concat(j)||[0,0],l=l||{};var m=this,n=m.get("el"),o=0,q=c(n[0]),r=k(n),s=k(a),t=d(r,s,b,j),u=BUI.merge(r,t);if(q&&(l.adjustX||l.adjustY)){e(t,r,q)&&(o=1,b=h(b,/[lr]/gi,{l:"r",r:"l"}),j=i(j,0)),f(t,r,q)&&(o=1,b=h(b,/[tb]/gi,{t:"b",b:"t"}),j=i(j,1)),o&&(t=d(r,s,b,j),BUI.mix(u,t));var v={};v.adjustX=l.adjustX&&e(t,r,q),v.adjustY=l.adjustY&&f(t,r,q),(v.adjustX||v.adjustY)&&(u=g(t,r,q,v))}return u.left!=r.left&&(m.setInternal("x",null),m.get("view").setInternal("x",null),m.set("x",u.left)),u.top!=r.top&&(m.setInternal("y",null),m.get("view").setInternal("y",null),m.set("y",u.top)),u.width!=r.width&&n.width(n.width()+u.width-r.width),u.height!=r.height&&n.height(n.height()+u.height-r.height),m},center:function(a){var b=this;return b.set("align",{node:a,points:["cc","cc"],offset:[0,0]}),b}},j}),define("bui/component/uibase/autoshow",function(){function a(){}return a.ATTRS={trigger:{},delegateTigger:{value:!1},autoAlign:{value:!0},autoFocused:{value:!0},curTrigger:{},triggerCallback:{value:function(){}},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},a.prototype={__createDom:function(){this._setTrigger()},_setTrigger:function(){function a(a){var b=c.get("curTrigger"),d=h?$(a.currentTarget):$(this),e=c.get("align");b&&b[0]==d[0]||(c.set("curTrigger",d),c.fire("triggerchange",{prevTrigger:b,curTrigger:d})),c.get("autoAlign")&&(e.node=d),c.set("align",e),c.show(),f&&f(a)}function b(a){var b=a.toElement||a.relatedTarget;b&&c.containsElement(b)||c.hide()}var c=this,d=c.get("triggerEvent"),e=c.get("triggerHideEvent"),f=c.get("triggerCallback"),g=c.get("trigger"),h=c.get("delegateTigger"),i=$(g);d&&(h&&BUI.isString(g)?$(document).delegate(g,d,a):i.on(d,a)),e&&(h&&BUI.isString(g)?$(document).delegate(g,e,b):i.on(e,b))},__renderUI:function(){var a=this,b=a.get("align");b&&!b.node&&(b.node=a.get("render")||a.get("trigger"))}},a}),define("bui/component/uibase/autohide",function(){function a(a,b){var c=a.get("hideExceptNode");return c&&c.length?$.contains(c[0],b):!1}function b(){}var c=BUI.wrapBehavior,d=BUI.getWrapBehavior;return b.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},b.prototype={__bindUI:function(){var a=this;a.on("afterVisibleChange",function(b){var c=b.newVal;a.get("autoHide")&&(c?a._bindHideEvent():a._clearHideEvent())})},handleMoveOuter:function(b){var c=this,d=b.toElement||b.relatedTarget;c.containsElement(d)||a(c,d)||c.fire("autohide")!==!1&&c.hide()},handleDocumentClick:function(b){var c=this,d=b.target;c.containsElement(d)||a(c,d)||c.fire("autohide")!==!1&&c.hide()},_bindHideEvent:function(){var a=this,b=a.get("curTrigger"),d=a.get("autoHideType");"click"===d?$(document).on("mousedown",c(a,"handleDocumentClick")):(a.get("el").on("mouseleave",c(a,"handleMoveOuter")),b&&$(b).on("mouseleave",c(a,"handleMoveOuter")))},_clearHideEvent:function(){var a=this,b=a.get("curTrigger"),c=a.get("autoHideType");"click"===c?$(document).off("mousedown",d(a,"handleDocumentClick")):(a.get("el").off("mouseleave",d(a,"handleMoveOuter")),b&&$(b).off("mouseleave",d(a,"handleMoveOuter")))}},b}),define("bui/component/uibase/close",function(){function a(a){return $(a.get("closeTpl"))}function b(){}function c(){}var d=BUI.prefix+"ext-";b.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+d+"close"+'">'+'<span class="'+d+"close-x"+'">\u5173\u95ed<'+"/span>"+"<"+"/a>"},closeable:{value:!0},closeBtn:{}},b.prototype={_uiSetCloseable:function(b){var c=this,d=c.get("closeBtn");b?(d||c.setInternal("closeBtn",d=a(c)),d.appendTo(c.get("el"),void 0)):d&&d.remove()}};var e="hide";c.ATTRS={closeTpl:{view:!0},closeable:{view:1},closeBtn:{view:1},closeAction:{value:e}};var f={hide:e,destroy:"destroy",remove:"remove"};return c.prototype={_uiSetCloseable:function(a){var b=this;a&&!b.__bindCloseEvent&&(b.__bindCloseEvent=1,b.get("closeBtn").on("click",function(a){b.fire("closeclick",{domTarget:a.target})!==!1&&b.close(),a.preventDefault()}))},__destructor:function(){var a=this.get("closeBtn");a&&a.detach()},close:function(){var a=this,b=f[a.get("closeAction")||e];a.fire("closing",{action:b})!==!1&&(a.fire("beforeclosed",{action:b}),"remove"==b?a[b](!0):a[b](),a.fire("closed",{action:b}))}},c.View=b,c}),define("bui/component/uibase/drag",function(){function a(){var a=$(d).css("opacity",0).prependTo("body");return a}var b=BUI.guid("drag"),c=function(){};c.ATTRS={dragNode:{},draging:{setter:function(a){return a===!0?{}:void 0},value:null},constraint:{},dragBackEl:{getter:function(){return $("#"+b)}}};var d='<div id="'+b+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';return c.prototype={__bindUI:function(){function a(a){var b=e.get("draging");b&&(a.preventDefault(),e._dragMoveTo(a.pageX,a.pageY,b,f))}function b(a){if(1==a.which){e.set("draging",!1);var b=e.get("dragBackEl");b&&b.hide(),d()}}function c(){$(document).on("mousemove",a),$(document).on("mouseup",b)}function d(){$(document).off("mousemove",a),$(document).off("mouseup",b)}var e=this,f=e.get("constraint"),g=e.get("dragNode");g&&g.on("mousedown",function(a){1==a.which&&(a.preventDefault(),e.set("draging",{elX:e.get("x"),elY:e.get("y"),startX:a.pageX,startY:a.pageY}),c())})},_dragMoveTo:function(b,c,d,e){var f=this,g=f.get("dragBackEl"),d=d||f.get("draging"),h=d.startX-b,i=d.startY-c;g.length||(g=a()),g.css({cursor:"move",display:"block"}),f.set("xy",[f._getConstrainX(d.elX-h,e),f._getConstrainY(d.elY-i,e)])},_getConstrainX:function(a,b){var c=this,d=c.get("el").outerWidth(),e=a+d,f=c.get("x");if(b){var g=b.offset();return g.left>=a?g.left:g.left+b.width()<e?g.left+b.width()-d:a}return BUI.isInHorizontalView(a)&&BUI.isInHorizontalView(e)?a:f},_getConstrainY:function(a,b){var c=this,d=c.get("el").outerHeight(),e=a+d,f=c.get("y");if(b){var g=b.offset();return g.top>a?g.top:g.top+b.height()<e?g.top+b.height()-d:a}return BUI.isInVerticalView(a)&&BUI.isInVerticalView(e)?a:f}},c}),define("bui/component/uibase/keynav",["bui/keycode"],function(a){var b=a("bui/keycode"),c=BUI.wrapBehavior,d=BUI.getWrapBehavior,e=function(){};return e.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},e.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(a){var b=this,e=b.get("navEvent"),f=b.get("el");a?f.on(e,c(b,"_handleKeyDown")):f.off(e,d(b,"_handleKeyDown"))},_handleKeyDown:function(a){var c=this,d=c.get("ignoreInputFields"),e=a.which;if(!d||!$(a.target).is("input,select,textarea"))switch(e){case b.UP:a.preventDefault(),c.handleNavUp(a);break;case b.DOWN:a.preventDefault(),c.handleNavDown(a);break;case b.RIGHT:a.preventDefault(),c.handleNavRight(a);break;case b.LEFT:a.preventDefault(),c.handleNavLeft(a);break;case b.ENTER:c.handleNavEnter(a);break;case b.ESC:c.handleNavEsc(a);break;case b.TAB:c.handleNavTab(a)}},handleNavUp:function(){},handleNavDown:function(){},handleNavLeft:function(){},handleNavRight:function(){},handleNavEnter:function(){},handleNavEsc:function(){},handleNavTab:function(){}},e}),define("bui/component/uibase/mask",function(a){function b(a){return a.get("prefixCls")+"ext-mask"}function c(){return j?BUI.docWidth()+"px":"100%"}function d(){return j?BUI.docHeight()+"px":"100%"}function e(a){var b=$('<div  style="width:'+c()+";"+"left:0;"+"top:0;"+"height:"+d()+";"+"position:"+(j?"absolute":"fixed")+';"'+' class="'+a+'">'+(j?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return b.on("mousedown",function(a){a.preventDefault()}),b}function f(){}function g(){}var h=a("bui/ua"),i={},j=6==h.ie;return f.ATTRS={maskShared:{value:!0}},f.prototype={_maskExtShow:function(){var a,c=this,d=b(c),f=i[d],g=c.get("maskShared"),h=c.get("maskNode");h||(g?f?h=f.node:(h=e(d),f=i[d]={num:0,node:h}):h=e(d),c.setInternal("maskNode",h)),(a=c.get("zIndex"))&&h.css("z-index",a-1),g&&f.num++,g&&1!=f.num||h.show(),$("body").addClass("x-masked-relative")},_maskExtHide:function(){var a=this,c=b(a),d=i[c],e=a.get("maskShared"),f=a.get("maskNode");e&&d?(d.num=Math.max(d.num-1,0),0==d.num&&f.hide()):f&&f.hide(),$("body").removeClass("x-masked-relative")},__destructor:function(){var a=this,b=a.get("maskShared"),c=a.get("maskNode");a.get("maskNode")&&(b?a.get("visible")&&a._maskExtHide():c.remove())}},g.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},g.prototype={__bindUI:function(){var a=this,b=a.get("view");b._maskExtShow,b._maskExtHide,a.get("mask")&&(a.on("show",function(){b._maskExtShow()}),a.on("hide",function(){b._maskExtHide()}))}},g=g,g.View=f,g}),define("bui/component/uibase/position",function(){function a(){}function b(){}return a.ATTRS={x:{valueFn:function(){var a=this;return a.get("el")&&a.get("el").offset().left}},y:{valueFn:function(){var a=this;return a.get("el")&&a.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},a.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(a){this.get("el").css("z-index",a)},_uiSetX:function(a){null!=a&&this.get("el").offset({left:a})},_uiSetY:function(a){null!=a&&this.get("el").offset({top:a})},_uiSetLeft:function(a){null!=a&&this.get("el").css({left:a})},_uiSetTop:function(a){null!=a&&this.get("el").css({top:a})}},b.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(a){var b=this,c=$.makeArray(a);return c.length&&(c[0]&&b.set("x",c[0]),c[1]&&b.set("y",c[1])),a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},b.prototype={move:function(a,b){var c=this;return BUI.isArray(a)&&(b=a[1],a=a[0]),c.set("xy",[a,b]),c},_uiSetX:function(a){if(null!=a){var b=this,c=b.get("el");b.setInternal("left",c.position().left),-999!=a&&this.set("cachePosition",null)}},_uiSetY:function(a){if(null!=a){var b=this,c=b.get("el");b.setInternal("top",c.position().top),-999!=a&&this.set("cachePosition",null)}},_uiSetLeft:function(a){var b=this,c=b.get("el");null!=a&&b.setInternal("x",c.offset().left)},_uiSetTop:function(a){var b=this,c=b.get("el");null!=a&&b.setInternal("y",c.offset().top)}},b.View=a,b}),define("bui/component/uibase/listitem",function(){function a(){}function b(){}return a.ATTRS={selected:{}},a.prototype={_uiSetSelected:function(a){var b=this,c=b.getStatusCls("selected"),d=b.get("el");a?d.addClass(c):d.removeClass(c)}},b.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},b.prototype={},b.View=a,b}),define("bui/component/uibase/stdmod",function(){function a(){}function b(a,b){var c=a.get("contentEl"),d=a.get(b);d||(d=$('<div class="'+e+b+'"'+" "+" >"+"</div>"),d.appendTo(c),a.setInternal(b,d))}function c(a,b,c){b=a.get(b),BUI.isString(c)?b.html(c):b.html("").append(c)}function d(){}var e=BUI.prefix+"stdmod-";return a.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},a.PARSER={header:function(a){return a.one("."+e+"header")},body:function(a){return a.one("."+e+"body")},footer:function(a){return a.one("."+e+"footer")}},a.prototype={__createDom:function(){b(this,"header"),b(this,"body"),b(this,"footer")},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){c(this,"body",a)},_uiSetHeaderContent:function(a){c(this,"header",a)},_uiSetFooterContent:function(a){c(this,"footer",a)}},d.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},d.View=a,d}),define("bui/component/uibase/decorate",["bui/array","bui/json","bui/component/manage"],function(a){function b(a,b){if(b[a])return!0;var c=new RegExp("^"+l);return a!==FIELD_CFG&&c.test(a)?!0:!1}function c(a){for(var b=[],c=a.constructor;c;)b.push(c),c=c.superclass&&c.superclass.constructor;return b}function d(a){return a=$.trim(a),regx.test(a)&&(a=j.looseParse(a)),a}function e(a,b){var c=a.userConfig||{};for(var d in b)d in c||a.setInternal(d,b[d])}function f(a,b){var c,d,e=this,f=e.userConfig||{};for(c in b)c in f||(d=b[c],BUI.isFunction(d)?e.setInternal(c,d.call(e,a)):"string"==typeof d?e.setInternal(c,a.find(d)):BUI.isArray(d)&&d[0]&&e.setInternal(c,a.find(d[0])))}function g(a,b){var d,e,g,h=a.constructor;for(g=c(a),d=g.length-1;d>=0;d--)h=g[d],(e=h[PARSER])&&f.call(a,b,e)}function h(a){var b,c,d=a,f=d.get("srcNode");f&&(f=$(f),d.setInternal("el",f),d.setInternal("srcNode",f),b=d.get("userConfig"),c=d.getDecorateConfig(f),e(a,c),d.get("isDecorateChild")&&d.decorateInternal&&d.decorateInternal(f),g(a,f))}function i(){h(this)}var j=(a("bui/array"),a("bui/json")),k=BUI.prefix,l="data-";return FIELD_CFG=l+"cfg",PARSER="PARSER",Manager=a("bui/component/manage"),regx=/^[\{\[]/,i.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},i.prototype={getDecorateConfig:function(a){if(!a.length)return null;var c=this,e=a[0],f=e.attributes,g=c.get("decorateCfgFields"),h={},i=c._getStautsCfg(a);return BUI.each(f,function(a){var c=a.nodeName;try{if(c===FIELD_CFG){var e=d(a.nodeValue);BUI.mix(h,e)}else b(c,g)&&(c=c.replace(l,""),h[c]=d(a.nodeValue))}catch(f){BUI.log("parse field error,the attribute is:"+c)}}),BUI.mix(h,i)},_getStautsCfg:function(a){var b=this,c={},d=b.get("statusCls");return BUI.each(d,function(b,d){a.hasClass(b)&&(c[d]=!0)}),c},getDecorateElments:function(){var a=this,b=a.get("el"),c=a.get("childContainer");return c?b.find(c).children():b.children()},decorateInternal:function(a){var b=this;b.decorateChildren(a)},findXClassByNode:function(a,b){var c=this,d=a.attr("class")||"",e=c.get("defaultChildClass");d=d.replace(new RegExp("\\b"+k,"ig"),"");var f=Manager.getConstructorByXClass(d)||Manager.getConstructorByXClass(e);return f||b||(BUI.log(a),BUI.error("can not find ui "+d+" from this markup")),Manager.getXClassByConstructor(f)},decorateChildrenInternal:function(a,b){var c=this,d=c.get("children");d.push({xclass:a,srcNode:b})},decorateChildren:function(){var a=this,b=a.getDecorateElments();BUI.each(b,function(b){var c=a.findXClassByNode($(b));a.decorateChildrenInternal(c,$(b))})}},i}),define("bui/component/uibase/tpl",function(){function a(){}function b(){}return a.ATTRS={tpl:{},tplEl:{}},a.prototype={__renderUI:function(){var a,b=this,c=b.get("childContainer");c&&(a=b.get("el").find(c),a.length&&b.set("contentEl",a))},getTpl:function(a){var b=this,c=b.get("tpl"),d=b.get("tplRender");return a=a||b.getAttrVals(),d?d(a):c?BUI.substitute(c,a):""},setTplContent:function(a){var b=this,c=b.get("el"),d=b.get("content"),e=b.get("tplEl"),f=b.getTpl(a);if(!d&&f){if(e){var g=$(f).insertBefore(e);e.remove(),e=g}else e=$(f).appendTo(c);b.set("tplEl",e)}}},b.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},b.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},updateContent:function(){this.setTplContent()},setTplContent:function(){var a=this,b=a.getAttrVals();a.get("view").setTplContent(b)},_uiSetTpl:function(){this.setTplContent()}},b.View=a,b}),define("bui/component/uibase/collapseable",function(){var a=function(){};a.ATTRS={collapsed:{}},a.prototype={_uiSetCollapsed:function(a){var b=this,c=b.getStatusCls("collapsed"),d=b.get("el");a?d.addClass(c):d.removeClass(c)}};var b=function(){};return b.ATTRS={collapseable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},b.prototype={_uiSetCollapsed:function(a){var b=this;a?b.fire("collapsed"):b.fire("expanded")}},b.View=a,b}),define("bui/component/uibase/selection",function(){var a=function(){};return a.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},a.prototype={clearSelection:function(){var a=this,b=a.getSelection();BUI.each(b,function(b){a.clearSelected(b)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var a=this,b=a.get("idField"),c=a.getSelected();return a.getValueByField(c,b)},getSelectionValues:function(){var a=this,b=a.get("idField"),c=a.getSelection();return $.map(c,function(c){return a.getValueByField(c,b)})},getSelectionText:function(){var a=this,b=a.getSelection();return $.map(b,function(b){return a.getItemText(b)})},clearSelected:function(a){var b=this;a=a||b.getSelected(),a&&b.setItemSelected(a,!1)},getSelectedText:function(){var a=this,b=a.getSelected();return a.getItemText(b)},setSelection:function(a){var b=this;a=BUI.isArray(a)?a:[a],BUI.each(a,function(a){b.setSelected(a)})},setSelected:function(a){var b=this,c=b.get("multipleSelect");if(b.isItemSelectable(a)){if(!c){var d=b.getSelected();a!=d&&b.clearSelected(d)}b.setItemSelected(a,!0)}},isItemSelected:function(){},isItemSelectable:function(){return!0},setItemSelected:function(a,b){var c,d=this;a&&(c=d.isItemSelected(a),c==b)||d.fire("beforeselectedchange",{item:a,selected:b})!==!1&&d.setItemSelectedStatus(a,b)},setItemSelectedStatus:function(){},setAllSelection:function(){},setSelectedByField:function(a,b){b||(b=a,a=this.get("idField"));var c=this,d=c.findItemByField(a,b);c.setSelected(d)},setSelectionByField:function(a,b){b||(b=a,a=this.get("idField"));var c=this;BUI.each(b,function(b){c.setSelectedByField(a,b)})},afterSelected:function(a,b,c){var d=this;b?(d.fire("itemselected",{item:a,domTarget:c}),d.fire("selectedchange",{item:a,domTarget:c,selected:b})):(d.fire("itemunselected",{item:a,domTarget:c}),d.get("multipleSelect")&&d.fire("selectedchange",{item:a,domTarget:c,selected:b}))}},a}),define("bui/component/uibase/list",["bui/component/uibase/selection"],function(a){function b(a,b){var d=b.isController?b.getAttrVals():b,e=a.get("itemTpl"),f=a.get("itemStatusCls"),g=a.get("itemTplRender");if(e&&!d.tpl&&c(b,"tpl",e),g&&!d.tplRender&&c(b,"tplRender",g),f){var h=d.statusCls||b.isController?b.get("statusCls"):{};BUI.each(f,function(a,b){a&&!h[b]&&(h[b]=a)}),c(b,"statusCls",h)}}function c(a,b,c){a.isController?a.set(b,c):a[b]=c}var d=a("bui/component/uibase/selection"),e=function(){};e.ATTRS={items:{view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},e.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(a){return this.getItems()[a]||null},getItem:function(a){var b=this.get("idField");return this.findItemByField(b,a)},indexOfItem:function(a){return BUI.Array.indexOf(a,this.getItems())},addItems:function(a){var b=this;BUI.each(a,function(a){b.addItem(a)})},addItemsAt:function(a,b){var c=this;BUI.each(a,function(a,d){c.addItemAt(a,b+d)})},updateItem:function(){},addItem:function(a){return this.addItemAt(a,this.getItemCount())},addItemAt:function(){},findItemByField:function(){},getItemText:function(){},clearItems:function(){var a=this,b=a.getItems();b.splice(0),a.clearControl()},removeItem:function(){},removeItems:function(a){var b=this;BUI.each(a,function(a){b.removeItem(a)})},removeItemAt:function(a){this.removeItem(this.getItemAt(a))},clearControl:function(){}};var f=function(){this.__init()};return f.ATTRS=BUI.merge(!0,e.ATTRS,d.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},isDecorateChild:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(f,e,d,{__init:function(){var a=this,b=a.get("items");b&&a.get("autoInitItems")&&a.addItems(b),a.on("beforeRenderUI",function(){a._beforeRenderUI()})},_uiSetItems:function(a){var b=this;b.clearControl(),b.addItems(a)},_beforeRenderUI:function(){var a=this,c=a.get("children");a.get("items"),BUI.each(c,function(c){b(a,c)})},__bindUI:function(){var a=this,c=a.get("selectedEvent");a.on(c,function(b){var c=b.target;c.get("selectable")&&(c.get("selected")?a.get("multipleSelect")&&a.clearSelected(c):a.setSelected(c))}),a.on("click",function(b){b.target!==a&&a.fire("itemclick",{item:b.target,domTarget:b.domTarget,domEvent:b})}),a.on("beforeAddChild",function(c){b(a,c.child)}),a.on("beforeRemoveChild",function(b){var c=b.child,d=c.get("selected");d&&(a.get("multipleSelect")?a.clearSelected(c):a.setSelected(null)),c.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(a){var b=this,c=b.get("idField"),d=b.findItemByField(c,a[c]);return d&&d.setTplContent(),d},removeItem:function(a){var b=this,c=b.get("idField");a instanceof BUI.Component.Controller||(a=b.findItemByField(c,a[c])),this.removeChild(a,!0)},addItemAt:function(a,b){return this.addChild(a,b)},findItemByField:function(a,b,c){c=c||this;var d=this,e=c.get("children"),f=null;return $(e).each(function(c,e){return e.get(a)==b?f=e:e.get("children").length&&(f=d.findItemByField(a,b,e)),f?!1:void 0}),f},getItemText:function(a){return a.get("el").text()},getValueByField:function(a,b){return a&&a.get(b)},setItemSelectedStatus:function(a,b){var c=this,d=null;a&&(a.set("selected",b),d=a.get("el")),c.afterSelected(a,b,d)},isItemSelected:function(a){return a?a.get("selected"):!1},setAllSelection:function(){var a=this,b=a.getItems();a.setSelection(b)},getSelection:function(){var a=this,b=a.getItems(),c=[];return BUI.each(b,function(b){a.isItemSelected(b)&&c.push(b)}),c}}),e.ChildList=f,e}),define("bui/component/uibase/childcfg",function(){var a=function(){this._init()};return a.ATTRS={defaultChildCfg:{}},a.prototype={_init:function(){var a=this,b=a.get("defaultChildCfg");b&&a.on("beforeAddChild",function(a){var c=a.child;$.isPlainObject(c)&&BUI.each(b,function(a,b){c[b]||(c[b]=a)})})}},a}),define("bui/component/uibase/depends",["bui/component/manage"],function(a){function b(a){var b=g.exec(a),c=b[1],d=b[2],f=e(c);return{source:f,eventType:d}}function c(a,c,d){var e,f=b(c),g=f.source,h=f.eventType;return g&&d&&h&&(BUI.isFunction(d)?e=d:BUI.isArray(d)&&(e=function(){BUI.each(d,function(b){a[b]&&a[b]()})})),e?(f.callbak=e,g.on(h,e),f):null}function d(a){var b=a.source,c=a.eventType,d=a.callbak;b.off(c,d)}function e(a){var b=h.getComponent(a);return b||(b=$("#"+a),b.length||(b=null)),b}function f(){}var g=/^#(.*):(.*)$/,h=a("bui/component/manage");return f.ATTRS={depends:{value:{}},dependencesMap:{value:{}}},f.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var a=this,b=a.get("depends");BUI.each(b,function(b,c){a.addDependence(c,b)})},addDependence:function(a,b){var d,e=this,f=e.get("dependencesMap");e.removeDependence(a),d=c(e,a,b),d&&(f[a]=d)},removeDependence:function(a){var b=this,c=b.get("dependencesMap"),e=c[a];e&&(d(e),delete c[a])},clearDependences:function(){var a=this,b=a.get("dependencesMap");BUI.each(b,function(a){d(a)}),a.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},f}),define("bui/component/uibase/bindable",function(){function a(){}return a.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(a,{__bindUI:function(){var a=this,b=a.get("store"),c=a.get("loadMask");b&&(b.on("beforeload",function(b){a.onBeforeLoad(b),c&&c.show&&c.show()}),b.on("load",function(b){a.onLoad(b),c&&c.hide&&c.hide()
}),b.on("exception",function(b){a.onException(b),c&&c.hide&&c.hide()}),b.on("add",function(b){a.onAdd(b)}),b.on("remove",function(b){a.onRemove(b)}),b.on("update",function(b){a.onUpdate(b)}),b.on("localsort",function(b){a.onLocalSort(b)}))},__syncUI:function(){var a=this,b=a.get("store");b&&b.hasData()&&a.onLoad()},onBeforeLoad:function(){},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){}}),a}),define("bui/component/view",["bui/component/manage","bui/component/uibase"],function(a){var b=a("bui/component/manage"),c=a("bui/component/uibase"),d=document,e=c.extend([c.TplView],{getComponentCssClassWithState:function(a){var b=this,c=b.get("ksComponentCss");return a=a||"",b.getCssClassWithPrefix(c.split(/\s+/).join(a+" ")+a)},getCssClassWithPrefix:b.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(a){var b=this,c=b.get("statusCls"),d=c[a];return d||(d=b.getComponentCssClassWithState("-"+a)),d},renderUI:function(){var a=this;if(!a.get("srcNode")){var b=a.get("render"),c=a.get("el"),e=a.get("elBefore");e?c.insertBefore(e,void 0):b?c.appendTo(b,void 0):c.appendTo(d.body,void 0)}},createDom:function(){var a=this,b=a.get("contentEl"),c=a.get("el");a.get("srcNode")||(c=$("<"+a.get("elTagName")+">"),b&&c.append(b),a.setInternal("el",c)),c.addClass(a.getComponentCssClassWithState()),b||a.setInternal("contentEl",c)},_uiSetHighlighted:function(a){var b=this,c=b.getStatusCls("hover"),d=b.get("el");d[a?"addClass":"removeClass"](c)},_uiSetDisabled:function(a){var b=this,c=b.getStatusCls("disabled"),d=b.get("el");d[a?"addClass":"removeClass"](c).attr("aria-disabled",a),a&&b.get("highlighted")&&b.set("highlighted",!1),b.get("focusable")&&b.getKeyEventTarget().attr("tabIndex",a?-1:0)},_uiSetActive:function(a){var b=this,c=b.getStatusCls("active");b.get("el")[a?"addClass":"removeClass"](c).attr("aria-pressed",!!a)},_uiSetFocused:function(a){var b=this,c=b.get("el"),d=b.getStatusCls("focused");c[a?"addClass":"removeClass"](d)},_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetRole:function(a){a&&this.get("el").attr("role",a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){var b=this;b.get("el").height(a)},_uiSetContent:function(a){var b,c=this;c.get("srcNode")&&!c.get("rendered")||(b=c.get("contentEl"),"string"==typeof a?b.html(a):a&&b.empty().append(a))},_uiSetVisible:function(a){var b=this,c=b.get("el"),d=b.get("visibleMode");"visibility"===d?c.css("visibility",a?"visible":"hidden"):c.css("display",a?"":"none")},destructor:function(){var a=this.get("el");a&&a.remove()}},{xclass:"view",priority:0});return e.ATTRS={el:{setter:function(a){return $(a)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},e}),define("bui/component/controller",["bui/component/uibase","bui/component/manage","bui/component/view","bui/component/loader"],function(a){"use strict";function b(a){return function(b){var c=this;if(c===b.target){var d=b.newVal,e=c.get("view");e&&e.set(a,d)}}}function c(a){return function(b){var c=this,d=c.get("view");return void 0===b?d.get(a):b}}function d(a,b,c){a.create();var d=a.getContentElement(),e=a.get("defaultChildClass");return b.xclass||b instanceof n||(b.xclass=b.xtype?e+"-"+b.xtype:e),b=BUI.Component.create(b,a),b.setInternal("parent",a),b.set("render",d),b.set("elBefore",c),b.create(void 0),b}function e(a){var d,e,g,h,i={},j=a.get("xview");d=a.getAttrs();for(g in d)d.hasOwnProperty(g)&&(e=d[g],e.view&&(void 0!==(h=a.get(g))&&(i[g]=h),a.on("after"+BUI.ucfirst(g)+"Change",b(g)),e.getter=c(g)));return delete i.autoRender,i.ksComponentCss=f(a),new j(i)}function f(a){for(var b,c=a.constructor,d=[];c&&c!==n;)b=i.getXClassByConstructor(c),b&&d.push(b),c=c.superclass&&c.superclass.constructor;return d.join(" ")}function g(a,b){var c=a.relatedTarget;return c&&(c===b[0]||$.contains(b,c))}var h=a("bui/component/uibase"),i=a("bui/component/manage"),j=a("bui/component/view"),k=a("bui/component/loader"),l=BUI.wrapBehavior,m=BUI.getWrapBehavior,n=h.extend([h.Decorate,h.Tpl,h.ChildCfg,h.KeyNav,h.Depends],{isController:!0,getCssClassWithPrefix:i.getCssClassWithPrefix,initializer:function(){var a=this;a.get("id")||a.set("id",a.getNextUniqueId()),i.addComponent(a.get("id"),a),a.setInternal("view",e(a))},getNextUniqueId:function(){var a=this,b=i.getXClassByConstructor(a.constructor);return BUI.guid(b)},createDom:function(){var a=this,b=a.get("view");b.create(void 0)},renderUI:function(){var a=this,b=a.get("loader");a.get("view").render(),a._initChildren(),b&&a.setInternal("loader",b)},_initChildren:function(a){var b,a,c,d=this;for(a=a||d.get("children").concat(),d.get("children").length=0,b=0;b<a.length;b++)c=d.addChild(a[b]),c.render()},bindUI:function(){var a=this,b=a.get("events");this.on("afterVisibleChange",function(a){this.fire(a.newVal?"show":"hide")}),BUI.each(b,function(b,c){a.publish(c,{bubbles:b})})},containsElement:function(a){var b=this,c=b.get("el"),d=b.get("children"),e=!1;return b.get("rendered")?($.contains(c[0],a)||c[0]===a?e=!0:BUI.each(d,function(b){return b.containsElement(a)?(e=!0,!1):void 0}),e):!1},isChildrenElement:function(a){var b=this,c=b.get("children"),d=!1;return BUI.each(c,function(b){return b.containsElement(a)?(d=!0,!1):void 0}),d},show:function(){var a=this;return a.render(),a.set("visible",!0),a},hide:function(){var a=this;return a.set("visible",!1),a},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(a){var b,c=this,d=c.getKeyEventTarget();a?d.attr("tabIndex",0).attr("hideFocus",!0).on("focus",l(c,"handleFocus")).on("blur",l(c,"handleBlur")).on("keydown",l(c,"handleKeydown")).on("keyup",l(c,"handleKeyUp")):(d.removeAttr("tabIndex"),(b=m(c,"handleFocus"))&&d.off("focus",b),(b=m(c,"handleBlur"))&&d.off("blur",b),(b=m(c,"handleKeydown"))&&d.off("keydown",b),(b=m(c,"handleKeyUp"))&&d.off("keyup",b))},_uiSetHandleMouseEvents:function(a){var b,c=this,d=c.get("el");a?d.on("mouseenter",l(c,"handleMouseEnter")).on("mouseleave",l(c,"handleMouseLeave")).on("contextmenu",l(c,"handleContextMenu")).on("mousedown",l(c,"handleMouseDown")).on("mouseup",l(c,"handleMouseUp")).on("dblclick",l(c,"handleDblClick")):(b=m(c,"handleMouseEnter")&&d.off("mouseenter",b),b=m(c,"handleMouseLeave")&&d.off("mouseleave",b),b=m(c,"handleContextMenu")&&d.off("contextmenu",b),b=m(c,"handleMouseDown")&&d.off("mousedown",b),b=m(c,"handleMouseUp")&&d.off("mouseup",b),b=m(c,"handleDblClick")&&d.off("dblclick",b))},_uiSetFocused:function(a){a&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(a){var b=this,c=(b.get("el"),b.get("visibleMode"));if("visibility"===c){if(a){var d=b.get("cachePosition");d&&b.set("xy",d)}if(!a){var d=[b.get("x"),b.get("y")];b.set("cachePosition",d),b.set("xy",[-999,-999])}}},_uiSetChildren:function(a){var b=this,c=BUI.cloneObject(a);b._initChildren(c)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(a,b){var c,e=this,f=e.get("children");return void 0===b&&(b=f.length),e.fire("beforeAddChild",{child:a,index:b}),c=f[b]&&f[b].get("el")||null,a=d(e,a,c),f.splice(b,0,a),e.get("rendered")&&a.render(),e.fire("afterAddChild",{child:a,index:b}),a},remove:function(a){var b=this,c=b.get("parent");return c?c.removeChild(b,a):a&&b.destroy(),b},removeChild:function(a,b){var c=this,d=c.get("children"),e=BUI.Array.indexOf(a,d);if(-1!==e)return c.fire("beforeRemoveChild",{child:a,destroy:b}),-1!==e&&d.splice(e,1),b&&a.destroy&&a.destroy(),c.fire("afterRemoveChild",{child:a,destroy:b}),a},removeChildren:function(a){var b,c=this,d=[].concat(c.get("children"));for(b=0;b<d.length;b++)c.removeChild(d[b],a)},getChildAt:function(a){var b=this.get("children");return b[a]||null},getChild:function(a,b){return this.getChildBy(function(b){return b.get("id")===a},b)},getChildBy:function(a,b){return this.getChildrenBy(a,b)[0]||null},getAppendHeight:function(){var a=this.get("el");return a.outerHeight()-a.height()},getAppendWidth:function(){var a=this.get("el");return a.outerWidth()-a.width()},getChildrenBy:function(a,b){var c=this,d=[];return a?(c.eachChild(function(c){a(c)?d.push(c):b&&(d=d.concat(c.getChildrenBy(a,b)))}),d):d},eachChild:function(a){BUI.each(this.get("children"),a)},handleDblClick:function(a){this.performActionInternal(a),this.isChildrenElement(a.target)||this.fire("dblclick",{domTarget:a.target,domEvent:a})},handleMouseOver:function(a){var b=this,c=b.get("el");g(a,c)||b.handleMouseEnter(a)},handleMouseOut:function(a){var b=this,c=b.get("el");g(a,c)||b.handleMouseLeave(a)},handleMouseEnter:function(a){var b=this;this.set("highlighted",!!a),b.fire("mouseenter",{domTarget:a.target,domEvent:a})},handleMouseLeave:function(a){var b=this;b.set("active",!1),b.set("highlighted",!a),b.fire("mouseleave",{domTarget:a.target,domEvent:a})},handleMouseDown:function(a){var b,c,d=this,e=1===a.which;e&&(c=d.getKeyEventTarget(),d.get("activeable")&&d.set("active",!0),d.get("focusable")&&(c[0].focus(),d.set("focused",!0)),d.get("allowTextSelection")||(b=a.target.nodeName,b=b&&b.toLowerCase(),"input"!==b&&"textarea"!==b&&a.preventDefault()),d.isChildrenElement(a.target)||d.fire("mousedown",{domTarget:a.target,domEvent:a}))},handleMouseUp:function(a){var b=this,c=b.isChildrenElement(a.target);b.get("active")&&1===a.which&&(b.performActionInternal(a),b.set("active",!1),c||b.fire("click",{domTarget:a.target,domEvent:a})),c||b.fire("mouseup",{domTarget:a.target,domEvent:a})},handleContextMenu:function(){},handleFocus:function(a){this.set("focused",!!a),this.fire("focus",{domEvent:a,domTarget:a.target})},handleBlur:function(a){this.set("focused",!a),this.fire("blur",{domEvent:a,domTarget:a.target})},handleKeyEventInternal:function(a){var b=this,c=b.isChildrenElement(a.target);return 13===a.which?(c||b.fire("click",{domTarget:a.target,domEvent:a}),this.performActionInternal(a)):(c||b.fire("keydown",{domTarget:a.target,domEvent:a}),void 0)},handleKeydown:function(a){var b=this;return b.handleKeyEventInternal(a)?(a.halt(),!0):void 0},handleKeyUp:function(a){var b=this;b.isChildrenElement(a.target)||b.fire("keyup",{domTarget:a.target,domEvent:a})},performActionInternal:function(){},destructor:function(){var a,b,c=this,d=c.get("children");for(a=c.get("id"),b=0;b<d.length;b++)d[b].destroy&&d[b].destroy();c.get("view").destroy(),i.removeComponent(a)}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},role:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(a){var b,c=this;return a&&!a.isLoader&&(a.target=c,b=c.get("defaultLoaderCfg"),a=new k(BUI.merge(b,a)),c.setInternal("loader",a)),a}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(a){this.addTarget(a)}},disabled:{view:1,value:!1},xview:{value:j}},PARSER:{visible:function(a){var b=this,c=a.css("display"),d=a.css("visibility"),e=b.get("visibleMode");return"none"==c&&"display"==e||"hidden"==d&&"visibility"==e?!1:!0}}},{xclass:"controller",priority:0});return n}),define("bui/cookie",function(){function a(a){return"string"==typeof a&&""!==a}var b=document,c=864e5,d=encodeURIComponent,e=decodeURIComponent,f={get:function(c){var d,f;return a(c)&&(f=String(b.cookie).match(new RegExp("(?:^| )"+c+"(?:(?:=([^;]*))|;|$)")))&&(d=f[1]?e(f[1]):""),d},set:function(e,f,g,h,i,j){var k=String(d(f)),l=g;"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+g*c)),l instanceof Date&&(k+="; expires="+l.toUTCString()),a(h)&&(k+="; domain="+h),a(i)&&(k+="; path="+i),j&&(k+="; secure"),b.cookie=e+"="+k},remove:function(a,b,c,d){this.set(a,"",-1,b,c,d)}};return BUI.Cookie=f,f}),function(){var a="bui/data/";define("bui/data",["bui/common",a+"sortable",a+"proxy",a+"abstractstore",a+"store",a+"node",a+"treestore"],function(b){var c=b("bui/common"),d=c.namespace("Data");return c.mix(d,{Sortable:b(a+"sortable"),Proxy:b(a+"proxy"),AbstractStore:b(a+"abstractstore"),Store:b(a+"store"),Node:b(a+"node"),TreeStore:b(a+"treestore")}),d})}(),define("bui/data/sortable",function(){var a="ASC",b=function(){};return b.ATTRS={compareFunction:{value:function(a,b){return void 0===a&&(a=""),void 0===b&&(b=""),BUI.isString(a)?a.localeCompare(b):a>b?1:a===b?0:-1}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var a=this,b=a.get("sortField");return{field:b,direction:a.get("sortDirection")}},setter:function(a){var b=this;b.set("sortField",a.field),b.set("sortDirection",a.direction)}}},BUI.augment(b,{compare:function(b,c,d,e){var f,g=this;return d=d||g.get("sortField"),e=e||g.get("sortDirection"),d&&e?(f=e===a?1:-1,g.get("compareFunction")(b[d],c[d])*f):1},getSortData:function(){},sortData:function(a,b,c){var d=this,c=c||d.getSortData();return BUI.isArray(a)&&(c=a,a=null),a=a||d.get("sortField"),b=b||d.get("sortDirection"),d.set("sortField",a),d.set("sortDirection",b),a&&b?(c.sort(function(c,e){return d.compare(c,e,a,b)}),c):c}}),b}),define("bui/data/proxy",["bui/data/sortable"],function(a){var b=a("bui/data/sortable"),c=function(a){c.superclass.constructor.call(this,a)};c.ATTRS={},BUI.extend(c,BUI.Base),BUI.augment(c,{_read:function(){},read:function(a,b,c){var d=this;c=c||d,d._read(a,function(a){b.call(c,a)})},update:function(){}});var d=function(a){d.superclass.constructor.call(this,a)};d.ATTRS=BUI.mix(!0,c.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},pageStart:{value:0},dataType:{value:"json"},method:{value:"GET"},cache:{value:!1},url:{}}),BUI.extend(d,c),BUI.augment(d,{_processParams:function(a){var b=this,c=b.get("pageStart"),d=["start","limit","pageIndex"];null!=a.pageIndex&&(a.pageIndex=a.pageIndex+c),BUI.each(d,function(c){var d=b.get(c+"Param");d!==c&&(a[d]=a[c],delete a[c])})},_read:function(a,b){var c=this;a=BUI.cloneObject(a),c._processParams(a),$.ajax({url:c.get("url"),type:c.get("method"),dataType:c.get("dataType"),data:a,cache:c.get("cache"),success:function(a){b(a)},error:function(a,c,d){var e={exception:{status:c,errorThrown:d,jqXHR:a}};b(e)}})}});var e=function(a){e.superclass.constructor.call(this,a)};return e.ATTRS={matchFields:{value:[]}},BUI.extend(e,c),BUI.mixin(e,[b]),BUI.augment(e,{_read:function(a,b){var c=this,d=(a.pageable,a.start),e=a.sortField,f=a.sortDirection,g=a.limit,h=c.get("data"),i=[];h=c._getMatches(a),c.sortData(e,f),g?(i=h.slice(d,d+g),b({rows:i,results:h.length})):(i=h.slice(d),b(i))},_getMatchFn:function(a,b){return function(c){var d=!0;return BUI.each(b,function(b){return null!=a[b]&&a[b]!==c[b]?(d=!1,!1):void 0}),d}},_getMatches:function(a){var b,c=this,d=c.get("matchFields"),e=c.get("data")||[];return a&&d.length&&(b=c._getMatchFn(a,d),e=BUI.Array.filter(e,b)),e}}),c.Ajax=d,c.Memery=e,c}),define("bui/data/abstractstore",["bui/common","bui/data/proxy"],function(a){function b(a){b.superclass.constructor.call(this,a),this._init()}var c=a("bui/common"),d=a("bui/data/proxy");return b.ATTRS={autoLoad:{value:!1},remoteFilter:{value:!1},lastParams:{value:{}},params:{},proxy:{value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeprocessload","add","exception","remove","update","localsort"]},data:{setter:function(a){var b=this,c=b.get("proxy");c.set?c.set("data",a):c.data=a,b.set("autoLoad",!0)}}},c.extend(b,c.Base),c.augment(b,{isStore:!0,_init:function(){var a=this;a.beforeInit(),a._initParams(),a._initProxy(),a._initData()},beforeInit:function(){},_initData:function(){var a=this,b=a.get("autoLoad");b&&a.load()},_initParams:function(){var a=this,b=a.get("lastParams"),d=a.get("params");c.mix(b,d)},_initProxy:function(){var a=this,b=a.get("url"),c=a.get("proxy");c instanceof d||(b&&(c.url=b),c="ajax"===c.type||c.url?new d.Ajax(c):new d.Memery(c),a.set("proxy",c))},load:function(a,b){var d=this,e=d.get("proxy"),f=d.get("lastParams");c.mix(f,d.getAppendParams(),a),d.fire("beforeload",{params:f}),a=c.cloneObject(f),e.read(f,function(c){d.onLoad(c,a),b&&b(c,a)},d)},onFiltered:function(a,b){var c=this;c.fire("filtered",{data:a,filter:b})},onLoad:function(a,b){var c=this,d=c.processLoad(a,b);d&&c.afterProcessLoad(a,b)},filter:function(a){var b,c=this,d=c.get("remoteFilter");d?c.load({filter:a}):(c.set("filter",a),b=c._filterLocal(a),c.onFiltered(b,a))},_filterLocal:function(){},_clearLocalFilter:function(){this._filterLocal(function(){return!0})},clearFilter:function(){var a=this,b=a.get("remoteFilter");b?a.load({filter:""}):a._clearLocalFilter()},processLoad:function(a){var b=this,c=b.get("hasErrorProperty");return b.fire("beforeprocessload",{data:a}),b.fire("beforeProcessLoad",a),a[c]||a.exception?(b.onException(a),!1):!0},afterProcessLoad:function(){},onException:function(a){var b=this,c=b.get("errorProperty"),d={};a.exception?(d.type="exception",d[c]=a.exception):(d.type="error",d[c]=a[c]),b.fire("exception",d)},hasData:function(){},getAppendParams:function(){return{}}}),b}),define("bui/data/node",["bui/common"],function(a){function b(a,b){var c={};return b?(d.each(a,function(a,d){var e=b[d]||d;c[e]=a}),c.record=a):c=a,c}function c(a,c){a=b(a,c),d.mix(this,a)}var d=a("bui/common");return d.augment(c,{root:!1,leaf:null,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0}),c}),define("bui/data/treestore",["bui/common","bui/data/node","bui/data/abstractstore","bui/data/proxy"],function(a){function b(a){b.superclass.constructor.call(this,a)}var c=a("bui/common"),d=a("bui/data/node"),e=a("bui/data/proxy"),f=a("bui/data/abstractstore");return b.ATTRS={root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}},c.extend(b,f),c.augment(b,{beforeInit:function(){this.initRoot()},_initData:function(){var a=this,b=a.get("autoLoad"),c=a.get("pidField"),d=a.get("proxy"),e=a.get("root");!d.get("url")&&c&&d.get("matchFields").push(c),b&&!e.children&&a.loadNode(e)},initRoot:function(){var a=this,b=a.get("map"),c=a.get("root");c||(c={}),c.isNode||(c=new d(c,b)),c.path=[c.id],c.level=0,c.children&&a.setChildren(c,c.children),a.set("root",c)},add:function(a,b,c){var d=this;return a=d._add(a,b,c),d.fire("add",{node:a,record:a,index:c}),a},_add:function(a,b,e){b=b||this.get("root");var f,g=this,h=g.get("map"),i=b.children;return a.isNode||(a=new d(a,h)),f=a.children||[],0==f.length&&null==a.leaf&&(a.leaf=!0),b&&(b.leaf=!1),a.parent=b,a.level=b.level+1,a.path=b.path.concat(a.id),e=null==e?b.children.length:e,c.Array.addAt(i,a,e),g.setChildren(a,f),a},remove:function(a){var b=a.parent||_self.get("root"),d=c.Array.indexOf(a,b.children);return c.Array.remove(b.children,a),0===b.children.length&&(b.leaf=!0),this.fire("remove",{node:a,record:a,index:d}),a.parent=null,a},setValue:function(a,b,c){var d=this;a[b]=c,d.fire("update",{node:a,record:a,field:b,value:c})},update:function(a){this.fire("update",{node:a,record:a})},getResult:function(){return this.get("root").children},setResult:function(a){var b=this,c=b.get("proxy"),d=b.get("root");c instanceof e.Memery?(b.set("data",a),b.load({id:d.id})):b.setChildren(d,a)},setChildren:function(a,b){var d=this;a.children=[],b.length&&c.each(b,function(b){d._add(b,a)})},findNode:function(a,b,d){var e=this;if(d=null==d?!0:d,!b){var f=e.get("root");return f.id===a?f:e.findNode(a,f)}var g=b.children,h=null;return c.each(g,function(b){return b.id===a?h=b:d&&(h=e.findNode(a,b)),h?!1:void 0}),h},findNodesBy:function(a,b){var d=this,e=[];return b||(b=d.get("root")),c.each(b.children,function(b){a(b)&&e.push(b),e=e.concat(d.findNodesBy(a,b))}),e},findNodeByPath:function(a){if(!a)return null;var b,c,d=this,e=d.get("root"),f=a.split(","),g=f[0];if(!g)return null;if(b=e.id==g?e:d.findNode(g,e,!1)){for(c=1;c<f.length;c+=1){var g=f[c];if(b=d.findNode(g,b,!1),!b)break}return b}},contains:function(a,b){var c=this,d=c.findNode(a.id,b);return!!d},afterProcessLoad:function(a,b){var d=this,e=d.get("pidField"),f=b.id||b[e],g=d.get("dataProperty"),h=d.findNode(f)||d.get("root");c.isArray(a)?d.setChildren(h,a):d.setChildren(h,a[g]),h.loaded=!0,d.fire("load",{node:h,params:b})},hasData:function(){return this.get("root").children&&0!==this.get("root").children.length},isLoaded:function(a){var b=this.get("root");return a!=b||b.children?this.get("url")||this.get("pidField")?a.loaded||a.leaf||a.children&&a.children.length:!0:!1},loadNode:function(a){var b,c=this,d=c.get("pidField");c.isLoaded(a)||(b={id:a.id},d&&(b[d]=a.id),c.load(b))},reloadNode:function(a){var b=this;a=a||b.get("root"),a.loaded=!1,b.loadNode(a)},loadPath:function(a){var b=this,c=a.split(","),d=c[0];b.findNodeByPath(a)||b.load({id:d,path:a})}}),b}),define("bui/data/store",["bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(a){function b(a,b){if(!(0>a)){var c=b,d=c[a];return c.splice(a,1),d}}function c(a,c){var d=BUI.Array.indexOf(a,c);d>=0&&b(d,c)}function d(a,b){return-1!==BUI.Array.indexOf(a,b)}var e=a("bui/data/proxy"),f=a("bui/data/abstractstore"),g=a("bui/data/sortable"),h=function(a){h.superclass.constructor.call(this,a)};return h.ATTRS={currentPage:{value:0},deletedRecords:{value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(a,b){return a==b}},modifiedRecords:{value:[]},newRecords:{value:[]},remoteSort:{value:!1},resultMap:{value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}},BUI.extend(h,f),BUI.mixin(h,[g]),BUI.augment(h,{add:function(a,b,c){var d=this,e=d.getCount();d.addAt(a,e,b,c)},addAt:function(a,b,d,e){var f=this;e=e||f._getDefaultMatch(),BUI.isArray(a)||(a=[a]),$.each(a,function(a,g){d&&f.contains(g,e)||(f._addRecord(g,a+b),f.get("newRecords").push(g),c(g,f.get("deletedRecords")),c(g,f.get("modifiedRecords")))})},contains:function(a,b){return-1!==this.findIndexBy(a,b)},find:function(a,b){var c=this,d=null,e=c.getResult();return $.each(e,function(c,e){return e[a]===b?(d=e,!1):void 0}),d},findAll:function(a,b){var c=this,d=[],e=c.getResult();return $.each(e,function(c,e){e[a]===b&&d.push(e)}),d},findByIndex:function(a){return this.getResult()[a]},findIndexBy:function(a,b){var c=this,d=-1,e=c.getResult();return b=b||c._getDefaultMatch(),null===a||void 0===a?-1:($.each(e,function(c,e){return b(a,e)?(d=c,!1):void 0}),d)},findNextRecord:function(a){var b=this,c=b.findIndexBy(a);return c>=0?b.findByIndex(c+1):void 0},getCount:function(){return this.getResult().length},getTotalCount:function(){var a=this,b=a.get("resultMap"),c=a.get("totalProperty");return b[c]||0},getResult:function(){var a=this,b=a.get("resultMap"),c=a.get("root");return b[c]},hasData:function(){return 0!==this.getCount()},setResult:function(a){var b=this,c=b.get("proxy");c instanceof e.Memery?(b.set("data",a),b.load({start:0})):b._setResult(a)},remove:function(a,e){var f=this;e=e||f._getDefaultMatch(),BUI.isArray(a)||(a=[a]),$.each(a,function(a,g){var a=f.findIndexBy(g,e),h=b(a,f.getResult());d(h,f.get("newRecords"))||d(h,f.get("deletedRecords"))||f.get("deletedRecords").push(h),c(h,f.get("newRecords")),c(h,f.get("modifiedRecords")),f.fire("remove",{record:h})})},sort:function(a,b){var c=this,d=c.get("remoteSort");d?(c.set("sortField",a),c.set("sortDirection",b),c.load(c.get("sortInfo"))):c._localSort(a,b)},sum:function(a,b){var c=this,d=b||c.getResult(),e=0;return BUI.each(d,function(b){var c=b[a];isNaN(c)||(e+=parseFloat(c))}),e},setValue:function(a,b,c){var e=a,f=this;e[b]=c,d(e,f.get("newRecords"))||d(e,f.get("modifiedRecords"))||f.get("modifiedRecords").push(e),f.fire("update",{record:e,field:b,value:c})},update:function(a,b,c){var e=a,f=this,c=null,g=null;b&&(c=c||f._getDefaultMatch(),g=f.findIndexBy(a,c),g>=0&&(e=f.getResult()[g])),e=BUI.mix(e,a),d(e,f.get("newRecords"))||d(e,f.get("modifiedRecords"))||f.get("modifiedRecords").push(e),f.fire("update",{record:e})},_addRecord:function(a,b){var c=this.getResult();void 0==b&&(b=c.length),c.splice(b,0,a),this.fire("add",{record:a,index:b})},_clearChanges:function(){var a=this;a.get("newRecords").splice(0),a.get("modifiedRecords").splice(0),a.get("deletedRecords").splice(0)},_filterLocal:function(a,b){var c=this,d=[];return b=b||c.getResult(),a?(BUI.each(b,function(b){a(b)&&d.push(b)}),d):b},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var a=this,b=a.get("sortInfo"),c=a.get("start"),d=a.get("pageSize"),e=a.get("pageIndex")||(d?c/d:0);return params={start:c,limit:d,pageIndex:e},a.get("remoteSort")&&BUI.mix(params,b),params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(a,b){var c=this;c._sortData(a,b),c.fire("localsort",{field:a,direction:b})},_sortData:function(a,b,c){var d=this;c=c||d.getResult(),d.sortData(a,b,c)},afterProcessLoad:function(a,b){var c=this,d=c.get("root"),e=b.start,f=b.limit,g=c.get("totalProperty");BUI.isArray(a)?c._setResult(a):c._setResult(a[d],a[g]),c.set("start",e),f&&c.set("pageIndex",e/f),c.get("remoteSort")||c._sortData(),c.fire("load",{params:b})},_setResult:function(a,b){var c=this,d=c.get("resultMap");b=b||a.length,d[c.get("root")]=a,d[c.get("totalProperty")]=b,c._clearChanges()}}),h}),function(){var a="bui/list/";define("bui/list",["bui/common",a+"list",a+"listitem",a+"simplelist",a+"listbox"],function(b){var c=b("bui/common"),d=c.namespace("List");return c.mix(d,{List:b(a+"list"),ListItem:b(a+"listitem"),SimpleList:b(a+"simplelist"),Listbox:b(a+"listbox")}),c.mix(d,{ListItemView:d.ListItem.View,SimpleListView:d.SimpleList.View}),d})}(),define("bui/list/domlist",["bui/common"],function(a){"use strict";function b(a,b){var c=b,d=c.get("itemCls"),e=c.get("itemStatusCls");return e&&e[a]?e[a]:d+"-"+a}function c(a,c){var e=a.attributes,g=c.get("itemStatusFields"),h={};return d.each(e,function(a){var b=a.nodeName;-1!==b.indexOf(f)&&(b=b.replace(f,""),h[b]=a.nodeValue)}),h.text=$(a).text(),d.each(g,function(d,e){var f=b(e,c);$(a).hasClass(f)&&(h[d]=!0)}),h}var d=a("bui/common"),e=d.Component.UIBase.Selection,f="data-",g=d.Component.UIBase.List,h=function(){};h.ATTRS={items:{}},h.prototype={clearControl:function(){var a=this,b=a.getItemContainer(),c=a.get("itemCls");b.find("."+c).remove()},addItem:function(a,b){return this._createItem(a,b)},getItems:function(){var a=this,b=a.getAllElements(),c=[];return d.each(b,function(b){c.push(a.getItemByElement(b))}),c},updateItem:function(a){var b,c=this,e=c.getItems(),f=d.Array.indexOf(a,e),g=null;return f>=0&&(g=c.findElement(a),b=c.getItemTpl(a,f),g&&$(g).html($(b).html())),g},removeItem:function(a,b){b=b||this.findElement(a),$(b).remove()},getItemContainer:function(){var a=this.get("itemContainer");return a.length?a:this.get("el")},getItemTpl:function(a,b){var c=this,e=c.get("itemTplRender"),f=c.get("itemTpl");return e?e(a,b):d.substitute(f,a)},_createItem:function(a,b){var c=this,d=c.getItemContainer(),e=c.get("itemCls"),f=c.get("dataField"),g=c.getItemTpl(a,b),h=$(g);if(void 0!==b){var i=d.find("."+e)[b];i?h.insertBefore(i):h.appendTo(d)}else h.appendTo(d);return h.addClass(e),h.data(f,a),h},getItemStatusCls:function(a){return b(a,this)},setItemStatusCls:function(a,b,c){var d=this,e=d.getItemStatusCls(a),f=c?"addClass":"removeClass";b&&$(b)[f](e)},hasStatus:function(a,b){var c=this,d=c.getItemStatusCls(a);return $(b).hasClass(d)},setItemSelected:function(a,b,c){var d=this;c=c||d.findElement(a),d.setItemStatusCls("selected",c,b)},getAllElements:function(){var a=this,b=a.get("itemCls"),c=a.get("el");return c.find("."+b)},getItemByElement:function(a){var b=this,c=b.get("dataField");return $(a).data(c)},getFirstElementByStatus:function(a){var b=this,c=b.getItemStatusCls(a),d=b.get("el");return d.find("."+c)[0]},getElementsByStatus:function(a){var b=this,c=b.getItemStatusCls(a),d=b.get("el");return d.find("."+c)},getSelectedElements:function(){var a=this,b=a.getItemStatusCls("selected"),c=a.get("el");return c.find("."+b)},findElement:function(a){var b=this,c=b.getAllElements(),e=null;return d.each(c,function(c){return b.getItemByElement(c)==a?(e=c,!1):void 0}),e},isElementSelected:function(a){var b=this,c=b.getItemStatusCls("selected");return a&&$(a).hasClass(c)}};var i=function(){};return i.ATTRS=d.merge(!0,g.ATTRS,e.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1}}}),i.PARSER={items:function(a){var b=this,e=[],f=b.get("itemCls"),g=b.get("dataField"),h=a.find("."+f);return h.length||(h=a.children(),h.addClass(f)),d.each(h,function(a){var d=c(a,b);e.push(d),$(a).data(g,d)}),e}},d.augment(i,g,e,{_uiSetItems:function(a){var b=this;(!b.get("srcNode")||b.get("rendered"))&&this.setItems(a)},__bindUI:function(){function a(a,c){var d,e=b.get("multipleSelect");d=b.isItemSelected(a,c),d?e&&b.setItemSelected(a,!1,c):(e||b.clearSelected(),b.setItemSelected(a,!0,c))}var b=this,c=b.get("selectedEvent"),d=b.get("itemCls"),e=b.get("view").getItemContainer();e.delegate("."+d,"click",function(d){if(!b.get("disabled")){var e=$(d.currentTarget),f=b.getItemByElement(e);if(!b.isItemDisabled(f,e)){var g=b.fire("itemclick",{item:f,element:e[0],domTarget:d.target});g!==!1&&"click"==c&&b.isItemSelectable(f)&&a(f,e)}}}),"click"!==c&&e.delegate("."+d,c,function(c){if(!b.get("disabled")){var d=$(c.currentTarget),e=b.getItemByElement(d);b.isItemDisabled(e,d)||b.isItemSelectable(e)&&a(e,d)}}),e.delegate("."+d,"dblclick",function(a){if(!b.get("disabled")){var c=$(a.currentTarget),d=b.getItemByElement(c);b.isItemDisabled(d,c)||b.fire("itemdblclick",{item:d,element:c[0],domTarget:a.target})}}),b.on("itemrendered itemupdated",function(a){var c=a.item,d=a.element;b._syncItemStatus(c,d)})},getValueByField:function(a,b){return a&&a[b]},_syncItemStatus:function(a,b){var c=this,e=c.get("itemStatusFields");d.each(e,function(d,e){null!=a[d]&&c.get("view").setItemStatusCls(e,b,a[d])})},getStatusValue:function(a,b){var c=this,d=c.get("itemStatusFields"),e=d[b];return a[e]},getCount:function(){var a=this.getItems();return a?a.length:0},getStatusField:function(a){var b=this,c=b.get("itemStatusFields");return c[a]},setStatusValue:function(a,b,c){var d=this,e=d.get("itemStatusFields"),f=e[b];f&&(a[f]=c)},getItemText:function(a){var b=this,c=b.get("textGetter");return a?c?c(a):$(b.findElement(a)).text():""},removeItem:function(a){var b,c=this,e=c.get("items"),f=c.findElement(a);b=d.Array.indexOf(a,e),-1!==b&&e.splice(b,1),c.get("view").removeItem(a,f),c.fire("itemremoved",{item:a,domTarget:$(f)[0],element:f})},addItemAt:function(a,b){var c=this,d=c.get("items");return void 0===b&&(b=d.length),d.splice(b,0,a),c.addItemToView(a,b),a},addItemToView:function(a,b){var c=this,d=c.get("view").addItem(a,b);
return c.fire("itemrendered",{item:a,domTarget:$(d)[0],element:d}),d},updateItem:function(a){var b=this,c=b.get("view").updateItem(a);b.fire("itemupdated",{item:a,domTarget:$(c)[0],element:c})},setItems:function(a){var b=this;a!=b.getItems()&&b.setInternal("items",a),b.clearControl(),b.fire("beforeitemsshow"),d.each(a,function(a,c){b.addItemToView(a,c)}),b.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(a){return this.get("view").getItemByElement(a)},getSelected:function(){var a=this,b=a.get("view").getFirstElementByStatus("selected");return a.getItemByElement(b)||null},getItemsByStatus:function(a){var b=this,c=b.get("view").getElementsByStatus(a),e=[];return d.each(c,function(a){e.push(b.getItemByElement(a))}),e},findElement:function(a){var b=this;return d.isString(a)&&(a=b.getItem(a)),this.get("view").findElement(a)},findItemByField:function(a,b){var c=this,e=c.get("items"),f=null;return d.each(e,function(c){return c[a]===b?(f=c,!1):void 0}),f},setItemSelectedStatus:function(a,b,c){var d=this;c=c||d.findElement(a),d.setItemStatus(a,"selected",b,c)},setAllSelection:function(){var a=this,b=a.getItems();a.setSelection(b)},isItemSelected:function(a,b){var c=this;return b=b||c.findElement(a),c.get("view").isElementSelected(b)},isItemDisabled:function(a,b){return this.hasStatus(a,"disabled",b)},setItemDisabled:function(a,b){var c=this;c.setItemStatus(a,"disabled",b)},getSelection:function(){var a=this,b=a.get("view").getSelectedElements(),c=[];return d.each(b,function(b){c.push(a.getItemByElement(b))}),c},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(a,b,c){if(!a)return!1;var d=this;return d.getStatusField(b),c=c||d.findElement(a),d.get("view").hasStatus(b,c)},setItemStatus:function(a,b,c,d){var e=this;a&&(d=d||e.findElement(a)),e.isItemDisabled(a,d)&&"disabled"!==b||(a&&("disabled"===b&&c&&e.clearItemStatus(a),e.setStatusValue(a,b,c),e.get("view").setItemStatusCls(b,d,c),e.fire("itemstatuschange",{item:a,status:b,value:c,element:d})),"selected"===b&&e.afterSelected(a,c,d))},clearItemStatus:function(a,b,c){var e=this,f=e.get("itemStatusFields");c=c||e.findElement(a),b?e.setItemStatus(a,b,!1,c):(d.each(f,function(b,d){e.setItemStatus(a,d,!1,c)}),f.selected||e.setItemSelected(a,!1),e.setItemStatus(a,"hover",!1))}}),i.View=h,i}),define("bui/list/keynav",function(){"use strict";var a=function(){};return a.ATTRS={highlightedStatus:{value:"hover"}},BUI.augment(a,{setHighlighted:function(a,b){if(!this.hasStatus(a,"hover",b)){var c=this,d=c.get("highlightedStatus"),e=c._getHighLightedElement(),f=e?c.getItemByElement(e):null;f!==a&&(f&&this.setItemStatus(f,d,!1,e),this.setItemStatus(a,d,!0,b))}},_getHighLightedElement:function(){var a=this,b=a.get("highlightedStatus"),c=a.get("view").getFirstElementByStatus(b);return c},getHighlighted:function(){var a=this,b=a.get("highlightedStatus"),c=a.get("view").getFirstElementByStatus(b);return a.getItemByElement(c)||null},getColumnCount:function(){var a=this,b=a.getFirstItem(),c=a.findElement(b),d=$(c);return c?parseInt(d.parent().width()/d.outerWidth(),10):1},getRowCount:function(a){var b=this;return a=a||b.getColumnCount(),(this.getCount()+a-1)/a},_getNextItem:function(a,b,c){var d,e=this,f=e._getCurrentIndex(),g=e.getCount(),h=a?1:-1;return-1===f?a?e.getFirstItem():e.getLastItem():(a||(b*=h),d=(f+b+c)%c,d>g-1&&(a?d-=g-1:d+=b),e.getItemAt(d))},_getLeftItem:function(){var a=this,b=a.getCount(),c=a.getColumnCount();return!b||1>=c?null:a._getNextItem(!1,1,b)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var a=this,b=a._getCurrentItem();return this.indexOfItem(b)},_getRightItem:function(){var a=this,b=a.getCount(),c=a.getColumnCount();return!b||1>=c?null:this._getNextItem(!0,1,b)},_getDownItem:function(){var a=this,b=a.getColumnCount(),c=a.getRowCount(b);return 1>=c?null:this._getNextItem(!0,b,b*c)},_getUpperItem:function(){var a=this,b=a.getColumnCount(),c=a.getRowCount(b);return 1>=c?null:this._getNextItem(!1,b,b*c)},handleNavUp:function(){var a=this,b=a._getUpperItem();a.setHighlighted(b)},handleNavDown:function(){this.setHighlighted(this._getDownItem())},handleNavLeft:function(){this.setHighlighted(this._getLeftItem())},handleNavRight:function(){this.setHighlighted(this._getRightItem())},handleNavEnter:function(){var a,b=this,c=b._getCurrentItem();c&&(a=b.findElement(c),$(a).trigger("click"))},handleNavEsc:function(){this.setHighlighted(null)},handleNavTab:function(){this.setHighlighted(this._getRightItem())}}),a}),define("bui/list/simplelist",["bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable"],function(a){var b=a("bui/common"),c=b.Component.UIBase,d=a("bui/list/domlist"),e=a("bui/list/keynav"),f=a("bui/list/sortable"),g=b.prefix+"list-item",h=b.Component.View.extend([d.View],{setElementHover:function(a,b){var c=this;c.setItemStatusCls("hover",a,b)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),i=b.Component.Controller.extend([d,c.Bindable,e,f],{bindUI:function(){var a=this,b=a.get("itemCls"),c=a.get("view").getItemContainer();c.delegate("."+b,"mouseover",function(b){if(!a.get("disabled")){var c=b.currentTarget,d=a.getItemByElement(c);a.isItemDisabled(b.item,b.currentTarget)||("hover"===a.get("highlightedStatus")?a.setHighlighted(d,c):a.setItemStatus(d,"hover",!0,c))}}).delegate("."+b,"mouseout",function(b){if(!a.get("disabled")){var c=$(b.currentTarget);a.get("view").setElementHover(c,!1)}})},onAdd:function(a){var b=this,c=b.get("store"),d=a.record;0==b.getCount()?b.setItems(c.getResult()):b.addItemToView(d,a.index)},onRemove:function(a){var b=this,c=a.record;b.removeItem(c)},onUpdate:function(a){this.updateItem(a.record)},onLocalSort:function(a){this.sort(a.field,a.direction)},onLoad:function(){var a=this,b=a.get("store"),c=b.getResult();a.set("items",c)}},{ATTRS:{items:{view:!0,value:[]},itemCls:{view:!0,value:g},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+g+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:h}}},{xclass:"simple-list",prority:0});return i.View=h,i}),define("bui/list/listbox",["bui/list/simplelist"],function(a){var b=a("bui/list/simplelist"),c=b.extend({bindUI:function(){var a=this;a.on("selectedchange",function(a){var b=a.item,c=$(a.domTarget),d=c.find("input");b&&d.attr("checked",a.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});return c}),define("bui/list/listitem",function(){var a=BUI.Component,b=a.UIBase,c=a.View.extend([b.ListItemView],{}),d=a.Controller.extend([b.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:c},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});return d.View=c,d}),define("bui/list/list",function(){var a=BUI.Component,b=a.UIBase,c=a.Controller.extend([b.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});return c}),define("bui/picker",["bui/common","bui/picker/picker","bui/picker/listpicker"],function(a){var b=a("bui/common"),c=b.namespace("Picker");return b.mix(c,{Picker:a("bui/picker/picker"),ListPicker:a("bui/picker/listpicker")}),c}),define("bui/picker/picker",["bui/overlay"],function(a){var b=a("bui/overlay").Overlay,c=b.extend({bindUI:function(){var a=this,b=(a.get("hideEvent"),$(a.get("trigger")));b.on(a.get("triggerEvent"),function(){if(a.get("isInit")||a._initControl(),a.get("autoSetValue")){var b=a.get("valueField")||a.get("textField")||this,c=$(b).val();a.setSelectedValue(c)}})},_initControl:function(){var a=this;if(!a.get("isInit")){if(!a.get("innerControl")){var b=a.createControl();a.get("children").push(b)}a.initControlEvent(),a.set("isInit",!0)}},createControl:function(){},initControlEvent:function(){var a=this,b=a.get("innerControl"),c=$(a.get("trigger")),d=a.get("hideEvent");b.on(a.get("changeEvent"),function(b){var d=a.get("curTrigger"),e=a.get("textField")||d||c,f=a.get("valueField"),g=a.getSelectedValue(),h=!1;if(e){var i=a.getSelectedText(),j=$(e).val();i!=j&&($(e).val(i),h=!0,$(e).trigger("change"))}if(f){var k=$(f).val();f!=k&&($(f).val(g),h=!0,$(f).trigger("change"))}h&&a.onChange(i,g,b)}),d&&b.on(a.get("hideEvent"),function(){var b=a.get("curTrigger");try{b&&b.focus()}catch(c){BUI.log(c)}a.hide()})},setSelectedValue:function(){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(a,b){var c=this,d=c.get("curTrigger");c.fire("selectedchange",{value:b,text:a,curTrigger:d})},handleNavEsc:function(){this.hide()},_uiSetValueField:function(a){var b=this;a&&b.setSelectedValue($(a).val())},_getTextField:function(){var a=this;return a.get("textField")||a.get("curTrigger")}},{ATTRS:{innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}}},{xclass:"picker"});return c}),define("bui/picker/listpicker",["bui/picker/picker","bui/list"],function(a){var b=(a("bui/list"),a("bui/picker/picker")),c=b.extend({initializer:function(){var a=this,b=a.get("children"),c=a.get("list");c||b.push({})},setSelectedValue:function(a){a=a?a.toString():"",this.get("isInit")||this._initControl();var b=this,c=b.get("list"),d=b.getSelectedValue();a!==d&&c.getCount()&&(c.get("multipleSelect")&&c.clearSelection(),c.setSelectionByField(a.split(",")))},onChange:function(a,b,c){var d=this,e=d.get("curTrigger");d.fire("selectedchange",{value:b,text:a,curTrigger:e,item:c.item})},getSelectedValue:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});return c}),function(){var a="bui/form/";define("bui/form",["bui/common",a+"fieldcontainer",a+"form",a+"row",a+"fieldgroup",a+"horizontal",a+"rules",a+"field",a+"fieldgroup"],function(b){var c=b("bui/common"),d=c.namespace("Form"),e=b(a+"tips");return c.mix(d,{Tips:e,TipItem:e.Item,FieldContainer:b(a+"fieldcontainer"),Form:b(a+"form"),Row:b(a+"row"),Group:b(a+"fieldgroup"),HForm:b(a+"horizontal"),Rules:b(a+"rules"),Field:b(a+"field"),FieldGroup:b(a+"fieldgroup")}),d})}(),define("bui/form/tips",["bui/common","bui/overlay"],function(a){var b=a("bui/common"),c=b.prefix,d=a("bui/overlay").Overlay,e="data-tip",f=c+"form-tip-container",g=d.extend({initializer:function(){var a=this,b=a.get("render");if(!b){var c=$(a.get("trigger")).parent();a.set("render",c)}},renderUI:function(){var a=this;a.resetVisible()},resetVisible:function(){var a=this,b=$(a.get("trigger"));b.val()?a.set("visible",!1):(a.set("align",{node:$(a.get("trigger")),points:["cl","cl"]}),a.set("visible",!0))},bindUI:function(){var a=this,b=$(a.get("trigger"));a.get("el").on("click",function(){a.hide(),b.focus()}),b.on("click focus",function(){a.hide()}),b.on("blur",function(){a.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),h=function(a){return this.constructor!==h?new h(a):(h.superclass.constructor.call(this,a),this._init(),void 0)};return h.ATTRS={form:{},items:{value:[]}},b.extend(h,b.Base),b.augment(h,{_init:function(){var a=this,c=$(a.get("form"));c.length&&(b.each($.makeArray(c[0].elements),function(b){var c=$(b).attr(e);c&&a._initFormElement(b,$.parseJSON(c))}),c.addClass(f))},_initFormElement:function(a,b){b&&(b.trigger=a);var c=this,d=c.get("items"),e=new g(b);d.push(e)},getItem:function(a){var c=this,d=c.get("items"),e=null;return b.each(d,function(b){return $(b.get("trigger")).attr("name")===a?(e=b,!1):void 0}),e},resetVisible:function(){var a=this,c=a.get("items");b.each(c,function(a){a.resetVisible()})},render:function(){var a=this,c=a.get("items");b.each(c,function(a){a.render()})},destroy:function(){var a=this,c=a.get(c);b.each(c,function(a){a.destroy()})}}),h.Item=g,h}),define("bui/form/basefield",["bui/common","bui/form/tips","bui/form/valid","bui/form/remote"],function(a){var b=a("bui/common"),c=b.Component,d=a("bui/form/tips").Item,e=a("bui/form/valid"),f=a("bui/form/remote"),g=b.prefix+"form-field-error",h=c.View.extend([f.View,e.View],{renderUI:function(){var a=this,b=a.get("control");if(b)a.set("controlContainer",b.parent());else{var c=a.get("controlTpl"),d=a.getControlContainer();if(c){var b=$(c).appendTo(d);a.set("control",b)}}},clearErrors:function(){var a=this,b=a.get("msgEl");b&&(b.remove(),a.set("msgEl",null)),a.get("el").removeClass(g)},showError:function(a,c){var d=this,e=d.get("control"),f=b.substitute(c,{error:a}),h=$(f);h.appendTo(e.parent()),d.set("msgEl",h),d.get("el").addClass(g)},getControlContainer:function(){var a=this,c=a.get("el"),d=a.get("controlContainer");return d&&b.isString(d)&&(d=c.find(d)),d&&d.length?d:c},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(a){var b=this;b.get("control").attr("name",a)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),i=c.Controller.extend([f,e],{initializer:function(){var a=this;a.on("afterRenderUI",function(){var b=a.get("tip");b&&(b.trigger=a.getTipTigger(),b.autoRender=!0,b=new d(b),a.set("tip",b))})},bindUI:function(){var a=this,b=a.get("validEvent"),c=a.get("changeEvent"),d=a.get("firstValidEvent"),e=a.getInnerControl();e.is("select")&&(b="change"),e.on(b,function(){var b=a.getControlValue(e);a.validControl(b)}),d&&e.on(d,function(){if(!a.get("hasValid")){var b=a.getControlValue(e);a.validControl(b)}}),a.on(c,function(){a.onValid()}),a.on("remotecomplete",function(b){a._setError(b.error)})},onValid:function(){var a=this,b=a.getControlValue();b=a.parseValue(b),a.isCurrentValue(b)||(a.setInternal("value",b),a.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(a){return a==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(a){this.set("error",a),this.showErrors()},getControlValue:function(a){var b=this;return a=a||b.getInnerControl(),a.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var a=this,b={};return b[a.get("name")]=a.getControlValue(),b},setControlValue:function(a){var b=this,c=b.getInnerControl();c.val(a)},parseValue:function(a){return a},valid:function(){var a=this;a.validControl()},validControl:function(a){var b,c=this;return a=a||c.getControlValue(),preError=c.get("error"),b=c.getValidError(a),c.setInternal("hasValid",!0),b?(c._setError(b),c.fire("error",{msg:b,value:a}),preError!==b&&c.fire("validchange",{valid:!1})):(c._clearError(),c.fire("valid"),preError&&c.fire("validchange",{valid:!0})),!b},focus:function(){this.getInnerControl().focus()},change:function(){var a=this.getInnerControl();a.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var a=this;return a.get("hasValid")||a.validControl(),!a.get("error")},getError:function(){return this.get("error")},getErrors:function(){var a=this.getError();return a?[a]:[]},clearErrors:function(a){var b=this;b._clearError(),a&&b.getControlValue()!=b.get("value")&&b.setControlValue(b.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var a=this,b=a.get("tip");b&&b.destroy&&b.destroy()},setInnerWidth:function(a){var b=this,c=b.getInnerControl(),d=c.outerWidth()-c.width();c.width(a-d)},_resetTip:function(){var a=this,b=a.get("tip");b&&b.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(a){var b=this;b.setControlValue(a),b.get("rendered")&&(b.validControl(),b.onChange()),b._resetTip()},_uiSetDisabled:function(a){var c=this,d=c.getInnerControl(),e=c.get("children");d.attr("disabled",a),c.get("rendered")&&(a&&c.clearErrors(),a||c.valid()),b.each(e,function(b){b.set("disabled",a)})},_uiSetWidth:function(a){var b=this;null!=a&&b.get("forceFit")&&b.setInnerWidth(a)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:h}},PARSER:{control:function(a){var b=a.find("input,select,textarea");return b.length?b:a},disabled:function(a){return!!a.attr("disabled")},value:function(a){var b=this,c="select,input,textarea",d=b.get("value");return d||(a.is(c)?(d=a.val(),!d&&a.is("select")&&(d=a.attr("value"))):d=a.find(c).val()),d},name:function(a){var b=this,c="select,input,textarea",d=b.get("name");return d||(d=a.is(c)?a.attr("name"):a.find(c).attr("name")),d}}},{xclass:"form-field"});return i.View=h,i}),define("bui/form/textfield",["bui/form/basefield"],function(a){var b=a("bui/form/basefield"),c=b.extend({},{xclass:"form-field-text"});return c}),define("bui/form/numberfield",["bui/form/basefield"],function(a){var b=a("bui/form/basefield"),c=b.extend({parseValue:function(a){if(""==a||null==a)return null;if(BUI.isNumber(a))return a;var b=this,c=b.get("allowDecimals");return a=a.replace(/\,/g,""),c?parseFloat(parseFloat(a).toFixed(b.get("decimalPrecision"))):parseInt(a,10)},_uiSetMax:function(a){this.addRule("max",a)},_uiSetMin:function(a){this.addRule("min",a)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});return c}),define("bui/form/hiddenfield",["bui/form/basefield"],function(a){var b=a("bui/form/basefield"),c=b.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});return c}),define("bui/form/readonlyfield",["bui/form/basefield"],function(a){var b=a("bui/form/basefield"),c=b.extend({},{ATTRS:{controlTpl:{value:'<input type="text" readonly="readonly"/>'}}},{xclass:"form-field-readonly"});return c}),define("bui/form/selectfield",["bui/common","bui/form/basefield"],function(a){function b(a,b,e){a.children().remove();var f=e.get("emptyText");f&&e.get("showBlank")&&c("",f,a),d.each(b,function(b){c(b.value,b.text,a)})}function c(a,b,c){var d='<option value="'+a+'">'+b+"</option>";$(d).appendTo(c)}var d=a("bui/common"),e=a("bui/form/basefield"),f=e.extend({renderUI:function(){var a=this,b=a.getInnerControl(),c=a.get("select");a.get("srcNode")&&b.is("select")||$.isPlainObject(c)&&a._initSelect(c)},_initSelect:function(a){var b=this;b.get("items"),d.use("bui/select",function(c){a.render=b.getControlContainer(),a.valueField=b.getInnerControl(),a.autoRender=!0,a=new c.Select(a),b.set("select",a),b.set("isCreate",!0),b.get("children").push(a),a.on("change",function(){var c=a.getSelectedValue();b.set("value",c)})})},setItems:function(a){var c=this,e=c.get("select");if($.isPlainObject(a)){var f=[];d.each(a,function(a,b){f.push({value:b,text:a})}),a=f}var g=c.getInnerControl();g.is("select")&&(b(g,a,c),c.setControlValue(c.get("value")),c.getControlValue()||c.setInternal("value","")),e&&(e.set?e.set("items",a):e.items=a)},setControlValue:function(a){var b=this,c=b.get("select"),d=b.getInnerControl();d.val(a),c&&c.set&&c.getSelectedValue()!==a&&c.setSelectedValue(a)},getSelectedText:function(){var a=this,b=a.get("select"),c=a.getInnerControl();if(c.is("select")){var d=c[0],e=d.options[d.selectedIndex];return e?e.text:""}return b.getSelectedText()},getTipTigger:function(){var a=this,b=a.get("select");return b&&b.rendered?b.get("el").find("input"):a.get("el")},_uiSetItems:function(a){a&&this.setItems(a)},setInnerWidth:function(a){var b=this,c=b.getInnerControl(),d=b.get("select"),e=c.outerWidth()-c.width();c.width(a-e),d&&d.set&&d.set("width",a)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{value:{}}},PARSER:{emptyText:function(a){if(!this.get("showBlank"))return"";var b=a.find("option"),c=this.get("emptyText");return b.length&&(c=$(b[0]).text()),c}}},{xclass:"form-field-select"});return f}),define("bui/form/datefield",["bui/common","bui/form/basefield","bui/calendar"],function(a){var b=a("bui/common"),c=a("bui/form/basefield"),d=b.Date,e=a("bui/calendar").DatePicker,f=c.extend({renderUI:function(){var a=this,b=a.get("datePicker");$.isPlainObject(b)&&(b.trigger=a.getInnerControl(),b.autoRender=!0,b=new e(b),a.set("datePicker",b),a.set("isCreatePicker",!0),a.get("children").push(b)),b.get("showTime")&&a.getInnerControl().addClass("calendar-time")},bindUI:function(){var a=this;a.get("datePicker")},setControlValue:function(a){var c=this,e=c.getInnerControl();b.isDate(a)&&(a=d.format(a,c._getFormatMask())),e.val(a)},_getFormatMask:function(){var a=this,b=a.get("datePicker");return b.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(a){return b.isNumber(a)?new Date(a):d.parse(a)},isCurrentValue:function(a){return d.isEquals(a,this.get("value"))},_uiSetMax:function(a){this.addRule("max",a);var b=this,c=b.get("datePicker");c&&c.set&&c.set("maxDate",a)},_uiSetMin:function(a){this.addRule("min",a);var b=this,c=b.get("datePicker");c&&c.set&&c.set("minDate",a)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(a){return b.isNumber(a)?new Date(a):a}},datePicker:{value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(a){return a.hasClass("calendar-time")?{showTime:!0}:{}}}},{xclass:"form-field-date"});return f}),define("bui/form/checkfield",["bui/form/basefield"],function(a){var b=a("bui/form/basefield"),c=b.extend({onValid:function(){var a=this,b=a._getControlChecked();a.setInternal("checked",b),a.fire("change"),b?a.fire("checked"):a.fire("unchecked")},_setControlChecked:function(a){var b=this,c=b.getInnerControl();c.attr("checked",!!a)},_getControlChecked:function(){var a=this,b=a.getInnerControl();return!!b.attr("checked")},_uiSetValue:function(){},_uiSetWidth:function(){},_uiSetChecked:function(a){var b=this;b._setControlChecked(a),b.get("rendered")&&b.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(a){return!!a.attr("checked")}}},{xclass:"form-check-field"});return c}),define("bui/form/checkboxfield",["bui/form/checkfield"],function(a){var b=a("bui/form/checkfield"),c=b.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});return c}),define("bui/form/radiofield",["bui/form/checkfield"],function(a){var b=a("bui/form/checkfield"),c=b.extend({bindUI:function(){var a=this,b=a.get("parent"),c=a.get("name");b&&a.getInnerControl().on("click",function(){var d=b.getFields(c);BUI.each(d,function(b){b!=a&&b.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});return c}),define("bui/form/plainfield",["bui/form/basefield"],function(a){var b=a("bui/form/basefield"),c=b.View.extend({_uiSetValue:function(a){var b,c=this,d=c.get("textEl"),e=c.getControlContainer(),f=c.get("renderer"),g=f?f(a):a,h=c.get("width"),i=0;d&&d.remove(),g=g||"&nbsp;",b=BUI.substitute(c.get("textTpl"),{text:g}),d=$(b).appendTo(e),i=d.outerWidth()-d.width(),d.width(h-i),c.set("textEl",d)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),d=b.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(a){return a}},tpl:{value:""},xview:{value:c}}},{xclass:"form-field-plain"});return d}),function(){var a="bui/form/";define(a+"field",["bui/common",a+"textfield",a+"datefield",a+"selectfield",a+"hiddenfield",a+"numberfield",a+"checkfield",a+"radiofield",a+"checkboxfield",a+"plainfield",a+"listfield",a+"checklistfield",a+"radiolistfield"],function(b){var c=b("bui/common"),d=b(a+"basefield");return c.mix(d,{Text:b(a+"textfield"),Date:b(a+"datefield"),Select:b(a+"selectfield"),Hidden:b(a+"hiddenfield"),Number:b(a+"numberfield"),Check:b(a+"checkfield"),Radio:b(a+"radiofield"),Checkbox:b(a+"checkboxfield"),Plain:b(a+"plainfield"),List:b(a+"listfield"),Uploader:b(a+"uploaderfield"),CheckList:b(a+"checklistfield"),RadioList:b(a+"radiolistfield")}),d})}(),define("bui/form/valid",["bui/common","bui/form/rules"],function(a){var b=a("bui/common"),c=a("bui/form/rules"),d=function(){};d.prototype={getErrorsContainer:function(){var a=this,c=a.get("errorContainer");return c?b.isString(c)?a.get("el").find(c):c:a.getContentElement()},showErrors:function(a){var c=this,d=c.getErrorsContainer(),e=c.get("errorTpl");return c.clearErrors(),c.get("showError")?c.get("showOneError")?(a&&a.length&&c.showError(a[0],e,d),void 0):(b.each(a,function(a){a&&c.showError(a,e,d)}),void 0):void 0},showError:function(){},clearErrors:function(){}};var e=function(){};return e.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{value:{}},messages:{value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{}},e.prototype={__bindUI:function(){var a=this;a.on("afterDisabledChange",function(b){var c=b.newVal;c?a.clearErrors(!1):a.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(a,b){var d=this,e=d._getValidMessages(),f=null;for(var g in a)if(a.hasOwnProperty(g)){var h=a[g];if(f=c.valid(g,b,h,e[g],d))break}return f},_getValidMessages:function(){var a=this,c=a.get("defaultMessages"),d=a.get("messages");return b.merge(c,d)},getValidError:function(a){var b=this,c=b.get("validator"),d=null;return d=b.validRules(b.get("defaultRules"),a)||b.validRules(b.get("rules"),a),d||(b.parseValue&&(a=b.parseValue(a)),d=c?c.call(this,a):""),d},getErrors:function(){},showErrors:function(a){var b=this,a=a||b.getErrors();b.get("view").showErrors(a)},clearErrors:function(a){a=null==a?!0:a;var c=this,d=c.get("children");a&&b.each(d,function(a){a.clearErrors&&a.clearErrors()}),c.set("error",null),c.get("view").clearErrors()},addRule:function(a,b,c){var d=this,e=d.get("rules"),f=d.get("messages");e[a]=b,c&&(f[a]=c)},addRules:function(a,c){var d=this;b.each(a,function(a,b){var e=c?c[b]:null;d.addRule(b,a,e)})},removeRule:function(a){var b=this,c=b.get("rules");delete c[a]},clearRules:function(){var a=this;a.set("rules",{})}},e.View=d,e}),define("bui/form/groupvalid",["bui/form/valid"],function(a){function b(){}function c(){}var d="x-form-error",e=a("bui/form/valid");return BUI.augment(b,e.View,{showError:function(a,b,c){var e=BUI.substitute(b,{error:a}),f=$(e);f.appendTo(c),f.addClass(d)},clearErrors:function(){var a=this,b=a.getErrorsContainer();b.children("."+d).remove()}}),c.ATTRS=ATTRS=BUI.merge(!0,e.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(c,e,{__bindUI:function(){var a=this,b="validchange change";a.on(b,function(b){var c=b.target;if(c!=this&&a.get("showError")){var d=a.isChildrenValid();d&&(a.validControl(a.getRecord()),d=a.isSelfValid()),d?a.clearErrors():a.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var a=this,b=a.isChildrenValid();return b&&a.isSelfValid()},valid:function(){var a=this,b=a.get("children");a.get("disabled")||BUI.each(b,function(a){a.get("disabled")||a.valid()})},isChildrenValid:function(){var a=this,b=a.get("children"),c=!0;return BUI.each(b,function(a){return a.get("disabled")||a.isValid()?void 0:(c=!1,!1)}),c},isSelfValid:function(){return!this.get("error")},validControl:function(a){var b=this,c=b.getValidError(a);b.set("error",c)},getErrors:function(){var a=this,b=a.get("children"),c=a.get("showChildError"),d=null,e=[];return c&&BUI.each(b,function(a){a.getErrors&&(e=e.concat(a.getErrors()))}),a.isChildrenValid()&&(d=a.get("error"),d&&e.push(d)),e},_uiSetErrorTpl:function(a){var b=this,c=b.get("children");BUI.each(c,function(b){b.set("errorTpl",a)})}}),c.View=b,c}),define("bui/form/fieldcontainer",["bui/common","bui/form/field","bui/form/groupvalid"],function(a){function b(a){return a.is(k)}function c(a,e){if(a!=e){if(b(a))return[a];var f=a.attr("class");if(f&&(-1!==f.indexOf(j)||-1!==f.indexOf(i)))return[a]}var g=[],h=a.children();return d.each(h,function(a){g=g.concat(c($(a),e))}),g}var d=a("bui/common"),e=a("bui/form/field"),f=a("bui/form/groupvalid"),g=d.prefix,h="form-field",i=g+h,j=g+"form-group",k="input,select,textarea",l=d.Component.View.extend([f.View]),m=d.Component.Controller.extend([f],{syncUI:function(){var a=this,b=a.getFields(),c=a.get("validators");d.each(b,function(a){var b=a.get("name");c[b]&&a.set("validator",c[b])}),d.each(c,function(b,c){if(0==c.indexOf("#")){var d=c.replace("#",""),e=a.getChild(d,!0);e&&e.set("validator",b)}})},getDecorateElments:function(){var a=this,b=a.get("el"),d=c(b,b);return d},findXClassByNode:function(a,c){return"checkbox"===a.attr("type")?h+"-checkbox":"radio"===a.attr("type")?h+"-radio":"number"===a.attr("type")?h+"-number":a.hasClass("calendar")?h+"-date":"SELECT"==a[0].tagName?h+"-select":b(a)?h:d.Component.Controller.prototype.findXClassByNode.call(this,a,c)},getRecord:function(){var a=this,b={},c=a.getFields();return d.each(c,function(c){var e=c.get("name"),f=a._getFieldValue(c);if(b[e]){if(d.isArray(b[e])&&null!=f)b[e].push(f);else if(null!=f){var g=[b[e]];g.push(f),b[e]=g}}else b[e]=f}),b},getFields:function(a){var b=this,c=[],f=b.get("children");return d.each(f,function(b){b instanceof e?a&&b.get("name")!=a||c.push(b):b.getFields&&(c=c.concat(b.getFields(a)))}),c},getField:function(a){var b=this,c=b.getFields(),e=null;return d.each(c,function(b){return b.get("name")===a?(e=b,!1):void 0}),e},getFieldAt:function(a){return this.getFields()[a]},setFieldValue:function(a,b){var c=this,e=c.getFields(a);d.each(e,function(a){c._setFieldValue(a,b)})},_setFieldValue:function(a,b){if(!a.get("disabled"))if(a instanceof e.Check){var c=a.get("value");b&&(c===b||d.isArray(b)&&d.Array.contains(c,b))?a.set("checked",!0):a.set("checked",!1)}else null==b&&(b=""),a.set("value",b)},getFieldValue:function(a){var b=this,c=b.getFields(a),e=[];return d.each(c,function(a){var c=b._getFieldValue(a);c&&e.push(c)}),0===e.length?null:1===e.length?e[0]:e},_getFieldValue:function(a){return a instanceof e.Check&&!a.get("checked")?null:a.get("value")},clearFields:function(){this.clearErrors(),this.setRecord({})},setRecord:function(a){var b=this,c=b.getFields();d.each(c,function(c){var d=c.get("name");b._setFieldValue(c,a[d])})},updateRecord:function(a){var b=this,c=b.getFields();d.each(c,function(c){var d=c.get("name");a.hasOwnProperty(d)&&b._setFieldValue(c,a[d])})},focus:function(){var a=this,b=a.getFields(),c=b[0];c&&c.focus()},_uiSetDisabled:function(a){var b=this,c=b.get("children");d.each(c,function(b){b.set("disabled",a)})}},{ATTRS:{record:{setter:function(a){this.setRecord(a)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:l}}},{xclass:"form-field-container"});return m.View=l,m
}),define("bui/form/group/base",["bui/common","bui/form/fieldcontainer"],function(a){var b=(a("bui/common"),a("bui/form/fieldcontainer")),c=b.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});return c}),define("bui/form/group/range",["bui/form/group/base"],function(a){function b(a,b,c){var d=a.get("allowEqual");return d?b>=c:b>c}var c=a("bui/form/group/base"),d=c.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:!0},validator:{value:function(){for(var a=this,c=a.getFields(),d=!0,e=1;e<c.length;e++){var f,g,h=c[e],i=c[e-1];if(h&&i&&(f=h.get("value"),g=i.get("value"),!b(a,f,g))){d=!1;break}}return d?null:a.get("rangeText")}}}},{xclass:"form-group-range"});return d}),define("bui/form/group/check",["bui/form/group/base"],function(a){function b(a){var b=a.getFieldAt(0);return b?b.get("name"):""}var c=a("bui/form/group/base"),d=c.extend({bindUI:function(){var a=this;a.on("change",function(){var c=b(a),d=a.get("range"),e=a.getRecord(),f=e[c],g=d[1];f&&f.length>=g?a._setFieldsEnable(c,!1):a._setFieldsEnable(c,!0)})},_setFieldsEnable:function(a,b){var c=this,d=c.getFields(a);BUI.each(d,function(a){b?a.enable():a.get("checked")||a.disable()})},_uiSetRange:function(a){this.addRule("checkRange",a)}},{ATTRS:{range:{setter:function(a){return(BUI.isString(a)||BUI.isNumber(a))&&(a=[parseInt(a,10)]),a}}}},{xclass:"form-group-check"});return d}),define("bui/form/group/select",["bui/form/group/base","bui/data"],function(a){function b(a){var b=[];return BUI.each(a,function(a){b.push({text:a.text,value:a.id})}),b}var c=a("bui/form/group/base"),d=a("bui/data"),e=BUI.Component.UIBase.Bindable,f=c.extend([e],{initializer:function(){var a=this,b=a.get("url"),c=a.get("store")||a._getStore();c.isStore||(c.autoLoad=!0,b&&(c.url=b),c=new d.TreeStore(c),a.set("store",c))},bindUI:function(){var a=this;a.on("change",function(b){var c=b.target;if(c!=a){var d=c,e=d.get("value"),f=a._getFieldIndex(d)+1;a._valueChange(e,f)}})},onLoad:function(a){var b=this,c=a?a.node:b.get("store").get("root");b._setFieldItems(c.level,c.children)},_getStore:function(){var a=this,b=a.get("type");return b&&g[b]?g[b]:{}},_valueChange:function(a,b){var c=this,d=c.get("store");if(a){var e=d.findNode(a);if(!e)return;d.isLoaded(e)?c._setFieldItems(b,e.children):d.loadNode(e)}else c._setFieldItems(b,[])},_setFieldItems:function(a,c){var d=this,e=d.getFieldAt(a),f=b(c);e&&(e.setItems(f),d._valueChange(e.get("value"),a+1))},_getFieldIndex:function(a){var b=this,c=b.getFields();return BUI.Array.indexOf(a,c)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),g={};return f.addType=function(a,b){g[a]=b},f.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),f}),define("bui/form/fieldgroup",["bui/common","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select"],function(a){var b=a("bui/common"),c=a("bui/form/group/base");return b.mix(c,{Range:a("bui/form/group/range"),Check:a("bui/form/group/check"),Select:a("bui/form/group/select")}),c}),define("bui/form/form",["bui/common","bui/toolbar","bui/form/fieldcontainer"],function(a){var b=a("bui/common"),c=a("bui/toolbar").Bar,d={NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"},e=a("bui/form/fieldcontainer");b.Component;var f=e.View.extend({_uiSetMethod:function(a){this.get("el").attr("method",a)},_uiSetAction:function(a){this.get("el").attr("action",a)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"}),g=e.extend({renderUI:function(){var a,d=this,e=d.get("buttonBar");$.isPlainObject(e)&&d.get("buttons")&&(a=b.merge(d.getDefaultButtonBarCfg(),e),e=new c(a),d.set("buttonBar",e)),d._initSubmitMask()},bindUI:function(){var a=this,b=a.get("el");b.on("submit",function(b){return a.valid(),a.isValid()&&a.onBeforeSubmit()!==!1?(a.isValid()&&a.get("submitType")===d.AJAX&&(b.preventDefault(),a.ajaxSubmit()),void 0):(b.preventDefault(),void 0)})},getDefaultButtonBarCfg:function(){var a=this,b=a.get("buttons");return{autoRender:!0,elCls:"toolbar",render:a.get("el"),items:b,defaultChildClass:"bar-item-button"}},submit:function(a){var b=this,c=b.get("submitType");if(b.valid(),b.isValid()){if(0==b.onBeforeSubmit())return;c===d.NORMAL?b.get("el")[0].submit():c===d.AJAX&&b.ajaxSubmit(a)}},ajaxSubmit:function(a){var c,d=this,e=d.get("method"),f=d.get("action"),g=d.get("callback"),h=d.get("submitMask"),i=d.serializeToObject(),j=b.merge(!0,{url:f,type:e,dataType:"json",data:i},a);a&&a.success&&(c=a.success),j.success=function(a){h&&h.hide&&h.hide(),c&&c(a),g&&g.call(d,a)},h&&h.show&&h.show(),$.ajax(j)},_initSubmitMask:function(){var a=this,c=a.get("submitType"),e=a.get("submitMask");c===d.AJAX&&e&&b.use("bui/mask",function(c){var d=$.isPlainObject(e)?e:{};e=new c.LoadMask(b.mix({el:a.get("el")},d)),a.set("submitMask",e)})},serializeToObject:function(){return b.FormHelper.serializeToObject(this.get("el")[0])},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var a=this,b=a.get("initRecord");a.setRecord(b)},resetTips:function(){var a=this,c=a.getFields();b.each(c,function(a){a.resetTip()})},destructor:function(){var a=this,b=a.get("buttonBar"),c=a.get("submitMask");b&&b.destroy&&b.destroy(),c&&c.destroy&&c.destroy()},_uiSetInitRecord:function(a){this.setRecord(a)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"\u6b63\u5728\u63d0\u4ea4\u3002\u3002\u3002"}},submitType:{value:"normal"},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:f},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});return g.View=f,g}),define("bui/form/horizontal",["bui/common","bui/form/form"],function(a){var b=(a("bui/common"),a("bui/form/form")),c=b.extend({getDefaultButtonBarCfg:function(){var a=this,b=a.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:a.get("el"),items:b,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});return c}),define("bui/form/row",["bui/common","bui/form/fieldcontainer"],function(a){var b=(a("bui/common"),a("bui/form/fieldcontainer")),c=b.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>                <div class="controls">                </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});return c}),define("bui/form/rule",["bui/common"],function(a){function b(a,b,c,f,g){e.isArray(c)&&e.isString(c[1])&&(c[1]&&(f=c[1]),c=c[0]);var h=a,i=h.get("validator"),j=d(a,c,f);return b=null==b?"":b,i.call(h,b,c,j,g)}function c(a){if(null==a)return{};if($.isPlainObject(a))return a;var b=a,c={};if(e.isArray(a)){for(var d=0;d<b.length;d++)c[d]=b[d];return c}return{0:a}}function d(a,b,d){var f=c(b);return d=d||a.get("msg"),e.substitute(d,f)}var e=a("bui/common"),f=function(a){f.superclass.constructor.call(this,a)};return e.extend(f,e.Base),f.ATTRS={name:{},msg:{},validator:{value:function(){}}},e.augment(f,{valid:function(a,c,d,e){var f=this;return b(f,a,c,d,e)}}),f}),define("bui/form/rules",["bui/form/rule"],function(a){function b(a){return parseFloat(a)}function c(a){return BUI.Date.parse(a)}function d(a,b,c){var d=a&&a.equals!==!1;return d?b>=c:b>c}function e(a){return""==a||null==a}function f(a,b,c,f){for(var g=f.getFields(),h=!0,i=1;i<g.length;i++){var j,k,l=g[i],m=g[i-1];if(l&&m&&(j=l.get("value"),k=m.get("value"),!e(j)&&!e(k)&&!d(b,j,k))){h=!1;break}}return h?null:c}function g(a){var b=a.getFieldAt(0);return b?b.get("name"):""}function h(a,b){if(BUI.isArray(b)||(b=[b]),!a||!b.length)return!1;var c=a?BUI.isArray(a)?a.length:1:0;if(1==b.length){var d=b[0];if(!d)return!0;if(d>c)return!1}else{var e=b[0],f=b[1];if(e>c||c>f)return!1}return!0}var i=a("bui/form/rule"),j={},k={add:function(a){var b;return $.isPlainObject(a)?(b=a.name,j[b]=new i(a)):a.get&&(b=a.get("name"),j[b]=a),j[b]},remove:function(a){delete j[a]},get:function(a){return j[a]},valid:function(a,b,c,d,e){var f=k.get(a);return f?f.valid(b,c,d,e):null},isValid:function(a,b,c,d){return null==k.valid(a,b,c,d)}};return k.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(a,b,c){return b!==!1&&/^\s*$/.test(a)?c:void 0}}),k.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(a,b,c){var d=$(b);return d.length&&(b=d.val()),a===b?void 0:c}}),k.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(a,c,d){return""!==a&&b(a)<b(c)?d:void 0}}),k.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(a,c,d){return""!==a&&b(a)>b(c)?d:void 0}}),k.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(a,b,c){return null!=a&&(a=$.trim(a.toString()),b!=a.length)?c:void 0}}),k.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(a,b,c){if(null!=a){a=$.trim(a.toString());var d=a.length;if(b>d)return c}}}),k.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(a,b,c){if(a){a=$.trim(a.toString());var d=a.length;if(d>b)return c}}}),k.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(a,b,c){return b?b.test(a)?void 0:c:void 0}}),k.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(a,b,c){return a=$.trim(a),a?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)?void 0:c:void 0}}),k.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(a,b,c){return BUI.isNumber(a)||BUI.isDate(a)?void 0:(a=$.trim(a),a?BUI.Date.isDateString(a)?void 0:c:void 0)}}),k.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(a,b,d){if(a){var e=c(a);if(e&&e<c(b))return d}}}),k.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(a,b,d){if(a){var e=c(a);if(e&&e>c(b))return d}}}),k.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(a,b,c){return BUI.isNumber(a)?void 0:(a=a.replace(/\,/g,""),isNaN(a)?c:void 0)}}),k.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:f}),k.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:f}),k.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(a,b,c,d){var e,f=g(d),i=b;return f&&i&&(e=a[f],!h(e,i))?c:null}}),k}),define("bui/form/remote",["bui/common"],function(a){var b=a("bui/common"),c=function(){};c.ATTRS={isLoading:{},loadingEl:{}},c.prototype={getLoadingContainer:function(){},_setLoading:function(){var a=this,b=a.get("loadingEl"),c=a.get("loadingTpl");b||(b=$(c).appendTo(a.getLoadingContainer()),a.setInternal("loadingEl",b))},_clearLoading:function(){var a=this,b=a.get("loadingEl");b&&(b.remove(),a.setInternal("loadingEl",null))},_uiSetIsLoading:function(a){var b=this;a?b._setLoading():b._clearLoading()}};var d=function(){};return d.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(a){return a}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(a){return b.isString(a)&&(a={url:a}),a}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},d.prototype={__bindUI:function(){var a=this;a.on("valid",function(){if(a.get("remote")&&a.isValid()){var b=a.getControlValue(),c=a.getRemoteParams();a._startRemote(c,b)}}),a.on("error",function(){a.get("remote")&&a._cancelRemote()})},_startRemote:function(a,b){function c(){d._remoteValid(a,e,b),d.set("isLoading",!0)}var d=this,e=d.get("remoteHandler"),f=d.get("cacheMap"),g=d.get("remoteDaly");return e&&d._cancelRemote(e),null!=f[b]?(d._validResult(d._getCallback(),f[b]),void 0):(e=setTimeout(c,g),d.setInternal("remoteHandler",e),void 0)},_validResult:function(a,b){var c=this,d=a(b);c.onRemoteComplete(d,b)},onRemoteComplete:function(a,b,c){var d=this;c==d.get("remoteHandler")&&(d.fire("remotecomplete",{error:a,data:b}),d.set("isLoading",!1),d.setInternal("remoteHandler",null))},_getOptions:function(a){var c=this,d=c.get("remote"),e=c.get("defaultRemote"),f=b.merge(e,d,{data:a});return f},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(a,b,c){var d=this,e=d.get("cacheMap"),f=d._getOptions(a);f.success=function(a){var g=f.callback,h=g(a);e[c]=a,d.onRemoteComplete(h,a,b)},f.error=function(a,c,e){d.onRemoteComplete(e,null,b)},d.fire("remotestart",{data:a}),$.ajax(f)},getRemoteParams:function(){},_cancelRemote:function(a){var b=this;a=a||b.get("remoteHandler"),a&&(clearTimeout(a),b.setInternal("remoteHandler",null)),b.set("isLoading",!1)}},d.View=c,d}),define("bui/select",["bui/common","bui/select/select","bui/select/combox","bui/select/suggest"],function(a){var b=a("bui/common"),c=b.namespace("Select");return b.mix(c,{Select:a("bui/select/select"),Combox:a("bui/select/combox"),Suggest:a("bui/select/suggest")}),c}),define("bui/select/select",["bui/common","bui/picker"],function(a){"use strict";function b(a){if($.isPlainObject(a)){var b=[];return c.each(a,function(a,c){b.push({value:c,text:a})}),b}var d=[];return c.each(a,function(a){c.isString(a)?d.push({value:a,text:a}):d.push(a)}),d}var c=a("bui/common"),d=a("bui/picker").ListPicker,e=c.prefix,f=c.Component,g=d,h=e+"select-input",i=f.Controller.extend({initializer:function(){var a,c=this,d=c.get("multipleSelect"),f=c.get("picker");f?c.get("valueField")&&f.set("valueField",c.get("valueField")):(a=d?"listbox":"simple-list",f=new g({children:[{xclass:a,elCls:e+"select-list",store:c.get("store"),items:b(c.get("items"))}],valueField:c.get("valueField")}),c.set("picker",f)),d&&f.set("hideEvent","")},renderUI:function(){var a=this,b=a.get("picker"),c=a.get("el"),d=c.find("."+a.get("inputCls"));b.set("trigger",c),b.set("triggerEvent",a.get("triggerEvent")),b.set("autoSetValue",a.get("autoSetValue")),b.set("textField",d),a.get("forceFit")&&b.set("width",c.outerWidth()),b.render()},bindUI:function(){var a=this,b=a.get("picker"),c=b.get("list");c.get("store"),b.on("selectedchange",function(b){a.fire("change",{text:b.text,value:b.value,item:b.item})}),c.on("itemsshow",function(){a._syncValue()})},containsElement:function(a){var b=this,c=b.get("picker");return f.Controller.prototype.containsElement.call(this,a)||c.containsElement(a)},_uiSetItems:function(a){if(a){var c=this,d=c.get("picker"),e=d.get("list");e.set("items",b(a)),c._syncValue()}},_syncValue:function(){var a=this,b=a.get("picker"),c=a.get("valueField");c&&b.setSelectedValue($(c).val())},_uiSetName:function(a){var b=this,c=b._getTextEl();a&&c.attr("name",a)},_uiSetWidth:function(a){var b=this;if(null!=a){var c=b._getTextEl(),d=b.get("el").find(".x-icon"),e=c.outerWidth()-c.width(),f=b.get("picker"),g=a-d.outerWidth()-e;c.width(g),b.get("forceFit")&&f.set("width",a)}},_getTextEl:function(){var a=this,b=a.get("el");return b.find("."+a.get("inputCls"))},destructor:function(){var a=this,b=a.get("picker");b&&b.destroy()},_getList:function(){var a=this,b=a.get("picker"),c=b.get("list");return c},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(a){var b=this,c=b.get("picker");c.setSelectedValue(a)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},valueField:{},store:{},focusable:{value:!0},multipleSelect:{value:!1},name:{},items:{sync:!1},inputCls:{value:h},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+h+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});return i}),define("bui/select/combox",["bui/common","bui/select/select"],function(a){function b(a,b,c){var d=(c.get("list"),c.getSelectedText());d&&$(a).val(d)}var c=a("bui/common"),d=a("bui/select/select"),e=c.prefix+"combox-input",f=d.extend({renderUI:function(){var a=this,c=a.get("picker");c.set("autoFocused",!1),c.set("getFunction",b)},_uiSetItems:function(a){for(var b=this,d=0;d<a.length;d++){var e=a[d];c.isString(e)&&(a[d]={value:e,text:e})}f.superclass._uiSetItems.call(b,a)}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+e+'"/>'},inputCls:{value:e}}},{xclass:"combox"});return f}),define("bui/select/suggest",["bui/common","bui/select/combox"],function(a){"use strict";var b=a("bui/common"),c=a("bui/select/combox"),d=200,e="",f=c.extend({bindUI:function(){var a=this,b=a.get("el").find("input"),c="keyup"===a.get("triggerEvent")?"keyup":"keyup click";b.on(c,function(){a._start()})},_start:function(){var a=this;a._timer=a.later(function(){a._updateContent()},d)},_updateContent:function(){var a,b=this,c=b.get("data"),d=b.get("el").find("input");if((c||d.val()!==b.get("query"))&&(b.set("query",d.val()),a=d.val(),c||a)){var e=b.get("cacheable"),f=b.get("url"),g=b.get("data");if(e&&f){var h=b.get("dataCache");void 0!==h[a]?b._handleResponse(h[a]):b._requestData()}else f?b._requestData():g&&b._handleResponse(g,!0)}},_getStore:function(){var a=this,b=a.get("picker"),c=b.get("list");return c?c.get("store"):void 0},_requestData:function(){var a=this,b=a.get("el").find("input"),c=a.get("callback"),d=a.get("store"),e={};e[b.attr("name")]=b.val(),d?(e.start=0,d.load(e,c)):$.ajax({url:a.get("url"),type:"post",dataType:a.get("dataType"),data:e,success:function(b){a._handleResponse(b),c&&c(b)}})},_handleResponse:function(a,b){var c=this,d=b?c._getFilterItems(a):a;c.set("items",d),c.get("cacheable")&&(c.get("dataCache")[c.get("query")]=d)},_getItemText:function(a){var b=this,c=b.get("picker"),d=c.get("list");return d?d.getItemText(a):""},_getFilterItems:function(a){function c(a,c){b.isString(c)?e.push(a):e.push(c)}var d=this,e=[],f=d.get("el").find("input"),g=f.val(),h=d.get("data");return a=a||[],b.each(a,function(a){var e=b.isString(a)?a:d._getItemText(a);h?-1!==e.indexOf($.trim(g))&&c(e,a):c(e,a)}),e},later:function(a,b,c){b=b||0;var d=c?setInterval(a,b):setTimeout(a,b);return{id:d,interval:c,cancel:function(){this.interval?clearInterval(d):clearTimeout(d)}}}},{ATTRS:{data:{value:null},query:{value:e},cacheable:{value:!1},dataCache:{value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});return f}),define("bui/mask",["bui/common","bui/mask/mask","bui/mask/loadmask"],function(a){var b=(a("bui/common"),a("bui/mask/mask"));return b.LoadMask=a("bui/mask/loadmask"),b}),define("bui/mask/mask",["bui/common"],function(a){var b=a("bui/common"),c=b.namespace("Mask"),d=b.UA,e=b.prefix+"ext-mask",f=e+"-msg";return b.mix(c,{maskElement:function(a,c,g){var h=$(a),i=$("."+e,h),j=null,k=null,l=null,m=null;if(!i.length&&(i=$('<div class="'+e+'"></div>').appendTo(h),h.addClass("x-masked-relative x-masked"),6===d.ie&&i.height(h.height()),c)){j=['<div class="'+f+'"><div>',c,"</div></div>"].join(""),k=$(j).appendTo(h),g&&k.addClass(g);try{l=(h.height()-k.height())/2,m=(h.width()-k.width())/2,k.css({left:m,top:l})}catch(n){b.log("mask error occurred")}}return i},unmaskElement:function(a){var b=$(a),c=b.children("."+f),d=b.children("."+e);c&&c.remove(),d&&d.remove(),b.removeClass("x-masked-relative x-masked")}}),c}),define("bui/mask/loadmask",["bui/mask/mask"],function(a){function b(a){var c=this;b.superclass.constructor.call(c,a)}var c=a("bui/mask/mask");return BUI.extend(b,BUI.Base),b.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:!1}},BUI.augment(b,{disable:function(){this.set("disabled",!0)},onLoad:function(){c.unmaskElement(this.get("el"))},onBeforeLoad:function(){var a=this;a.get("disabled")||c.maskElement(a.get("el"),a.get("msg"),this.get("msgCls"))},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide(),this.clearAttrVals(),this.off()}}),b}),define("bui/menu",["bui/common","bui/menu/menu","bui/menu/menuitem","bui/memu/contextmenu","bui/menu/popmenu","bui/menu/sidemenu"],function(a){var b=a("bui/common"),c=b.namespace("Menu");return b.mix(c,{Menu:a("bui/menu/menu"),MenuItem:a("bui/menu/menuitem"),ContextMenu:a("bui/memu/contextmenu"),PopMenu:a("bui/menu/popmenu"),SideMenu:a("bui/menu/sidemenu")}),c.ContextMenuItem=c.ContextMenu.Item,c}),define("bui/menu/menuitem",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d=c.UIBase,e=(b.prefix,"x-caret"),f="data-id",g=c.View.extend([d.ListItemView,d.CollapseableView],{_uiSetOpen:function(a){var b=this,c=b.getStatusCls("open");a?b.get("el").addClass(c):b.get("el").removeClass(c)}},{ATTRS:{}},{xclass:"menu-item-view"}),h=c.Controller.extend([d.ListItem,d.Collapseable],{renderUI:function(){var a=this,c=a.get("el"),d=a.get("id");d||(d=b.guid("menu-item"),a.set("id",d)),c.attr(f,d)},handleMouseEnter:function(a){this.get("subMenu")&&this.set("open",!0),h.superclass.handleMouseEnter.call(this,a)},handleMouseLeave:function(a){var b=this,c=b.get("subMenu"),d=a.toElement;d&&c&&c.containsElement(d)?b.set("open",!0):b.set("open",!1),h.superclass.handleMouseLeave.call(this,a)},containsElement:function(a){var b,c=this,d=h.superclass.containsElement.call(c,a);return d||(b=c.get("subMenu"),d=b&&b.containsElement(a)),d},_uiSetOpen:function(a){var b=this,c=b.get("subMenu"),d=b.get("subMenuAlign");if(c)if(a)d.node=b.get("el"),c.set("align",d),c.show();else{var e=c.get("align");e&&e.node!=b.get("el")||c.hide()}},_uiSetSubMenu:function(a){if(a){var b=this,c=b.get("el"),d=b.get("parent");a.get("parentMenu")||(a.set("parentMenu",d),d.get("autoHide")&&a.set("autoHide",!1)),$(b.get("arrowTpl")).appendTo(c)}},destructor:function(){var a=this,b=a.get("subMenu");b&&b.destroy()}},{ATTRS:{elTagName:{value:"li"},xview:{value:g},open:{view:!0,value:!1},subMenu:{view:!0},subMenuAlign:{valueFn:function(){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+e+" "+e+'-left"></span>'},events:{value:{afterOpenChange:!0}}}},{xclass:"menu-item",priority:0}),i=h.extend({},{ATTRS:{focusable:{value:!1},selectable:{value:!1},handleMouseEvents:{value:!1}}},{xclass:"menu-item-sparator"});return h.View=g,h.Separator=i,h}),define("bui/menu/menu",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d=c.UIBase,e=c.Controller.extend([d.ChildList],{bindUI:function(){var a=this;a.on("click",function(b){var c=b.target,d=a.get("multipleSelect");a!=c&&(d||!a.get("clickHide")||c.get("subMenu")||a.getTopAutoHideMenu().hide())}),a.on("afterOpenChange",function(c){var d=c.target,e=c.newVal,f=a.get("children");e&&b.each(f,function(a){a!==d&&a.get("open")&&a.set("open",!1)})}),a.on("afterVisibleChange",function(b){b.newVal,a.get("parentMenu"),a._clearOpen()})},getTopAutoHideMenu:function(){var a=this,b=a.get("parentMenu");return b&&b.get("autoHide")?b.getTopAutoHideMenu():a.get("autoHide")?a:null},_clearOpen:function(){var a=this,c=a.get("children");b.each(c,function(a){a.set&&a.set("open",!1)})},findItemById:function(a){return this.findItemByField("id",a)},_uiSetSelectedItem:function(a){a&&_self.setSelected(a)}},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},isDecorateChild:{value:!0},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});return e}),define("bui/menu/popmenu",["bui/common","bui/menu/menu"],function(a){var b=a("bui/common"),c=b.Component.UIBase,d=a("bui/menu/menu"),e=b.Component.View.extend([c.PositionView],{}),f=d.extend([c.Position,c.Align,c.AutoShow,,c.AutoHide],{},{ATTRS:{clickHide:{value:!0},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:!0},visible:{value:!1},xview:{value:e}}},{xclass:"pop-menu"});return f}),define("bui/memu/contextmenu",["bui/common","bui/menu/menuitem","bui/menu/popmenu"],function(a){var b=a("bui/common"),c=a("bui/menu/menuitem"),d=a("bui/menu/popmenu"),e=b.prefix,f=e+"menu-item-link",g=e+"menu-item-icon",h=b.Component;h.UIBase;var i=c.extend({bindUI:function(){var a=this;a.get("el").delegate("."+f,"click",function(a){a.preventDefault()})},_uiSetIconCls:function(a,b){var c=this,d=b.prevVal,e=c.get("el").find("."+g);e.removeClass(d),e.addClass(a)}},{ATTRS:{text:{veiw:!0,value:""},iconCls:{sync:!1,value:""},tpl:{value:'<a class="'+f+'" href="#">        <span class="'+g+' {iconCls}"></span><span class="'+e+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"}),j=d.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});return j.Item=i,j}),define("bui/menu/sidemenu",["bui/common","bui/menu/menu"],function(a){var b=a("bui/common"),c=a("bui/menu/menu"),d=(b.Component,b.prefix+"menu-title"),e="menu-leaf",f=c.extend({initializer:function(){var a=this,c=a.get("items"),d=a.get("children");b.each(c,function(b){var c=a._initMenuCfg(b);d.push(c)})},bindUI:function(){var a=this,c=a.get("children");b.each(c,function(a){var b=a.get("children")[0];b&&b.publish("click",{bubbles:1})}),a.get("el").delegate("a","click",function(a){a.preventDefault()}),a.on("itemclick",function(b){var c=b.item,f=$(b.domTarget).closest("."+d);if(f.length){var g=c.get("collapsed");c.set("collapsed",!g)}else c.get("el").hasClass(e)&&(a.fire("menuclick",{item:c}),a.clearSelection(),a.setSelected(c))})},getItems:function(){var a=this,c=[],d=a.get("children");return b.each(d,function(a){var b=a.get("children")[0];c=c.concat(b.get("children"))}),c},_initMenuCfg:function(a){var c=this,e=a.items,f=[],g={xclass:"menu-item",elCls:"menu-second",collapsed:a.collapsed,selectable:!1,children:[{xclass:"menu",children:f}],content:'<div class="'+d+'"><s></s><span class="'+d+'-text">'+a.text+"</span></div>"};return b.each(e,function(a){var b=c._initSubMenuCfg(a);f.push(b)}),g},_initSubMenuCfg:function(a){var c={xclass:"menu-item",elCls:"menu-leaf",tpl:'<a href="{href}"><em>{text}</em></a>'};return b.mix(c,a)}},{ATTRS:{autoInitItems:{value:!1},events:{value:{menuclick:!1}}}},{xclass:"side-menu"});return f}),define("bui/tab",["bui/common","bui/tab/tab","bui/tab/tabitem","bui/tab/navtabitem","bui/tab/navtab","bui/tab/tabpanel","bui/tab/tabpanelitem"],function(a){var b=a("bui/common"),c=b.namespace("Tab");return b.mix(c,{Tab:a("bui/tab/tab"),TabItem:a("bui/tab/tabitem"),NavTabItem:a("bui/tab/navtabitem"),NavTab:a("bui/tab/navtab"),TabPanel:a("bui/tab/tabpanel"),TabPanelItem:a("bui/tab/tabpanelitem")}),c}),define("bui/tab/navtabitem",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d="tab-item-title",e="tab-item-close",f="tab-item-inner",g="tab-nav-actived",h="tab-content",i=c.View.extend({renderUI:function(){var a=this,b=a.get("tabContentContainer"),c=a.get("tabContentTpl");if(b){var d=$(c).appendTo(b);a.set("tabContentEl",d)}},_uiSetHref:function(a){this._setHref(a)},_setHref:function(a){var b=this,c=b.get("tabContentEl");a=a||b.get("href"),c&&$("iframe",c).attr("src",a)},resetHref:function(){this._setHref()},_uiSetTitle:function(a){var b=this,c=b.get("el");c.attr("title",a),$("."+d,c).text(a)},_uiSetActived:function(a){var b=this,c=b.get("el");b.setTabContentVisible(a),a?c.addClass(g):c.removeClass(g)},destructor:function(){var a=this,b=a.get("tabContentEl");b&&b.remove()},setTabContentVisible:function(a){var b=this,c=b.get("tabContentEl");c&&(a?c.show():c.hide())}},{ATTRS:{tabContentContainer:{},tabContentEl:{},title:{},href:{}}}),j=c.Controller.extend({createDom:function(){var a=this,b=a.get("parent");b&&a.set("tabContentContainer",b.getTabContentContainer())},bindUI:function(){var a=this,b=a.get("el");a.get("events"),b.on("click",function(b){var c=$(b.target);c.hasClass(e)&&a.fire("closing")!==!1&&a.close()})},handleDblClick:function(a){var b=this;b.get("closeable")&&b.fire("closing")!==!1&&b.close(),b.fire("dblclick",{domTarget:a.target,domEvent:a})},handleContextMenu:function(a){a.preventDefault(),this.fire("showmenu",{position:{x:a.pageX,y:a.pageY}})},setTitle:function(a){this.set("title",a)},close:function(){this.fire("closed")},reload:function(){this.get("view").resetHref()},show:function(){var a=this;a.get("el").show(500,function(){a.set("visible",!0)})},hide:function(a){var b=this;this.get("el").hide(500,function(){b.set("visible",!1),a&&a()})},_uiSetActived:function(a){var b=this,c=b.get("parent");c&&a&&c._setItemActived(b)},_uiSetCloseable:function(a){var b=this,c=b.get("el"),d=c.find("."+e);a?d.show():d.hide()}},{ATTRS:{elTagName:{value:"li"},actived:{view:!0,value:!1},closeable:{value:!0},allowTextSelection:{view:!1,value:!1},events:{value:{click:!0,closing:!0,closed:!0,showmenu:!0,afterVisibleChange:!0}},tabContentContainer:{view:!0},tabContentTpl:{view:!0,value:'<div class="'+h+'" style="display:none;"><iframe src="" width="100%" height="100%" frameborder="0"></iframe></div>'},href:{view:!0,value:""},visible:{view:!0,value:!0},title:{view:!0,value:""},tpl:{view:!0,value:'<s class="l"></s><div class="'+f+'">{icon}<span class="'+d+'"></span><s class="'+e+'"></s></div><s class="r"></s>'},xview:{value:i}}},{xclass:"nav-tab-item",priority:0});return j.View=i,j}),define("bui/tab/navtab",["bui/common","bui/menu"],function(a){var b=a("bui/common"),c=a("bui/menu"),d=b.Component,e="tab-nav-list",f="arrow-left",g="arrow-right",h=b.prefix+"tab-force",i="m_close",j=140,k=d.View.extend({renderUI:function(){var a=this,b=a.get("el"),c=null;c=b.find("."+e),a.setInternal("listEl",c)},getContentElement:function(){return this.get("listEl")},getTabContentContainer:function(){return this.get("el").find(".tab-content-container")},_uiSetHeight:function(a){var b=this,c=b.get("el"),d=c.find(".tab-nav-bar"),e=b.getTabContentContainer();a&&e.height(a-d.height()),c.height(a)},_uiSetForceFit:function(a){var b=this,c=b.get("el");a?c.addClass(h):c.removeClass(h)}},{ATTRS:{forceFit:{}}},{xclass:"nav-tab-view",priority:0}),l=d.Controller.extend({addTab:function(a,c){var d=this,e=a.id||b.guid("tab-item"),f=d.get("forceFit"),g=d.getItemById(e);if(g){var h=!1;a.href&&g.get("href")!=a.href&&(g.set("href",a.href),h=!0),d._setItemActived(g),c&&!h&&g.reload()}else a=b.mix({id:e,visible:!1,actived:!0,xclass:"nav-tab-item"},a),g=d.addChild(a),f&&d.forceFit(),g.show(),d._resetItemList();return g},getTabContentContainer:function(){return this.get("view").getTabContentContainer()},bindUI:function(){var a=this,b=a.get("forceFit");b||(a._bindScrollEvent(),a.on("afterVisibleChange",function(b){var c=b.target;c.get("actived")&&a._scrollToItem(c)})),a.on("click",function(b){var c=b.target;c!=a&&(a._setItemActived(c),a.fire("itemclick",{item:c}))}),a.on("closed",function(b){var c=b.target;a._closeItem(c)}),a.on("showmenu",function(b){a._showMenu(b.target,b.position)})},_bindScrollEvent:function(){var a=this,b=a.get("el");b.find(".arrow-left").on("click",function(){b.hasClass(f+"-active")&&a._scrollLeft()}),b.find(".arrow-right").on("click",function(){b.hasClass(g+"-active")&&a._scrllRight()})},_showMenu:function(a,b){var c,d=this,e=d._getMenu(),f=a.get("closeable");d.set("showMenuItem",a),e.set("xy",[b.x,b.y]),e.show(),c=e.getItem(i),c&&c.set("disabled",!f)},setActived:function(a){var b=this,c=b.getItemById(a);b._setItemActived(c)},getActivedItem:function(){var a=this,c=a.get("children"),d=null;return b.each(c,function(a){return a.get("actived")?(d=a,!1):void 0}),d},getItemById:function(a){var c=this,d=c.get("children"),e=null;return b.each(d,function(b){return b.get("id")===a?(e=b,!1):void 0}),e},_getMenu:function(){var a=this;return a.get("menu")||a._initMenu()},_initMenu:function(){var a=this,b=new c.ContextMenu({children:[{xclass:"context-menu-item",iconCls:"icon icon-refresh",text:"\u5237\u65b0",listeners:{click:function(){var b=a.get("showMenuItem");
b&&b.reload()}}},{id:i,xclass:"context-menu-item",iconCls:"icon icon-remove",text:"\u5173\u95ed",listeners:{click:function(){var b=a.get("showMenuItem");b&&b.close()}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u5176\u4ed6",listeners:{click:function(){var b=a.get("showMenuItem");b&&a.closeOther(b)}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u6240\u6709",listeners:{click:function(){a.closeAll()}}}]});return a.set("menu",b),b},_closeItem:function(a){var b=this,c=b._getIndex(a),d=b.getActivedItem(),e=b.get("preItem")||b._getItemByIndex(c-1),f=b._getItemByIndex(c+1);a.hide(function(){b.removeChild(a,!0),b._resetItemList(),d===a?e?b._setItemActived(e):b._setItemActived(f):b._scrollToItem(d),b.forceFit()})},closeAll:function(){var a=this,c=a.get("children");b.each(c,function(a){a.close()})},closeOther:function(a){var c=this,d=c.get("children");b.each(d,function(b){a!==b&&b.close()})},_getItemByIndex:function(a){var b=this,c=b.get("children");return c[a]},_getIndex:function(a){var c=this,d=c.get("children");return b.Array.indexOf(a,d)},_resetItemList:function(){if(!this.get("forceFit")){var a=this,b=a.getContentElement();b.width(a._getTotalWidth())}},_getTotalWidth:function(){var a=this,b=a.get("children");return b.length*a.get("itemWidth")},_getForceItemWidth:function(){var a=this,b=a.getContentElement().width(),c=a.get("children"),d=a._getTotalWidth(),e=a.get(e);return d>b&&(e=b/c.length),e},forceFit:function(){var a=this;a._forceItemWidth(a._getForceItemWidth())},_forceItemWidth:function(a){a=a||this.get("itemWidth");var c=this,d=c.get("children");b.each(d,function(b){b.set("width",a)})},_scrollToItem:function(a){if(!this.get("forceFit")){var b=this,c=b.getContentElement(),d=c.position(),e=b._getDistanceToEnd(a,c,d),f=b._getDistanceToBegin(a,d);if(c.width()<c.parent().width())b._scrollTo(c,0);else if(0>f)b._scrollTo(c,d.left-f);else if(e>0)b._scrollTo(c,d.left+-1*e);else if(d.left<0){var g=b._getLastDistance(c,d),h=0;0>g&&(h=d.left-g,h=0>h?h:0,b._scrollTo(c,h))}}},_getDistanceToBegin:function(a,b){var c=a.get("el").position();return c.left+b.left},_getDistanceToEnd:function(a,b,c){var d=this,b=b||d.getContentElement(),e=b.parent().width(),c=c||b.position(),f=d._getDistanceToBegin(a,c),g=f+d.get("itemWidth")-e;return g},_getLastDistance:function(a,b){var c=this,d=c.get("children"),e=d[d.length-1];return e?c._getDistanceToEnd(e,a,b):0},_scrollTo:function(a,b){var c=this;a.animate({left:b},500,function(){c._setArrowStatus(a)})},_scrollLeft:function(){var a,b=this,c=b.getContentElement(),d=c.position(),e=b._getLastDistance(c,d);e>0&&(a=e>b.get("itemWidth")?b.get("itemWidth"):e,b._scrollTo(c,d.left-a))},_scrllRight:function(){var a,b=this,c=b.getContentElement(),d=c.position();d.left<0&&(a=d.left+b.get("itemWidth"),a=0>a?a:0,b._scrollTo(c,a))},_setArrowStatus:function(a,b){a=a||this.getContentElement();var c=this,d=c.get("el"),e=b||a.position(),h=c._getLastDistance(a,b);e.left<0?d.addClass(g+"-active"):d.removeClass(g+"-active"),h>0?d.addClass(f+"-active"):d.removeClass(f+"-active")},_setItemActived:function(a){var b=this,c=b.getActivedItem();a!==c&&(c&&c.set("actived",!1),b.set("preItem",c),a&&(a.get("actived")||a.set("actived",!0),a.get("visible")&&b._scrollToItem(a),b.fire("activeChange",{item:a})))}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},menu:{},forceFit:{view:!0,value:!1},itemWidth:{value:j},tpl:{view:!0,value:'<div class="tab-nav-bar"><s class="tab-nav-arrow arrow-left"></s><div class="tab-nav-wrapper"><div class="tab-nav-inner"><ul class="'+e+'"></ul></div></div><s class="tab-nav-arrow arrow-right"></s>'+"</div>"+'<div class="tab-content-container"></div>'},xview:{value:k},events:{value:{itemclick:!1}}}},{xclass:"nav-tab",priority:0});return l}),define("bui/tab/tabitem",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d=c.UIBase,e=c.View.extend([d.ListItemView],{},{xclass:"tab-item-view"}),f=c.Controller.extend([d.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:e},tpl:{view:!0,value:'<span class="bui-tab-item-text">{text}</span>'}}},{xclass:"tab-item"});return f.View=e,f}),define("bui/tab/tab",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d=c.UIBase,e=c.Controller.extend([d.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"tab-item"}}},{xclass:"tab"});return e}),define("bui/tab/tabpanelitem",["bui/common","bui/tab/tabitem","bui/tab/panelitem"],function(a){var b=a("bui/common"),c=a("bui/tab/tabitem"),d=a("bui/tab/panelitem"),e=b.Component,f=c.View.extend([e.UIBase.Close.View],{},{xclass:"tab-panel-item-view"}),g=c.extend([d,e.UIBase.Close],{},{ATTRS:{closeAction:{value:"remove"},events:{value:{beforeclosed:!0}},xview:{value:f}}},{xclass:"tab-panel-item"});return g.View=f,g}),define("bui/tab/tabpanel",["bui/common","bui/tab/tab","bui/tab/panels"],function(a){var b=(a("bui/common"),a("bui/tab/tab")),c=a("bui/tab/panels"),d=b.extend([c],{bindUI:function(){var a=this;a.on("beforeclosed",function(b){var c=b.target;a._beforeClosedItem(c)})},_beforeClosedItem:function(a){if(a.get("selected")){var b,c,d=this,e=d.indexOfItem(a),f=d.getItemCount();e!==f-1?(c=d.getItemAt(e+1),d.setSelected(c)):0!==e&&(b=d.getItemAt(e-1),d.setSelected(b))}}},{ATTRS:{elTagName:{value:"div"},childContainer:{value:"ul"},tpl:{value:'<div class="tab-panel-inner"><ul></ul><div class="tab-panels"></div></div>'},panelTpl:{value:"<div></div>"},panelContainer:{value:".tab-panels"},defaultChildClass:{value:"tab-panel-item"}}},{xclass:"tab-panel"});return d}),define("bui/toolbar",["bui/common","bui/toolbar/baritem","bui/toolbar/bar","bui/toolbar/pagingbar","bui/toolbar/numberpagingbar"],function(a){var b=a("bui/common"),c=b.namespace("Toolbar");return b.mix(c,{BarItem:a("bui/toolbar/baritem"),Bar:a("bui/toolbar/bar"),PagingBar:a("bui/toolbar/pagingbar"),NumberPagingBar:a("bui/toolbar/numberpagingbar")}),c}),define("bui/toolbar/baritem",function(){var a=BUI.prefix,b=BUI.Component,c=b.UIBase,d=b.View.extend([c.ListItemView]),e=b.Controller.extend([c.ListItem],{renderUI:function(){var b=this.get("el");b.addClass(a+"inline-block"),b.attr("id")||b.attr("id",this.get("id"))}},{ATTRS:{elTagName:{view:!0,value:"li"},selectable:{value:!1},focusable:{value:!1},xview:{value:d}}},{xclass:"bar-item",priority:1}),f=e.extend({_uiSetDisabled:function(b){var c=this,d=c.get("el"),e=b?"addClass":"removeClass";d.find("button").attr("disabled",b)[e](a+"button-disabled")},_uiSetChecked:function(b){var c=this,d=c.get("el"),e=b?"addClass":"removeClass";d.find("button")[e](a+"button-checked")},_uiSetText:function(a){var b=this,c=b.get("el");c.find("button").text(a)},_uiSetbtnCls:function(a){var b=this,c=b.get("el");c.find("button").addClass(a)}},{ATTRS:{checked:{value:!1},tpl:{view:!0,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:!1},text:{sync:!1,value:""}}},{xclass:"bar-item-button",priority:2}),g=e.extend({renderUI:function(){var a=this.get("el");a.attr("role","separator")}},{xclass:"bar-item-separator",priority:2}),h=e.extend({},{ATTRS:{width:{view:!0,value:2}}},{xclass:"bar-item-spacer",priority:2}),i=e.extend({_uiSetText:function(a){var b=this,c=b.get("el");c.html(a)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});return e.types={button:f,separator:g,spacer:h,text:i},e}),define("bui/toolbar/bar",function(){var a=BUI.Component,b=a.UIBase,c=a.View.extend({renderUI:function(){var a=this.get("el");a.attr("role","toolbar"),a.attr("id")||a.attr("id",BUI.guid("bar"))}}),d=a.Controller.extend([b.ChildList],{getItem:function(a){return this.getChild(a)}},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:!1},xview:{value:c}}},{xclass:"bar",priority:1});return d}),define("bui/toolbar/pagingbar",["bui/toolbar/bar"],function(a){var b=a("bui/toolbar/bar"),c=BUI.Component,d=c.UIBase.Bindable,e=BUI.prefix,f="first",g="prev",h="next",i="last",j="skip",k="refresh",l="totalPage",m="curPage",n="totalCount",o=[f,g,h,i,j,k],p=[l,m,n],q=b.extend([d],{initializer:function(){var a=this,b=a.get("children"),c=a.get("items"),d=a.get("store");c?BUI.each(c,function(c){BUI.isString(c)&&(c=BUI.Array.contains(c,o)?a._getButtonItem(c):BUI.Array.contains(c,p)?a._getTextItem(c):{xtype:c}),b.push(c)}):(c=a._getItems(),BUI.each(c,function(a){b.push(a)})),d&&d.get("pageSize")&&a.set("pageSize",d.get("pageSize"))},bindUI:function(){var a=this;a._bindButtonEvent()},jumpToPage:function(a){if(!(0>=a||a>this.get("totalPage"))){var b=this,c=b.get("store"),d=b.get("pageSize"),e=a-1,f=e*d,g=b.fire("beforepagechange",{from:b.get("curPage"),to:a});c&&g!==!1&&c.load({start:f,limit:d,pageIndex:e})}},_afterStoreLoad:function(a){var b,c,d,e,f=this,g=f.get("pageSize"),h=0;h=a.get("start"),c=a.getTotalCount(),b=c-h>g?h+a.getCount()-1:c,e=parseInt((c+g-1)/g,10),e=e>0?e:1,d=parseInt(h/g,10)+1,f.set("start",h),f.set("end",b),f.set("totalCount",c),f.set("curPage",d),f.set("totalPage",e),f._setAllButtonsState(),f._setNumberPages()},_bindButtonEvent:function(){function a(){var a=parseInt(b._getCurrentPageValue(),10);b._isPageAllowRedirect(a)?b.jumpToPage(a):b._setCurrentPageValue(b.get("curPage"))}var b=this;b._bindButtonItemEvent(f,function(){b.jumpToPage(1)}),b._bindButtonItemEvent(g,function(){b.jumpToPage(b.get("curPage")-1)}),b._bindButtonItemEvent(h,function(){b.jumpToPage(b.get("curPage")+1)}),b._bindButtonItemEvent(i,function(){b.jumpToPage(b.get("totalPage"))}),b._bindButtonItemEvent(j,function(){a()}),b._bindButtonItemEvent(k,function(){b.jumpToPage(b.get("curPage"))});var c=b.getItem(m);c&&c.get("el").on("keyup",function(b){b.stopPropagation(),13===b.keyCode&&a()})},_bindButtonItemEvent:function(a,b){var c=this,d=c.getItem(a);d&&d.on("click",b)},onLoad:function(a){var b=this,c=b.get("store");b._afterStoreLoad(c,a)},_getItems:function(){var a=this,b=a.get("items");return b&&b.length?b:(b=[],b.push(a._getButtonItem(f)),b.push(a._getButtonItem(g)),b.push(a._getSeparator()),b.push(a._getTextItem(l)),b.push(a._getTextItem(m)),b.push(a._getButtonItem(j)),b.push(a._getSeparator()),b.push(a._getButtonItem(h)),b.push(a._getButtonItem(i)),b.push(a._getSeparator()),b.push(a._getTextItem(n)),b)},_getButtonItem:function(a){var b=this;return{id:a,xclass:"bar-item-button",text:b.get(a+"Text"),disabled:!0,elCls:b.get(a+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(a){var b=this;return{id:a,xclass:"bar-item-text",text:b._getTextItemTpl(a)}},_getTextItemTpl:function(a){var b=this,c=b.getAttrVals();return BUI.substitute(this.get(a+"Tpl"),c)},_isPageAllowRedirect:function(a){var b=this;return a&&a>0&&a<=b.get("totalPage")&&a!==b.get("curPage")},_setAllButtonsState:function(){var a=this,b=a.get("store");b&&a._setButtonsState([g,h,f,i,j],!0),1===a.get("curPage")&&a._setButtonsState([g,f],!1),a.get("curPage")===a.get("totalPage")&&a._setButtonsState([h,i],!1)},_setButtonsState:function(a,b){var c=this,d=c.get("children");BUI.each(d,function(c){-1!==BUI.Array.indexOf(c.get("id"),a)&&c.set("disabled",!b)})},_setNumberPages:function(){var a=this,b=a.getItems();BUI.each(b,function(b){"bar-item-text"===b.__xclass&&b.set("content",a._getTextItemTpl(b.get("id")))})},_getCurrentPageValue:function(a){var b=this;if(a=a||b.getItem(m)){var c=a.get("el").find("input");return c.val()}},_setCurrentPageValue:function(a,b){var c=this;if(b=b||c.getItem(m)){var d=b.get("el").find("input");d.val(a)}}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:e+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:e+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:e+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:e+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:e+"pb-skip"},refreshText:{value:"\u5237\u65b0"},refreshCls:{value:e+"pb-refresh"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="'+e+'pb-page" size="20" value="{curPage}" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},autoInitItems:{value:!1},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:f,ID_PREV:g,ID_NEXT:h,ID_LAST:i,ID_SKIP:j,ID_REFRESH:k,ID_TOTAL_PAGE:l,ID_CURRENT_PAGE:m,ID_TOTAL_COUNT:n},{xclass:"pagingbar",priority:2});return q}),define("bui/toolbar/numberpagingbar",["bui/toolbar/pagingbar"],function(a){var b=(BUI.Component,a("bui/toolbar/pagingbar")),c=BUI.prefix,d=c+"button-number",e=b.extend({_getItems:function(){var a=this,c=a.get("items");return c?c:(c=[],c.push(a._getButtonItem(b.ID_PREV)),c.push(a._getButtonItem(b.ID_NEXT)),c)},_getButtonItem:function(a){var b=this;return{id:a,content:'<a href="javascript:;">'+b.get(a+"Text")+"</a>",disabled:!0}},_bindButtonEvent:function(){var a=this,b=a.get("numberButtonCls");a.constructor.superclass._bindButtonEvent.call(this),a.get("el").delegate("a","click",function(a){a.preventDefault()}),a.on("click",function(c){var d=c.target;if(d&&d.get("el").hasClass(b)){var e=d.get("id");a.jumpToPage(e)}})},_setNumberPages:function(){var a=this;a._setNumberButtons()},_setNumberButtons:function(){var a,b=this,c=b.get("curPage"),d=b.get("totalPage"),e=b._getNumberItems(c,d);b._clearNumberButtons(),BUI.each(e,function(a){b._appendNumberButton(a)}),a=b.getItem(c),a&&a.set("selected",!0)},_appendNumberButton:function(a){var b=this,c=b.getItemCount();b.addItemAt(a,c-1)},_clearNumberButtons:function(){for(var a=this,b=(a.getItems(),a.getItemCount());b>2;)a.removeItemAt(b-2),b=a.getItemCount()},_getNumberItems:function(a,b){function c(a,b){for(var c=a;b>=c;c++)g.push(f._getNumberItem(c))}function d(){g.push(f._getEllipsisItem())}var e,f=this,g=[],h=f.get("maxLimitCount"),i=f.get("showRangeCount");if(h>b)e=b,c(1,b);else{var j=h>=a?1:a-i,k=a+i,l=b>k?k>h?k:h:b;j>1&&(c(1,1),j>2&&d()),e=l,c(j,l)}return b>e&&(b-1>e&&d(),c(b,b)),g},_getEllipsisItem:function(){var a=this;return{disabled:!0,content:a.get("ellipsisTpl")}},_getNumberItem:function(a){var b=this;return{id:a,elCls:b.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:d},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});return e}),define("bui/progressbar",["bui/common","bui/progressbar/base","bui/progressbar/load"],function(a){var b=a("bui/common"),c=b.namespace("ProgressBar");return b.mix(c,{Base:a("bui/progressbar/base"),Load:a("bui/progressbar/load")}),c}),define("bui/progressbar/base",["bui/common"],function(a){var b=a("bui/common"),c=b.Component.View.extend({_uiSetPercent:function(a){var c=this,d=c.get("el").children();b.isArray(a)||(a=[a]),b.each(d,function(b,c){$(b).width(a[c]+"%")})}},{ATTRS:{percent:{}}}),d=b.Component.Controller.extend({},{ATTRS:{percent:{view:!0,value:0},tpl:{value:'<div class="progress-bar-inner"></div>'},xview:{value:c}}},{xclass:"progress-bar"});return d}),define("bui/progressbar/load",["bui/progressbar/base"],function(a){var b=a("bui/progressbar/base"),c=0,d=1,e=2,f=b.extend({bindUI:function(){var a=this;a.on("afterPercentChange",function(){if(a.isLoading()){var b=a.get("percent");100==b&&a.onCompleted(),a.onChange()}})},start:function(){var a=this;a.isLoading()||a.onstart()},complete:function(){var a=this;clearTimeout(a.get("t")),a.set("percent",100)},cancel:function(){var a=this;clearTimeout(a.get("t")),a.get("percent")&&a.set("percent",0),a.set("status",c)},onstart:function(){var a=this,b=a.get("cfg");a.set("percent",0),a.set("status",d),a.fire("start",b),a._startLoad()},onChange:function(){var a=this;a.fire("loadchange")},onCompleted:function(){var a=this;a.set("status",e),a.fire("completed")},isLoading:function(){return this.get("status")===d},isCompleted:function(){return this.get("status")===e},_startLoad:function(){var a,b=this,c=b.get("ajaxCfg"),d=b.get("interval");c.success=function(e){var f=e.percent;b.set("percent",f),100>f&&b.isLoading()&&(a=setTimeout(function(){$.ajax(c)},d),b.set("t",a))},$.ajax(c)}},{ATTRS:{status:{value:0},ajaxCfg:{},interval:{value:500},events:{value:["start","loadchange","completed"]}}},{xclass:"progress-bar-load"});return f}),define("bui/calendar",["bui/common","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/datepicker"],function(a){var b=a("bui/common"),c=b.namespace("Calendar");return b.mix(c,{Calendar:a("bui/calendar/calendar"),MonthPicker:a("bui/calendar/monthpicker"),DatePicker:a("bui/calendar/datepicker")}),c}),define("bui/calendar/monthpicker",["bui/common","bui/overlay","bui/list","bui/toolbar"],function(a){function b(){return $.map(l,function(a,b){return{text:a,value:b}})}var c=a("bui/common"),d=(c.Component,a("bui/overlay").Overlay),e=a("bui/list").SimpleList,f=a("bui/toolbar"),g=c.prefix,h="x-monthpicker-month",i="x-monthpicker-year",j="x-monthpicker-yearnav",k="x-monthpicker-item",l=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],m=e.extend({bindUI:function(){var a=this;a.get("el").delegate("a","click",function(a){a.preventDefault()}).delegate("."+h,"dblclick",function(){a.fire("dblclick")})}},{ATTRS:{itemTpl:{view:!0,value:'<li class="'+k+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:k},items:{view:!0,value:b()},elCls:{view:!0,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"}),n=e.extend({bindUI:function(){var a=this,b=a.get("el");b.delegate("a","click",function(a){a.preventDefault()}),b.delegate("."+i,"dblclick",function(){a.fire("dblclick")}),b.delegate(".x-icon","click",function(b){var c=$(b.currentTarget);c.hasClass(j+"-prev")?a._prevPage():c.hasClass(j+"-next")&&a._nextPage()}),a.on("itemselected",function(b){b.item&&a.setInternal("year",b.item.value)})},_prevPage:function(){var a=this,b=a.get("start"),c=a.get("yearCount");a.set("start",b-c)},_nextPage:function(){var a=this,b=a.get("start"),c=a.get("yearCount");a.set("start",b+c)},_uiSetStart:function(){var a=this;a._setYearsContent()},_uiSetYear:function(a){var b=this,c=b.findItemByField("value",a);c?b.setSelectedByField(a):b.set("start",a)},_setYearsContent:function(){for(var a=this,b=a.get("year"),c=a.get("start"),d=a.get("yearCount"),e=[],f=c;c+d>f;f++){var g=f.toString();e.push({text:g,value:f})}a.set("items",e),a.setSelectedByField(b)}},{ATTRS:{items:{view:!0,value:[]},elCls:{view:!0,value:"x-monthpicker-years"},itemCls:{value:k},year:{},start:{value:(new Date).getFullYear()},yearCount:{value:10},itemTpl:{view:!0,value:'<li class="'+k+" "+i+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:!0,value:'<div class="'+j+'">'+'<span class="'+j+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span>'+'<span class="'+j+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span>'+"</div>"+"<ul></ul>"}}},{xclass:"calendar-year-panel"}),o=d.extend({initializer:function(){var a=this,b=a.get("children"),c=new m,d=new n,e=a._createFooter();b.push(c),b.push(d),b.push(e),a.set("yearPanel",d),a.set("monthPanel",c)},bindUI:function(){var a=this;a.get("monthPanel").on("itemselected",function(b){b.item&&a.setInternal("month",b.item.value)}).on("dblclick",function(){a._successCall()}),a.get("yearPanel").on("itemselected",function(b){b.item&&a.setInternal("year",b.item.value)}).on("dblclick",function(){a._successCall()})},_successCall:function(){var a=this,b=a.get("success");b&&b.call(a)},_createFooter:function(){var a=this;return new f.Bar({elCls:g+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){a._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var b=a.get("cancel");b&&b.call(a)}}]})},_uiSetYear:function(a){this.get("yearPanel").set("year",a)},_uiSetMonth:function(a){this.get("monthPanel").setSelectedByField(a)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});return o}),define("bui/calendar/header",["bui/common"],function(a){var b=a("bui/common"),c=b.prefix,d=b.Component,e="year-text",f="month-text",g="x-datepicker-arrow",h="x-datepicker-prev",i="x-datepicker-next",j=d.Controller.extend({bindUI:function(){var a=this,b=a.get("el");b.delegate("."+g,"click",function(b){b.preventDefault();var c=$(b.currentTarget);c.hasClass(i)?a.nextMonth():c.hasClass(h)&&a.prevMonth()}),b.delegate(".x-datepicker-month","click",function(){a.fire("headerclick")})},setMonth:function(a,b){var c=this,d=c.get("year"),e=c.get("month");(a!==d||b!==e)&&(c.set("year",a),c.set("month",b),c.fire("monthchange",{year:a,month:b}))},nextMonth:function(){var a=this,b=new Date(a.get("year"),a.get("month")+1);a.setMonth(b.getFullYear(),b.getMonth())},prevMonth:function(){var a=this,b=new Date(a.get("year"),a.get("month")-1);a.setMonth(b.getFullYear(),b.getMonth())},_uiSetYear:function(a){var b=this;b.get("el").find("."+e).text(a)},_uiSetMonth:function(a){var b=this;b.get("el").find("."+f).text(a+1)}},{ATTRS:{year:{sync:!1},month:{sync:!1,setter:function(a){this.set("monthText",a+1)}},monthText:{},tpl:{view:!0,value:'<div class="'+g+" "+h+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div>'+'<div class="x-datepicker-month">'+'<div class="month-text-container">'+'<span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span>'+'<span class="'+c+"caret "+c+'caret-down"></span>'+"</div>"+"</div>"+'<div class="'+g+" "+i+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:!0,value:"x-datepicker-header"},events:{value:{monthchange:!0}}}},{xclass:"calendar-header"});return j}),define("bui/calendar/panel",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d=b.Date,e="x-datepicker-date",f="x-datepicker-today",g="x-datepicker-disabled",h="isoDate",i="x-datepicker-selected",j=6,k={deactive:"prevday",active:"active",disabled:"disabled"},l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=c.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var a=this,b=a.get("el"),c=b.find("tbody"),d=a._getPanelInnerTpl();c.empty(),$(d).appendTo(c)},_getPanelInnerTpl:function(){for(var a=this,b=a._getFirstDate(),c=[],e=0;j>e;e++){var f=d.addWeek(e,b);c.push(a._getWeekTpl(f))}return c.join("")},_getWeekTpl:function(a){for(var c=this,e=c.get("weekTpl"),f=[],g=0;g<l.length;g++){var h=d.addDay(g,a);f.push(c._getDayTpl(h))}return b.substitute(e,{daysTpl:f.join("")})},_getDayTpl:function(a){var c=this,e=c.get("dayTpl"),g=a.getDay(),i=c._isToday(a)?f:"",j=l[g],m=a.getDate(),n=c._isInRange(a)?c._isCurrentMonth(a)?k.active:k.deactive:k.disabled;return b.substitute(e,{dayOfWeek:j,dateType:n,dateNumber:m,todayCls:i,date:d.format(a,h)})},_getFirstDate:function(a,b){var c=this,e=c._getMonthFirstDate(a,b),f=e.getDay();return d.addDay(-1*f,e)},_getMonthFirstDate:function(a,b){var c=this,a=a||c.get("year"),b=b||c.get("month");return new Date(a,b)},_isCurrentMonth:function(a){return a.getMonth()===this.get("month")},_isToday:function(a){var b=new Date;return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()},_isInRange:function(a){var b=this,c=b.get("maxDate"),d=b.get("minDate");return d&&d>a?!1:c&&a>c?!1:!0},_clearSelectedDate:function(){var a=this;a.get("el").find("."+i).removeClass(i)},_findDateElement:function(a){var b=this,c=d.format(a,h),f=b.get("el").find("."+e),g=null;return c&&f.each(function(a,b){return $(b).attr("title")===c?(g=$(b),!1):void 0}),g},_setSelectedDate:function(a){var b=this,c=b._findDateElement(a);b._clearSelectedDate(),c&&c.addClass(i)}},{ATTRS:{}}),n=c.Controller.extend({initializer:function(){var a=this,b=new Date;a.get("year")||a.set("year",b.getFullYear()),a.get("month")||a.set("month",b.getMonth())},bindUI:function(){var a=this,b=a.get("el");b.delegate("."+e,"click",function(a){a.preventDefault()}),b.delegate("."+g,"mouseup",function(a){a.stopPropagation()})},performActionInternal:function(a){var b=this,c=$(a.target).closest("."+e);if(c){var f=c.attr("title");f&&(f=d.parse(f),b.get("view")._isInRange(f)&&b.set("selected",f))}},setMonth:function(a,b){var c=this,d=c.get("year"),e=c.get("month");(a!==d||b!==e)&&(c.set("year",a),c.set("month",b),c.get("view").updatePanel())},_uiSetSelected:function(a,b){var c=this;b&&b.prevVal&&d.isDateEquals(a,b.prevVal)||(c.setMonth(a.getFullYear(),a.getMonth()),c.get("view")._setSelectedDate(a),c.fire("selectedchange",{date:a}))},_uiSetMaxDate:function(a){a&&this.get("view").updatePanel()},_uiSetMinDate:function(a){a&&this.get("view").updatePanel()}},{ATTRS:{year:{view:!0},month:{view:!0},selected:{},focusable:{value:!0},dayTpl:{view:!0,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}"><a href="#" hidefocus="on" tabindex="1"><em><span>{dateNumber}</span></em></a></td>'},events:{value:{click:!1,selectedchange:!1}},maxDate:{view:!0,setter:function(a){return a?b.isString(a)?d.parse(a):a:void 0}},minDate:{view:!0,setter:function(a){return a?b.isString(a)?d.parse(a):a:void 0}},weekTpl:{view:!0,value:"<tr>{daysTpl}</tr>"},tpl:{view:!0,value:'<table class="x-datepicker-inner" cellspacing="0"><thead><tr><th  title="Sunday"><span>\u65e5</span></th><th  title="Monday"><span>\u4e00</span></th><th  title="Tuesday"><span>\u4e8c</span></th><th  title="Wednesday"><span>\u4e09</span></th><th  title="Thursday"><span>\u56db</span></th><th  title="Friday"><span>\u4e94</span></th><th  title="Saturday"><span>\u516d</span></th></tr></thead><tbody class="x-datepicker-body"></tbody></table>'},xview:{value:m}}},{xclass:"calendar-panel",priority:0});return n}),define("bui/calendar/calendar",["bui/picker","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(a){function b(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())}function c(a){return 10>a?"0"+a:a.toString()}function d(a){for(var b=[],d=0;a>d;d++)b.push({text:c(d),value:c(d)});return b}function e(a,b,d){var e=a.get("el").find("."+b);f.isNumber(d)&&(d=c(d)),e.val(d)}var f=a("bui/common"),g=f.prefix,h="x-datepicker-time",i="x-datepicker-hour",j="x-datepicker-minute",k="x-datepicker-second",l="x-timepicker",m=a("bui/picker").ListPicker,n=a("bui/calendar/monthpicker"),o=a("bui/calendar/header"),p=a("bui/calendar/panel"),q=a("bui/toolbar"),r=f.Component,s=f.Date,t=r.Controller.extend({initializer:function(){var a=this,b=a.get("children"),c=new o,d=new p,e=a.get("footer")||a._createFooter();b.push(c),b.push(d),b.push(e),a.set("header",c),a.set("panel",d),a.set("footer",e)},renderUI:function(){var a=this,b=a.get("children");if(a.get("showTime")){var c=a.get("timepicker")||a._initTimePicker();b.push(c),a.set("timepicker",c)}},bindUI:function(){var a=this,b=a.get("header"),c=a.get("panel");c.on("selectedchange",function(b){var c=b.date;s.isDateEquals(c,a.get("selectedDate"))||a.set("selectedDate",c)}),a.get("showTime")?a._initTimePickerEvent():c.on("click",function(){a.fire("accept")}),b.on("monthchange",function(b){a._setYearMonth(b.year,b.month)}),b.on("headerclick",function(){var c=a.get("monthpicker")||a._createMonthPicker();c.set("year",b.get("year")),c.set("month",b.get("month")),c.show()})},_initTimePicker:function(){var a=this,b=a.get("lockTime"),c={hour:i,minute:j,second:k};if(b)for(var d in b){var e=c[d.toLowerCase()];a.set(d,b[d]),a.get("el").find("."+e).attr("disabled","")}var f=new m({elCls:l,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:!1,align:{node:a.get("el"),points:["bl","bl"],offset:[0,-30]},trigger:a.get("el").find("."+h)});return f.render(),a._initTimePickerEvent(f),f},_initTimePickerEvent:function(a){var b=this,a=b.get("timepicker");a&&(a.get("el").delegate("a","click",function(a){a.preventDefault()}),a.on("triggerchange",function(b){var c=b.curTrigger;c.hasClass(i)?a.get("list").set("items",d(24)):a.get("list").set("items",d(60))}),a.on("selectedchange",function(a){var c=a.curTrigger,d=a.value;c.hasClass(i)?b.setInternal("hour",d):c.hasClass(j)?b.setInternal("minute",d):b.setInternal("second",d)}))},_setYearMonth:function(a,b){var c=this,d=c.get("selectedDate"),e=d.getDate();(a!==d.getFullYear()||b!==d.getMonth())&&c.set("selectedDate",new Date(a,b,e))},_createMonthPicker:function(){var a,b=this;return a=new n({render:b.get("el"),effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var a=this;b._setYearMonth(a.get("year"),a.get("month")),a.hide()},cancel:function(){this.hide()}}),b.set("monthpicker",a),b.get("children").push(a),a},_createFooter:function(){var a=this,c=this.get("showTime"),d=[];return c?(d.push({content:a.get("timeTpl")}),d.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){a.fire("accept")}}})):d.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",id:"todayBtn",listeners:{click:function(){var c=b();a.set("selectedDate",c),a.fire("accept")}}}),new q.Bar({elCls:g+"calendar-footer",children:d})},_updateTodayBtnAble:function(){var a=this;if(!a.get("showTime")){var c=a.get("footer"),d=a.get("panel").get("view"),e=b(),f=c.getItem("todayBtn");d._isInRange(e)?f.enable():f.disable()}},_uiSetSelectedDate:function(a){var b=this,c=a.getFullYear(),d=a.getMonth();b.get("header").setMonth(c,d),b.get("panel").set("selected",a),b.fire("datechange",{date:a})},_uiSetHour:function(a){e(this,i,a)},_uiSetMinute:function(a){e(this,j,a)},_uiSetSecond:function(a){e(this,k,a)},_uiSetMaxDate:function(a){var b=this;b.get("panel").set("maxDate",a),b._updateTodayBtnAble()},_uiSetMinDate:function(a){var b=this;b.get("panel").set("minDate",a),b._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{click:!1,accept:!1,datechange:!1,monthchange:!1}},showTime:{value:!1},lockTime:{},timeTpl:{value:'<input type="text" readonly class="'+h+" "+i+'" />:<input type="text" readonly class="'+h+" "+j+'" />:<input type="text" readonly class="'+h+" "+k+'" />'},selectedDate:{value:b()},hour:{value:(new Date).getHours()},minute:{value:(new Date).getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});return t}),define("bui/calendar/datepicker",["bui/common","bui/picker","bui/calendar/calendar"],function(a){var b=a("bui/common"),c=a("bui/picker").Picker,d=a("bui/calendar/calendar"),e=b.Date,f=c.extend({initializer:function(){},createControl:function(){var a=this,b=a.get("children"),c=new d({render:a.get("el"),showTime:a.get("showTime"),lockTime:a.get("lockTime"),minDate:a.get("minDate"),maxDate:a.get("maxDate"),autoRender:!0});return a.get("dateMask")||(a.get("showTime")?a.set("dateMask","yyyy-mm-dd HH:MM:ss"):a.set("dateMask","yyyy-mm-dd")),b.push(c),a.set("calendar",c),c},setSelectedValue:function(a){if(this.get("calendar")){var b=this,c=this.get("calendar"),d=e.parse(a,b.get("dateMask"));if(d=d||new Date((new Date).setSeconds(0)),c.set("selectedDate",e.getDate(d)),b.get("showTime")){var f=this.get("lockTime"),g=f&&f.hour?f.hour:d.getHours(),h=f&&f.minute?f.minute:d.getMinutes(),i=f&&f.second?f.second:d.getSeconds();c.set("hour",g),c.set("minute",h),c.set("second",i)}}},getSelectedValue:function(){if(!this.get("calendar"))return null;var a=this,b=a.get("calendar"),c=e.getDate(b.get("selectedDate"));return a.get("showTime")&&(c=e.addHour(b.get("hour"),c),c=e.addMinute(b.get("minute"),c),c=e.addSecond(b.get("second"),c)),c},getSelectedText:function(){return this.get("calendar")?e.format(this.getSelectedValue(),this._getFormatType()):""},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(a){if(!this.get("calendar"))return null;var b=this;b.get("calendar").set("maxDate",a)},_uiSetMinDate:function(a){if(!this.get("calendar"))return null;var b=this;b.get("calendar").set("minDate",a)}},{ATTRS:{showTime:{value:!1},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept"},calendar:{}}},{xclass:"datepicker",priority:0});
return f}),define("bui/editor",["bui/common","bui/form","bui/editor/editor","bui/editor/record","bui/editor/dialog"],function(a){var b=a("bui/common"),c=(a("bui/form"),b.namespace("Editor"));return b.mix(c,{Editor:a("bui/editor/editor"),RecordEditor:a("bui/editor/record"),DialogEditor:a("bui/editor/dialog")}),c}),define("bui/editor/mixin",function(){function a(a){var b=a,c=b.get("controlCfgField"),d=b.get(c),e=b.addChild(d);b.setInternal(c,e)}var b=function(){a(this)};return b.ATTRS={acceptEvent:{value:"autohide"},preventHide:{value:!0},changeSourceEvent:{value:"show triggerchange"},ignoreInputFields:{value:!0},innerValueField:{},emptyValue:{},controlCfgField:{},focusable:{value:!0},autoUpdate:{value:!0},events:{value:{accept:!1,cancel:!1}}},b.prototype={__bindUI:function(){var a=this,b=a.get("acceptEvent"),c=a.get("changeSourceEvent");b&&a.on(b,function(){return a.accept()?void 0:a.get("preventHide")?!1:(a.cancel(),void 0)}),c&&a.on(c,function(){a.setValue(a.getSourceValue()),a.get("visible")&&a.focus()})},getInnerControl:function(){var a=this,b=a.get("children");return b[0]},setValue:function(a,b){var c=this,d=c.getInnerControl();c.set("editValue",a),c.clearControlValue(),d.set(c.get("innerValueField"),a),a||c.valid(),b&&c.clearErrors()},getValue:function(){var a=this,b=a.getInnerControl();return b.get(a.get("innerValueField"))},isValid:function(){var a=this,b=a.getInnerControl();return b.isValid?b.isValid():!0},valid:function(){var a=this,b=a.getInnerControl();b.valid&&b.valid()},getErrors:function(){var a=this,b=a.getInnerControl();return b.getErrors?b.getErrors():[]},isChange:function(){var a=this,b=a.get("editValue"),c=a.getValue();return b!==c},clearValue:function(){this.clearControlValue(),this.clearErrors()},clearControlValue:function(){var a=this,b=a.getInnerControl();b.set(a.get("innerValueField"),a.get("emptyValue"))},clearErrors:function(){var a=this,b=a.getInnerControl();b.clearErrors()},getSourceValue:function(){},updateSource:function(){},handleNavEsc:function(){this.cancel()},handleNavEnter:function(a){var b=a.target;"TEXTAREA"!==b.tagName&&("BUTTON"===b.tagName&&$(b).trigger("click"),this.accept())},focus:function(){var a=this,b=a.getInnerControl();b.focus&&b.focus()},accept:function(){var a,b=this;return b.valid(),b.isValid()?(a=b.getValue(),b.get("autoUpdate")&&b.updateSource(a),0!=b.fire("beforeaccept",{value:a})?(b.fire("accept",{value:a,editValue:b.get("editValue")}),b.hide(),!0):void 0):!1},cancel:function(){this.fire("cancel"),this.clearValue(),this.close()}},b}),define("bui/editor/editor",["bui/common","bui/overlay","bui/editor/mixin"],function(a){var b=a("bui/common"),c=a("bui/overlay").Overlay;CLS_TIPS="x-editor-tips",Mixin=a("bui/editor/mixin");var d=c.extend([Mixin],{bindUI:function(){var a=this;a.getInnerControl(),a.on("validchange",function(){!a.isValid()&&a.get("visible")?a._showError(a.getErrors()):a._hideError()}),a.on("hide",function(){a._hideError()}),a.on("show",function(){a.isValid()||a._showError(a.getErrors())})},_initOverlay:function(){var a=this,b=new c({children:[{xclass:"simple-list",itemTpl:'<li><span class="x-icon x-icon-mini x-icon-error" title="{error}">!</span>&nbsp;<span>{error}</span></li>'}],elCls:CLS_TIPS,autoRender:!0});return a.set("overlay",b),b},_getErrorList:function(){var a=this,b=a.get("overlay");return b&&b.get("children")[0]},_showError:function(a){var c=this,d=c.get("overlay")||c._initOverlay(),e=c._getErrorList(),f=c.get("errorAlign"),g=b.Array.map(a,function(a){return{error:a}});e.set("items",g),f.node=c.get("el"),d.set("align",f),d.show()},_hideError:function(){var a=this,b=a.get("overlay");b&&b.hide()},getSourceValue:function(){var a=this,b=a.get("curTrigger");return b.text()},updateSource:function(a){var b=this,c=b.get("curTrigger");c&&c.length&&c.text(a)},_uiSetWidth:function(a){var b=this;if(null!=a){var c=b.getInnerControl();c.set&&c.set("width",a)}}},{ATTRS:{innerValueField:{value:"value"},emptyValue:{value:""},autoHide:{value:!0},controlCfgField:{value:"field"},defaultChildCfg:{value:{tpl:"",forceFit:!0,errorTpl:""}},defaultChildClass:{value:"form-field"},align:{value:{points:["tl","tl"]}},errorAlign:{value:{points:["bl","tl"],offset:[0,10]}},overlay:{},field:{value:{}}}},{xclass:"editor"});return d}),define("bui/editor/record",["bui/common","bui/editor/editor"],function(a){var b=a("bui/common"),c=a("bui/editor/editor"),d=c.extend({getSourceValue:function(){return this.get("record")},updateSource:function(a){var c=this,d=c.get("record");b.mix(d,a)},_uiSetRecord:function(a){this.setValue(a)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},emptyValue:{value:{}},autoHide:{value:!1},record:{value:{}},controlCfgField:{value:"form"},form:{value:{}},errorAlign:{value:{points:["tr","tl"],offset:[10,0]}},defaultChildCfg:{valueFn:function(){var a=this;return{xclass:"form",errorTpl:"",showError:!0,showChildError:!0,defaultChildCfg:{elCls:"bui-inline-block",tpl:"",forceFit:!0},buttons:[{btnCls:"button button-primary",text:"\u786e\u5b9a",handler:function(){a.accept()}},{btnCls:"button",text:"\u53d6\u6d88",handler:function(){a.cancel()}}]}}}}},{xclass:"record-editor"});return d}),define("bui/editor/dialog",["bui/overlay","bui/editor/mixin"],function(a){var b=a("bui/overlay").Dialog,c=a("bui/editor/mixin"),d=b.extend([c],{getSourceValue:function(){return this.get("record")},handleNavEnter:function(a){var b=this,c=b.get("success"),d=a.target;"TEXTAREA"!==d.tagName&&("BUTTON"===d.tagName&&$(d).trigger("click"),c?c.call(b):this.accept())},cancel:function(){this.fire("cancel"),this.clearValue(),this.close()},updateSource:function(a){var b=this,c=b.get("record");BUI.mix(c,a)},_uiSetRecord:function(a){this.setValue(a)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},record:{value:{}},emptyValue:{value:{}},controlCfgField:{value:"form"},changeSourceEvent:{value:""},defaultChildCfg:{value:{xclass:"form-horizontal"}},focusable:{value:!1},success:{value:function(){this.accept()}},cancel:{value:function(){this.cancel()}},form:{value:{}}}},{xclass:"dialog-editor"});return d}),define("bui/grid",["bui/common","bui/grid/simplegrid","bui/grid/grid","bui/grid/column","bui/grid/header","bui/grid/format","bui/grid/plugins"],function(a){var b=a("bui/common"),c=b.namespace("Grid");return b.mix(c,{SimpleGrid:a("bui/grid/simplegrid"),Grid:a("bui/grid/grid"),Column:a("bui/grid/column"),Header:a("bui/grid/header"),Format:a("bui/grid/format"),Plugins:a("bui/grid/plugins")}),c}),define("bui/grid/simplegrid",["bui/common","bui/list"],function(a){var b=a("bui/common"),c=a("bui/list"),d=b.Component,e=(d.UIBase,b.prefix),f=e+"grid",g=f+"-row",h=e+"grid-row-odd",i=e+"grid-row-even",j=e+"grid-border",k=c.SimpleListView.extend({setColumns:function(a){var c=this,d=c.get("headerRowEl");a=a||c.get("columns"),d.empty(),b.each(a,function(a){c._createColumn(a,d)})},_createColumn:function(a,c){var d=this,e=b.substitute(d.get("columnTpl"),a);$(e).appendTo(c)},getItemTpl:function(a,c){var d=this,e=d.get("columns"),f=d.get("rowTpl"),g=0===c%2?h:i,j=[];return b.each(e,function(b){var c=b.dataIndex;j.push(d._getCellTpl(b,c,a))}),f=b.substitute(f,{cellsTpl:j.join(""),oddCls:g})},_getCellTpl:function(a,c,d){var e=this,f=a.renderer,g=f?f(d[c],d):d[c],h=e.get("cellTpl");return b.substitute(h,{elCls:a.elCls,text:g})},clearData:function(){var a=this,b=a.get("itemContainer");b.empty()},showData:function(a){var c=this;b.each(a,function(a,b){c._createRow(a,b)})},_uiSetInnerBorder:function(a){var b=this,c=b.get("el");a?c.addClass(j):c.removeClass(j)},_uiSetTableCls:function(a){var b=this,c=b.get("el").find("table");c.attr("class",a)}},{ATTRS:{headerRowEl:{valueFn:function(){var a=this,b=a.get("el").find("thead");return b.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"}),l=b.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var a=this,b=a.get("itemCls"),c=b+"-hover",d=a.get("el");d.delegate("."+b,"mouseover",function(a){var b=$(a.currentTarget);b.addClass(c)}).delegate("."+b,"mouseout",function(a){var b=$(a.currentTarget);b.removeClass(c)})},showData:function(a){this.clearData(),this.set("items",a)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(a){var b=this;b.clearData(),b.get("view").setColumns(a)}},{ATTRS:{itemCls:{view:!0,value:g},tableCls:{view:!0,value:f+"-table"},columns:{view:!0,sync:!1,value:[]},tpl:{view:!0,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:!0,value:!0},rowTpl:{view:!0,value:'<tr class="'+g+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td class="'+f+'-cell {elCls}"><div class="'+f+'-cell-inner"><span class="'+f+'-cell-text">{text}</span></div></td>'},columnTpl:{view:!0,value:'<th class="'+f+'-hd {elCls}" width="{width}"><div class="'+f+'-hd-inner"><span class="'+f+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:k}}},{xclass:"simple-grid"});return l.View=k,l}),define("bui/grid/column",["bui/common"],function(a){var b=a("bui/common"),c=b.prefix,d=c+"grid-hd-title",e=c+"grid-hd-open",f="sort-",g="ASC",h="DESC",i=c+"grid-hd-menu-trigger",j="grid-hd-menu-trigger",k=b.Component.View.extend({setTplContent:function(a){var b,c=this,e=c.get("sortTpl"),f=c.get("triggerTpl"),g=c.get("el");k.superclass.setTplContent.call(c,a),b=g.find("."+d),$(e).insertAfter(b),$(f).insertAfter(b)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(a){var b=this,c=b.get("triggerTpl"),e=b.get("el"),f=e.find("."+d);a?$(c).insertAfter(f):e.find("."+i).remove()},_uiSetTitle:function(){this.get("rendered")&&this._setContent()},_uiSetDraggable:function(){this.get("rendered")&&this._setContent()},_uiSetSortable:function(){this.get("rendered")&&this._setContent()},_uiSetTpl:function(){this.get("rendered")&&this._setContent()},_uiSetSortState:function(a){var b=this,c=b.get("el"),d=f+"asc",e=f+"desc";c.removeClass(d+" "+e),"ASC"===a?c.addClass(d):"DESC"===a&&c.addClass(e)},_uiSetOpen:function(a){var b=this,c=b.get("el");a?c.addClass(e):c.removeClass(e)}},{ATTRS:{sortTpl:{view:!0,getter:function(){var a=this,b=a.get("sortable");return b?'<span class="'+c+'grid-sort-icon">&nbsp;</span>':""}},tpl:{}}}),l=b.Component.Controller.extend({_toggleSortState:function(){var a=this,b=a.get("sortState"),c=b?b===g?h:g:g;a.set("sortState",c)},performActionInternal:function(a){var b=this,c=$(a.target),d=b.get("prefixCls");c.hasClass(d+j)||b.get("sortable")&&b._toggleSortState()},_uiSetWidth:function(a){a&&this.set("originWidth",a)}},{ATTRS:{elTagName:{value:"th"},open:{view:!0,value:!1},dataIndex:{view:!0,value:""},draggable:{sync:!1,view:!0,value:!0},editor:{},focusable:{value:!1},fixed:{value:!1},id:{},renderer:{},resizable:{value:!0},sortable:{sync:!1,view:!0,value:!0},sortState:{view:!0,value:null},title:{sync:!1,view:!0,value:"&#160;"},width:{value:100},showMenu:{view:!0,value:!1},triggerTpl:{view:!0,value:'<span class="'+i+'"></span>'},tpl:{sync:!1,view:!0,value:'<div class="'+c+'grid-hd-inner">'+'<span class="'+d+'">{title}</span>'+"</div>"},cellTpl:{value:""},events:{value:{afterWidthChange:!0,afterSortStateChange:!0,afterVisibleChange:!0,click:!0,resize:!0,move:!0}},xview:{value:k}}},{xclass:"grid-hd",priority:1});return l.Empty=l.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:!0,value:!1},width:{view:!0,value:null},tpl:{view:!0,value:'<div class="'+c+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1}),l}),define("bui/grid/header",["bui/common","bui/grid/column"],function(a){var b=a("bui/common"),c=b.prefix,d=(b.namespace("Grid"),a("bui/grid/column")),e=b.Component.View,f=b.Component.Controller,g=17,h=b.UA,i=e.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(a){var b=this,c=b.get("el");void 0!==a.top&&c.scrollTop(a.top),void 0!==a.left&&c.scrollLeft(a.left)},_uiSetTableCls:function(a){var b=this,c=b.get("el").find("table");c.attr("class",a)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"}),j=f.extend({addColumn:function(a,b){var c=this,d=0,e=c.get("columns");return a=c._createColumn(a),void 0===b&&(b=e.length,d=c.get("children").length-1),e.splice(b,0,a),c.addChild(a,d),c.fire("add",{column:a,index:b}),a},removeColumn:function(a){var c,d=this,e=d.get("columns");return a=b.isNumber(a)?e[a]:a,c=b.Array.indexOf(a,e),e.splice(c,1),d.fire("remove",{column:a,index:c}),d.removeChild(a,!0)},bindUI:function(){var a=this;a._bindColumnsEvent()},initializer:function(){var a=this,b=a.get("children"),c=a.get("columns"),d=a._createEmptyColumn();$.each(c,function(d,e){var f=a._createColumn(e);b[d]=f,c[d]=f}),b.push(d),a.set("emptyColumn",d)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var a=this,b=a.getColumns(),c=0;return $.each(b,function(a,b){b.get("visible")&&(c+=b.get("el").outerWidth())}),c},getColumnOriginWidth:function(){var a=this,b=a.getColumns(),c=0;return $.each(b,function(a,b){if(b.get("visible")){var d=b.get("originWidth")||b.get("width");c+=d}}),c},getColumnByIndex:function(a){var b=this,c=b.getColumns(),d=c[a];return d},getColumn:function(a){var b=this,c=b.getColumns(),d=null;return $.each(c,function(b,c){return a(c)?(d=c,!1):void 0}),d},getColumnById:function(a){var b=this;return b.getColumn(function(b){return b.get("id")===a})},getColumnIndex:function(a){var c=this,d=c.getColumns();return b.Array.indexOf(a,d)},scrollTo:function(a){this.get("view").scrollTo(a)},_bindColumnsEvent:function(){var a=this;a.on("afterWidthChange",function(b){var c=b.target;c!==a&&a.setTableWidth()}),a.on("afterVisibleChange",function(b){var c=b.target;c!==a&&a.setTableWidth()}),a.on("afterSortStateChange",function(b){var c=b.target,d=a.getColumns(),e=b.newVal;e&&$.each(d,function(a,b){b!==c&&b.set("sortState","")})}),a.on("add",function(){a.setTableWidth()}),a.on("remove",function(){a.setTableWidth()})},_createColumn:function(a){return a instanceof d?a:(a.id||(a.id=b.guid("col")),new d(a))},_createEmptyColumn:function(){return new d.Empty},_isAllowScrollLeft:function(){var a=this,b=a.get("parent");return b&&!!b.get("height")},forceFitColumns:function(){function a(a,b){var c=a.get("el");a.set("width",b,{silent:1}),c.width(b)}var b=this,c=b.getColumns(),d=b.get("width"),e=d,f=b.getColumnOriginWidth(),h=0,i=0,j=null,k=b._isAllowScrollLeft();if(d){k&&(d-=g,e=d);var l=0;$.each(c,function(a,b){if(b.get("visible")&&b.get("resizable")&&l++,b.get("visible")&&!b.get("resizable")){var c=b.get("el").outerWidth();e-=c,f-=c}});var m=Math.floor(e/l),n=e/f;if(1===n)return;$.each(c,function(c,d){if(d.get("visible")&&d.get("resizable")){var e=b._getColumnBorderWith(d,c),f=d.get("originWidth");f||(d.set("originWidth",d.get("width")),f=d.get("width")),m=Math.floor((f+e)*n),a(d,m-e),h+=m,j=d}}),j&&(i=e-h,a(j,j.get("width")+i)),b.fire("forceFitWidth")}},_getColumnBorderWith:function(a,b){var c=a.get("el"),d=Math.round(parseFloat(c.css("border-left-width"))||0)+Math.round(parseFloat(c.css("border-right-width"))||0);return d=h.ie&&h.ie<8?0===b?1:d:d},setTableWidth:function(){var a=this,b=a.get("width"),c=0,d=null;"auto"!=b&&(a.get("forceFit")?a.forceFitColumns():a._isAllowScrollLeft()&&(c=a.getColumnsWidth(),d=a.get("emptyColumn"),c>b?d.get("el").width(g):d.get("el").width("auto")))},_uiSetWidth:function(){var a=this;a.setTableWidth()},_uiSetForceFit:function(a){var b=this;a&&b.setTableWidth()}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:!1},forceFit:{sync:!1,view:!0,value:!1},tpl:{view:!0,value:'<table cellspacing="0" class="'+c+'grid-table" cellpadding="0">'+"<thead><tr></tr></thead>"+"</table>"},tableCls:{view:!0},xview:{value:i},events:{value:{add:!1,remove:!1}}}},{xclass:"grid-header",priority:1});return j}),define("bui/grid/grid",["bui/common","bui/mask","bui/toolbar","bui/list","bui/grid/header","bui/grid/column"],function(a){function b(a){return d.isString(a)?-1!==a.indexOf("%"):!1}function c(a){return d.isNumber(a)&&(a-=E),a}var d=a("bui/common"),e=(a("bui/mask"),d.UA),f=d.Component,g=(a("bui/toolbar"),a("bui/list")),h=a("bui/grid/header"),i=a("bui/grid/column"),j=d.prefix,k=j+"grid-header-container",l=j+"grid-body",m=j+"grid-width",n=j+"grid-height",o=j+"grid-border",p=j+"grid-tbar",q=j+"grid-bbar",r=j+"grid-button-bar",s=j+"grid-strip",t=j+"grid-row",u=j+"grid-row-odd",v=j+"grid-row-even",w=j+"grid-cell",x=j+"grid-cell-inner",y="grid-td-",z=j+"grid-cell-text",A=j+"grid-cell-empty",B="17",C=j+"hidden",D="data-column-field",E=2,F=g.SimpleListView.extend({renderUI:function(){var a=this,b=a.get("el"),c=b.find("."+l);a.set("bodyEl",c),a._setTableTpl()},getItemTpl:function(a,b){var c=this,e=c._getColumns(),f=(c.get("tbodyEl"),c.get("rowTpl")),g=0===b%2?u:v,h=[];return d.each(e,function(d){var e=d.get("dataIndex");h.push(c._getCellTpl(d,e,a,b))}),c.get("useEmptyCell")&&h.push(c._getEmptyCellTpl()),f=d.substitute(f,{cellsTpl:h.join(""),oddCls:g})},findRow:function(a){var b=this;return $(b.findElement(a))},findCell:function(a,b){var c=y+a;return b.find("."+c)},resetHeaderRow:function(){if(this.get("useHeaderRow")){var a=this,b=a.get("headerRowEl"),c=a.get("tbodyEl");b&&b.remove(),b=a._createHeaderRow(),b.prependTo(c),a.set("headerRowEl",b)}},resetColumnsWidth:function(a,b){var c=this,d=c.get("headerRowEl"),e=c.findCell(a.get("id"),d);b=b||a.get("width"),e&&e.width(b),c.setTableWidth()},setTableWidth:function(a){if(!a&&b(this.get("width")))return this.get("tableEl").width("100%"),void 0;var c=this,d=c._getInnerWidth(),f=c.get("height"),g=c.get("tableEl");if(c.get("forceFit"),c.get("headerRowEl"),!b(a)){if(a=a||c._getColumnsWidth(),!d)return;if(d>=a&&(a=d,f)){var h=6==e.ie||7==e.ie?B+2:B;a=d-h}}g.width(a)},setBodyWidth:function(a){var b=this,c=b.get("bodyEl");a=a||b._getInnerWidth(),c.width(a)},setBodyHeight:function(a){var b=this,c=b.get("bodyEl"),e=a,f=c.siblings();d.each(f,function(a){"none"!==$(a).css("display")&&(e-=$(a).outerHeight())}),c.height(e)},setColumnVisible:function(a){var b=this,c=!a.get("visible"),d=a.get("id"),e=b.get("tbodyEl"),f=$("."+y+d,e);c?f.hide():f.show()},updateItem:function(a){var b=this,c=b.getItems(),e=d.Array.indexOf(a,c),f=b._getColumns(),g=null;return e>=0?(g=b.findElement(a),d.each(f,function(c){var d=b.findCell(c.get("id"),$(g)),f=d.find("."+x),h=b._getCellText(c,a,e);f.html(h)}),g):void 0},showEmptyText:function(){var a=this,b=a.get("bodyEl"),c=a.get("emptyDataTpl"),d=a.get("emptyEl");d&&d.remove();var d=$(c).appendTo(b);a.set("emptyEl",d)},clearEmptyText:function(){var a=this,b=a.get("emptyEl");b&&b.remove()},_createHeaderRow:function(){var a,b=this,c=b._getColumns(),e=b.get("tbodyEl"),f=b.get("headerRowTpl"),g=[];return $.each(c,function(a,c){g.push(b._getHeaderCellTpl(c))}),b.get("useEmptyCell")&&g.push(b._getEmptyCellTpl()),f=d.substitute(f,{cellsTpl:g.join("")}),a=$(f).appendTo(e)},_getColumnsWidth:function(){var a=this,b=a.get("columns"),c=0;return d.each(b,function(a){a.get("visible")&&(c+=a.get("el").outerWidth())}),c},_getColumns:function(){return this.get("columns")},_getCellText:function(a,b,c){var e=this,f=a.get("dataIndex"),g=a.get("cellTpl")||e.get("cellTextTpl"),h=e._getCellInnerText(a,f,b,c);return d.substitute(g,{text:h,tips:e._getTips(a,f,b)})},_getCellInnerText:function(a,b,c,d){try{var e=a.get("renderer"),f=e?e(c[b],c,d):c[b];return null==f?"":f}catch(g){throw"column:"+a.get("title")+" fomat error!"}},_getCellTpl:function(a,b,c,e){var f=this,g=f._getCellText(a,c,e),h=f.get("cellTpl");return d.substitute(h,{elCls:a.get("elCls"),id:a.get("id"),dataIndex:b,cellText:g,hideCls:a.get("visible")?"":C})},_getEmptyCellTpl:function(){return'<td class="'+w+" "+A+'">&nbsp;</td>'},_getHeaderCellTpl:function(a){var b=this,c=b.get("headerCellTpl");return d.substitute(c,{id:a.get("id"),width:a.get("width"),hideCls:a.get("visible")?"":C})},_getInnerWidth:function(){return c(this.get("width"))},_getTips:function(a,b,c){var e=a.get("showTip"),f="";return e&&(f=c[b],d.isFunction(e)&&(f=e(f,c))),f},_uiSetInnerBorder:function(a){var b=this,c=b.get("el");a?c.addClass(o):c.removeClass(o)},_setTableTpl:function(a){var b=this,c=b.get("bodyEl");a=a||b.get("tableTpl"),$(a).appendTo(c);var d=c.find("table"),e=c.find("tbody");b.set("tableEl",d),b.set("tbodyEl",e),b.set("itemContainer",e),b._setTableCls(b.get("tableCls"))},_uiSetTableCls:function(a){this._setTableCls(a)},_uiSetHeight:function(a){var b=this;b.get("bodyEl"),b.get("el").height(a),b.get("el").addClass(n)},_uiSetWidth:function(a){var b=this;b.get("el").width(a),b.setBodyWidth(b._getInnerWidth(a)),b.get("el").addClass(m)},_uiSetStripeRows:function(a){var b=this,c=a?"addClass":"removeClass";b.get("el")[c](s)},_setTableCls:function(a){var b=this,c=b.get("tableEl");c.attr("class",a)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"}),G=g.SimpleList.extend({initializer:function(){var a=this,b=a.get("render"),c=a.get("width");c||a.set("width",$(b).width())},createDom:function(){var a=this;a.get("width")&&a.get("el").addClass(m),a.get("height")&&a.get("el").addClass(n),a.get("innerBorder")&&a.get("el").addClass(o)},renderUI:function(){var a=this;a._initHeader(),a._initBars(),a._initLoadMask(),a.get("view").resetHeaderRow()},bindUI:function(){var a=this;a._bindHeaderEvent(),a._bindBodyEvent(),a._bindItemsEvent()},addColumn:function(a,b){var c=this,d=c.get("header");return d?a=d.addColumn(a,b):(a=new i(a),c.get("columns").splice(b,0,a)),a},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(a){var b=this,c=b.get("header");return d.isNumber(a)?c.getColumnByIndex(a):c.getColumnById(a)},findColumnByField:function(a){var b=this,c=b.get("header");return c.getColumn(function(b){return b.get("dataIndex")===a})},findCell:function(a,b){var c=this,d=null;return d=b instanceof $?b:c.findRow(b),d?c.get("view").findCell(a,d):null},findRow:function(a){var b=this;return b.get("view").findRow(a)},removeColumn:function(a){var b=this;b.get("header").removeColumn(a)},showData:function(a){var b=this;b.set("items",a)},resetColumns:function(){var a=this,b=a.get("store");a.get("view").resetHeaderRow(),b&&a.onLoad()},_bindScrollEvent:function(){var a=this,b=a.get("el"),c=b.find("."+l),d=a.get("header");c.on("scroll",function(){var b=c.scrollLeft(),e=c.scrollTop();d.scrollTo({left:b,top:e}),a.fire("scroll",{scrollLeft:b,scrollTop:e,bodyWidth:c.width(),bodyHeight:c.height()})})},_bindHeaderEvent:function(){var a=this,b=a.get("header"),c=a.get("view"),d=a.get("store");b.on("afterWidthChange",function(a){var d=a.target;d!==b&&c.resetColumnsWidth(d)}),b.on("afterSortStateChange",function(a){var b=a.target,c=a.newVal;c&&d&&d.sort(b.get("dataIndex"),b.get("sortState"))}),b.on("afterVisibleChange",function(d){var e=d.target;e!==b&&(c.setColumnVisible(e),a.fire("columnvisiblechange",{column:e}))}),b.on("click",function(c){var d=c.target;d!==b&&a.fire("columnclick",{column:d,domTarget:c.domTarget})}),b.on("forceFitWidth",function(){a.get("rendered")&&a.resetColumns()}),b.on("add",function(b){a.get("rendered")&&(a.fire("columnadd",{column:b.column,index:b.index}),a.resetColumns())}),b.on("remove",function(b){a.get("rendered")&&(a.resetColumns(),a.fire("columnremoved",{column:b.column,index:b.index}))})},_bindBodyEvent:function(){var a=this;a._bindScrollEvent()},_bindItemsEvent:function(){function a(a){return{record:a.item,row:a.domTarget,domTarget:a.domTarget}}var b=this;b.get("store"),b.on("itemsshow",function(){b.fire("aftershow")}),b.on("itemsclear",function(){b.fire("clear")}),b.on("itemclick",function(a){var c,d=a.domTarget,e=a.item,f=$(d).closest("."+w),g=$(d).closest("."+t);return f.length&&(c=b.fire("cellclick",{record:e,row:g[0],cell:f[0],field:f.attr(D),domTarget:d,domEvent:a.domEvent})),c===!1?c:b.fire("rowclick",{record:e,row:g[0],domTarget:d})}),b.on("itemunselected",function(c){b.fire("rowunselected",a(c))}),b.on("itemselected",function(c){b.fire("rowselected",a(c))}),b.on("itemrendered",function(c){b.fire("rowcreated",a(c))}),b.on("itemremoved",function(c){b.fire("rowremoved",a(c))}),b.on("itemupdated",function(c){b.fire("rowupdated",a(c))})},_getInnerWidth:function(a){return a=a||this.get("width"),c(a)},_initHeader:function(){var a=this,b=a.get("header"),c=a.get("el").find("."+k);b||(b=new h({columns:a.get("columns"),tableCls:a.get("tableCls"),forceFit:a.get("forceFit"),width:a._getInnerWidth(),render:c,parent:a}).render(),a.set("header",b))},_initBars:function(){var a=this,b=a.get("bbar"),c=a.get("tbar");a._initBar(b,q,"bbar"),a._initBar(c,p,"tbar")},_initBar:function(a,b,c){var e=this,g=null,h=null;if(a){if(a.xclass||a instanceof f.Controller||(a.xclass="bar",a.children=a.children||[],a.items&&(a.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:r,children:a.items}),a.items=null),a.pagingBar&&(g=e.get("store"),h={xclass:"pagingbar",store:g,pageSize:g.pageSize},a.pagingBar!==!0&&(h=d.merge(h,a.pagingBar)),a.children.push(h))),a.xclass){var i=e.get("el").find("."+b);i.show(),a.render=i,a.elTagName="div",a.autoRender=!0,a=e.addChild(a)}e.set(c,a)}return a},_initLoadMask:function(){var a=this,b=a.get("loadMask");b&&!b.show&&(b=new d.Mask.LoadMask({el:a.get("el")}),a.set("loadMask",b))},_uiSetWidth:function(a){var c=this;c.get("rendered")&&(b(a)?c.get("header").set("width","100%"):c.get("header").set("width",c._getInnerWidth(a))),c.get("view").setTableWidth()},_uiSetForceFit:function(a){var b=this;b.get("header").set("forceFit",a)},_uiSetHeight:function(a,b){var c=this,d=c.get("header");c.get("view").setBodyHeight(a),c.get("rendered")&&(c.get("forceFit")&&!b.prevVal&&(d.forceFitColumns(),c.get("view").setTableWidth()),d.setTableWidth())},onLoad:function(){var a=this,b=a.get("store");G.superclass.onLoad.call(this),a.get("emptyDataTpl")&&(b&&0==b.getCount()?a.get("view").showEmptyText():a.get("view").clearEmptyText())}},{ATTRS:{header:{},bbar:{},itemCls:{value:t},columns:{view:!0,value:[]},forceFit:{sync:!1,value:!1},emptyDataTpl:{view:!0},headerRowTpl:{view:!0,value:'<tr class="'+j+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:!0,value:'<td class="{hideCls} '+y+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:!0,value:'<tr class="'+t+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td  class="{elCls} {hideCls} '+w+" "+y+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" >'+'<div class="'+x+'" >{cellText}</div>'+"</td>"},cellTextTpl:{view:!0,value:'<span class="'+z+' " title = "{tips}">{text}</span>'},events:{value:{aftershow:!1,clear:!1,cellclick:!1,columnclick:!1,rowclick:!1,rowcreated:!1,rowremoved:!1,rowselected:!1,rowunselected:!1,scroll:!1}},stripeRows:{view:!0,value:!0},tbar:{},tableCls:{view:!0,sync:!1,value:j+"grid-table"},tableTpl:{view:!0,value:'<table cellspacing="0" cellpadding="0" ><tbody></tbody></table>'},tpl:{value:'<div class="'+p+'" style="display:none"></div><div class="'+k+'"></div><div class="'+l+'"></div><div style="display:none" class="'+q+'"></div>'},innerBorder:{sync:!1,value:!0},useEmptyCell:{view:!0,value:!0},useHeaderRow:{view:!0,value:!0},xview:{value:F}}},{xclass:"grid"});return G}),define("bui/grid/format",function(){function a(a){return 10>a?"0"+a:a}var b={dateRenderer:function(b){if(!b)return"";if(BUI.isString(b))return b;var c=null;try{c=new Date(b)}catch(d){return""}return c&&c.getFullYear?c.getFullYear()+"-"+a(c.getMonth()+1)+"-"+a(c.getDate()):""},datetimeRenderer:function(b){if(!b)return"";if(BUI.isString(b))return b;var c=null;try{c=new Date(b)}catch(d){return""}return c&&c.getFullYear?c.getFullYear()+"-"+a(c.getMonth()+1)+"-"+a(c.getDate())+" "+a(c.getHours())+":"+a(c.getMinutes())+":"+a(c.getSeconds()):""},cutTextRenderer:function(a){return function(b){return b=b||"",b.toString().length>a?b.toString().substring(0,a)+"...":b}},enumRenderer:function(a){return function(b){return a[b]||""}},multipleItemsRenderer:function(a){var c=b.enumRenderer(a);return function(a){var b=[];return a?(BUI.isArray(a)||(a=a.toString().split(",")),$.each(a,function(a,d){b.push(c(d))}),b.join(",")):""}},moneyCentRenderer:function(a){return BUI.isString(a)&&(a=parseFloat(a)),$.isNumberic(a)?(.01*a).toFixed(2):a}};return b}),function(){var a="bui/grid/plugins/";define("bui/grid/plugins",["bui/common",a+"selection",a+"cascade",a+"cellediting",a+"rowediting",a+"autofit",a+"dialogediting",a+"menu",a+"summary",a+"rownumber"],function(b){var c=b("bui/common"),d=b(a+"selection"),e={};return c.mix(e,{CheckSelection:d.CheckSelection,RadioSelection:d.RadioSelection,Cascade:b(a+"cascade"),CellEditing:b(a+"cellediting"),RowEditing:b(a+"rowediting"),DialogEditing:b(a+"dialogediting"),AutoFit:b(a+"autofit"),GridMenu:b(a+"menu"),Summary:b(a+"summary"),RowNumber:b(a+"rownumber")}),e})}(),define("bui/grid/plugins/menu",["bui/common","bui/menu"],function(a){var b=a("bui/common"),c=a("bui/menu"),d=b.prefix,e="sort-asc",f="sort-desc",g="column-setting",h=function(a){h.superclass.constructor.call(this,a)};return b.extend(h,b.Base),h.ATTRS={menu:{},activedColumn:{},triggerCls:{value:d+"grid-hd-menu-trigger"},items:{value:[{id:e,text:"\u5347\u5e8f",iconCls:"icon-arrow-up"},{id:f,text:"\u964d\u5e8f",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:g,text:"\u8bbe\u7f6e\u5217",iconCls:"icon-list-alt"}]}},b.augment(h,{initializer:function(a){var b=this;b.set("grid",a)},renderUI:function(a){var c=this,d=a.get("columns");b.each(d,function(a){c._addShowMenu(a)})},bindUI:function(a){var b=this;a.on("columnadd",function(a){b._addShowMenu(a.column)}),a.on("columnclick",function(a){var c,d=$(a.domTarget),e=a.column;b.set("activedColumn",e),d.hasClass(b.get("triggerCls"))&&(c=b.get("menu")||b._initMenu(),c.set("align",{node:d,points:["bl","tl"],offset:[0,0]}),c.show(),b._afterShow(e,c))})},_addShowMenu:function(a){a.get("fixed")||a.set("showMenu",!0)},_afterShow:function(a,b){var c=this;c.get("grid"),b=b||c.get("menu"),c._resetSortMenuItems(a,b),c._resetColumnsVisible(b)},_resetColumnsVisible:function(a){var b=this,c=a.findItemById(g),d=c.get("subMenu")||b._initColumnsMenu(c),e=b.get("grid").get("columns");d.removeChildren(!0),$.each(e,function(a,b){if(!b.get("fixed")){var c={xclass:"context-menu-item",text:b.get("title"),column:b,iconCls:"icon"},e=d.addChild(c);b.get("visible")&&e.set("selected",!0)}})},_resetSortMenuItems:function(a,b){var c=b.findItemById(e),d=b.findItemById(f);a.get("sortable")?(c.set("disabled",!1),d.set("disabled",!1)):(c.set("disabled",!0),d.set("disabled",!0))},_initMenu:function(){var a,b=this,d=b.get("menu");return d||(a=b.get("items"),$.each(a,function(a,b){b.xclass||(b.xclass="context-menu-item")}),d=new c.ContextMenu({children:a,elCls:"grid-menu"}),b._initMenuEvent(d),b.set("menu",d)),d},_initMenuEvent:function(a){var b=this;a.on("itemclick",function(a){var c=a.item,d=c.get("id"),g=b.get("activedColumn");d===e?g.set("sortState","ASC"):d===f&&g.set("sortState","DESC")}),a.on("afterVisibleChange",function(a){var c=a.newVal,d=b.get("activedColumn");c&&d?d.set("open",!0):d.set("open",!1)})},_initColumnsMenu:function(a){var b=new c.ContextMenu({multipleSelect:!0,elCls:"grid-column-menu"});return a.set("subMenu",b),b.on("itemclick",function(a){var b=a.item,c=b.get("column"),d=b.get("selected");d?c.set("visible",!0):c.set("visible",!1)}),b},destructor:function(){var a=this,b=a.get("menu");b&&b.destroy(),a.off(),a.clearAttrVals()}}),h}),define("bui/grid/plugins/cascade",["bui/common"],function(a){var b=a("bui/common"),c=b.prefix,d="data-record",e=c+"grid-cascade",f=e+"-expand",g=e+"-row",h=e+"-cell",i=e+"-collapse",j=function(a){j.superclass.constructor.call(this,a)};return b.extend(j,b.Base),j.ATTRS={width:{value:40},cellInner:{value:'<span class="'+e+'"><i class="'+e+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+g+'"><td class="'+h+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]},b.augment(j,{initializer:function(a){var b=this,c={title:"",elCls:"center",width:b.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:b.get("cellInner")};a.addColumn(c,0),a.set("innerBorder",!1),b.set("grid",a)},bindUI:function(a){var b=this;
a.on("cellclick",function(a){var c=$(a.domTarget),d=c.closest("."+e);d.length&&(d.hasClass(f)?b._onCollapse(a.record,a.row,d):b._onExpand(a.record,a.row,d))}),a.on("columnvisiblechange",function(){b._resetColspan()}),a.on("rowremoved",function(a){b.remove(a.record)}),a.on("clear",function(){b.removeAll()})},expandAll:function(){var a=this,b=a.get("grid"),c=b.getRecords();$.each(c,function(b,c){a.expand(c)})},expand:function(a){var b=this,c=b.get("grid"),d=c.findRow(a);d&&b._onExpand(a,d)},collapse:function(a){var b=this,c=b.get("grid"),d=c.findRow(a);d&&b._onCollapse(a,d)},removeAll:function(){var a=this,b=a._getAllCascadeRows();b.each(function(b,c){a._removeCascadeRow(c)})},remove:function(a){var b=this,c=b._findCascadeRow(a);c&&b._removeCascadeRow(c)},collapseAll:function(){var a=this,b=a.get("grid"),c=b.getRecords();$.each(c,function(b,c){a.collapse(c)})},_getRowRecord:function(a){return $(a).data(d)},_removeCascadeRow:function(a){this.fire("removed",{record:$(a).data(d),row:a}),$(a).remove()},_findCascadeRow:function(a){var b=this,c=b._getAllCascadeRows(),d=null;return $.each(c,function(c,e){return b._getRowRecord(e)===a?(d=e,!1):void 0}),d},_getAllCascadeRows:function(){var a=this,b=a.get("grid");return b.get("el").find("."+g)},_getCascadeRow:function(a){var b=$(a).next();return b.hasClass(g)?b:null},_getRowContent:function(a){var b=this,c=b.get("renderer"),d=c?c(a):"";return d},_createCascadeRow:function(a,b){var c=this,e=c.get("rowTpl"),f=c._getRowContent(a),g=$(e).insertAfter(b);return g.find("."+h).append($(f)),g.data(d,a),g},_onExpand:function(a,b,c){var d=this,g=d._getCascadeRow(b);d._getColumnCount(b),c=c||$(b).find("."+e),c.addClass(f),g&&g.length||(g=d._createCascadeRow(a,b)),$(g).removeClass(i),d._setColSpan(g,b),d.fire("expand",{record:a,row:g[0]})},_onCollapse:function(a,b,c){var d=this,g=d._getCascadeRow(b);c=c||$(b).find("."+e),c.removeClass(f),(g||!g.length)&&($(g).addClass(i),d.fire("collapse",{record:a,row:g[0]}))},_getColumnCount:function(a){return $(a).children().filter(function(){return"none"!==$(this).css("display")}).length},_setColSpan:function(a,b){b=b||$(a).prev();var c=this,d=c._getColumnCount(b);$(a).find("."+h).attr("colspan",d)},_resetColspan:function(){var a=this,b=a._getAllCascadeRows();$.each(b,function(b,c){a._setColSpan(c)})},destructor:function(){var a=this;a.removeAll(),a.off(),a.clearAttrVals()}}),j}),define("bui/grid/plugins/selection",["bui/common"],function(a){function b(a){b.superclass.constructor.call(this,a)}var c=a("bui/common"),d=c.prefix,e=d+"grid-checkBox",f="x-grid-checkbox",g=d+"grid-radio";c.extend(b,c.Base),b.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+e+'-container"><span class="'+f+'"></span></div>'}},c.augment(b,{createDom:function(a){var b=this,c={title:"",width:b.get("width"),fixed:!0,resizable:!1,sortable:!1,tpl:'<div class="'+d+'grid-hd-inner">'+b.get("cellInner"),cellTpl:b.get("cellInner")},e=a.addColumn(c,0);a.set("multipleSelect",!0),b.set("column",e)},bindUI:function(a){var b=this,c=b.get("column"),d=c.get("el"),e=d.find("."+f);e.on("click",function(){var b=d.hasClass("checked");b?(a.clearSelection(),d.removeClass("checked")):(a.setAllSelection(),d.addClass("checked"))}),a.on("rowunselected",function(){d.removeClass("checked")}),a.on("clear",function(){d.removeClass("checked")})}});var h=function(a){h.superclass.constructor.call(this,a)};c.extend(h,c.Base),h.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+d+'grid-radio-container"><input  class="'+g+'" type="radio"></div>'}},c.augment(h,{createDom:function(a){var b=this,c={title:"",width:b.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:b.get("cellInner")},d=a.addColumn(c,0);a.set("multipleSelect",!1),b.set("column",d)},bindUI:function(a){var b=this;a.on("rowselected",function(a){b._setRowChecked(a.row,!0)}),a.on("rowunselected",function(a){b._setRowChecked(a.row,!1)})},_setRowChecked:function(a,b){var c=$(a),d=c.find("."+g);d.attr("checked",b)}});var i={CheckSelection:b,RadioSelection:h};return i}),define("bui/grid/plugins/summary",["bui/common"],function(a){function b(a){return a>0?'<td class="'+n+'" colspan="'+a+'">&nbsp;</td>':""}function c(a,b){return'<td class="'+n+" "+l+b+'">'+d(a)+"</td>"}function d(a){return'<div class="'+k+'" >'+'<span class="'+m+' ">'+a+"</span>"+"</div>"}function e(){return'<td class="'+n+" "+n+'-empty">&nbsp;</td>'}var f=a("bui/common"),g=f.prefix,h=g+"grid-row",i=g+"grid-body",j=g+"grid-summary-row",k=g+"grid-cell-inner",l="grid-td-",m=g+"grid-cell-text",n=g+"grid-cell",o=function(a){o.superclass.constructor.call(this,a)};return o.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"\u67e5\u8be2\u5408\u8ba1"},pageSummaryTitle:{value:"\u672c\u9875\u5408\u8ba1"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}},f.extend(o,f.Base),f.augment(o,{initializer:function(a){var b=this;b.set("grid",a)},renderUI:function(a){var b=this,c=a.get("el").find("."+i),d=c.find("table"),e=$(b.get("footerTpl")).appendTo(d);b.set("footerEl",e)},bindUI:function(a){var b=this,c=a.get("store");c&&(c.on("beforeprocessload",function(a){b._processSummary(a.data)}),c.on("add",function(){b.resetPageSummary()}),c.on("remove",function(){b.resetPageSummary()}),c.on("update",function(){b.resetPageSummary()})),a.on("aftershow",function(){b.resetSummary()}),a.get("header").on("afterVisibleChange",function(){b.resetSummary()})},_processSummary:function(a){var b=this,c=b.get("footerEl");if(c.empty(),a){var d=a[b.get("pageSummaryField")],e=a[b.get("summaryField")];b.set("pageSummary",d),b.set("summary",e)}},resetPageSummary:function(){var a=this,b=a.get("grid"),c=b.get("columns"),d=a._calculatePageSummary(),e=a.get("pageEl");a.set("pageSummary",d),e&&(f.each(c,function(b){if(b.get("summary")&&b.get("visible")){var c=b.get("id"),f=e.find("."+l+c),g=a._getSummaryCellText(b,d);f.find("."+m).text(g)}}),a._updateFirstRow(e,a.get("pageSummaryTitle")))},resetSummary:function(a,b){var c=this,d=c.get("footerEl"),e=null;d.empty(),a=a||c.get("pageSummary"),a||(a=c._calculatePageSummary(),c.set("pageSummary",a)),b=b||c.get("summary"),e=c._creatSummaryRow(a,c.get("pageSummaryTitle")),c.set("pageEl",e),c._creatSummaryRow(b,c.get("summaryTitle"))},_creatSummaryRow:function(a,b){if(!a)return null;var c=this,d=c.get("footerEl"),e=c._getSummaryTpl(a),f=$(e).appendTo(d);return c._updateFirstRow(f,b),f},_updateFirstRow:function(a,b){var c=a.find("td").first(),e=c.find("."+k);if(e.length){var f=b+": ";text=e.text(),-1===text.indexOf(f)&&(text=f+text),c.html(d(text))}else c.html(d(b+":"))},_getSummaryTpl:function(a){var d=this,f=d.get("grid"),g=f.get("columns"),i=[],k=-1,l=-1,m=null;return $.each(g,function(e,f){if(f.get("visible")&&(l+=1,f.get("summary"))){i.push(b(l-k-1));var g=d._getSummaryCellText(f,a),h=c(g,f.get("id"));i.push(h),k=l}}),k!==l&&i.push(b(l-k)),m=['<tr class="',j," ",h,'">',i.join(""),e(),"</tr>"].join("")},_getSummaryCellText:function(a,b){var c=b[a.get("dataIndex")],d=null==c?"":c,e=a.get("renderer"),f=e?e(d,b):d;return f},_calculatePageSummary:function(){var a=this,b=a.get("grid"),c=b.get("store"),d=b.get("columns"),e={};return f.each(d,function(a){if(a.get("summary")){var b=a.get("dataIndex");e[b]=c.sum(b)}}),e}}),o}),define("bui/grid/plugins/editing",function(){function a(b){a.superclass.constructor.call(this,b)}var b=BUI.prefix+"grid-cell-inner",c=BUI.prefix+"grid-cell-error";return BUI.extend(a,BUI.Base),a.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:!0},errorTpl:{value:'<span class="x-icon '+c+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:!1},record:{},curEditor:{},hasValid:{},editors:{value:[]},triggerCls:{},triggerSelected:{value:!0}},BUI.augment(a,{initializer:function(a){var b=this;b.set("grid",a),b.initEditing(a)},renderUI:function(){var a=this,b=a.get("grid");BUI.use("bui/editor",function(c){a.initEditors(c),a._initGridEvent(b),a.set("isInitEditors",!0)})},initEditing:function(){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(a){function b(a,b){c.get("hasValid")&&c.validRecord(a,c.getFields(),$(b))}var c=this,d=a.get("header");a.on("cellclick",function(a){var b=null,d=a.domTarget,e=c.get("triggerCls"),f=c._getCurEditor();return f&&f.get("acceptEvent")?(f.accept(),f.hide()):f&&f.cancel(),b=c.getEditor(a.field),b&&$(d).closest("."+e).length&&(c.showEditor(b,a),!c.get("triggerSelected"))?!1:void 0}),a.on("rowcreated",function(a){b(a.record,a.row)}),a.on("rowremoved",function(a){c.get("record")==a.record&&c.cancel()}),a.on("rowupdated",function(a){b(a.record,a.row)}),a.on("scroll",function(a){var b=c._getCurEditor();if(b){var d=b.get("align"),e=d.node,f=e.position();f.top<0||f.top>a.bodyHeight?b.hide():(b.set("align",d),b.show())}}),d.on("afterVisibleChange",function(a){if(a.target&&a.target!=d){var b=a.target;c.onColumnVisibleChange(b)}})},initEditors:function(a){var b=this,c=b.get("grid"),d=[],e=c.get("columns");BUI.each(e,function(a){var c=b.getFieldConfig(a);c&&(c.name=a.get("dataIndex"),c.id=a.get("id"),c.validator&&(c.validator=b.wrapValidator(c.validator)),d.push(c))});var f=b.getEditorCfgs(d);BUI.each(f,function(c){b.initEidtor(c,a)})},getFieldConfig:function(a){return a.get("editor")},wrapValidator:function(a){var b=this;return function(c){var d=b.get("record");return a(c,d)}},onColumnVisibleChange:function(){},getEditorCfgs:function(){},getEditorConstructor:function(a){return a.Editor},initEidtor:function(a,b){var c=this,d=c.getEditorConstructor(b),e=new d(a);return e.render(),c.get("editors").push(e),c.bindEidtor(e),e},bindEidtor:function(a){var b=this,c=b.get("grid"),d=c.get("store");a.on("accept",function(){var c=b.get("record");b.updateRecord(d,c,a),b.set("curEditor",null)}),a.on("cancel",function(){b.set("curEditor",null)})},getEditor:function(){},getAlignNode:function(){},getEditValue:function(){},showEditor:function(a,b){var c=this,d=c.getEditValue(b),e=c.getAlignNode(b);if(c.beforeShowEditor(a,b),c.set("record",b.record),a.setValue(d),e){var f=c.get("align");f.node=e,a.set("align",f)}a.show(),c.focusEditor(a,b.field),c.set("curEditor",a)},focusEditor:function(a){a.focus()},beforeShowEditor:function(){},_createEditOptions:function(a,b){var c=this,d=c.get("grid"),e=d.findRow(a),f=d.findColumnByField(b),g=d.findCell(f.get("id"),e);return{record:a,field:b,cell:g[0],row:e[0]}},valid:function(){var a=this,b=a.get("grid"),c=b.get("store");if(c){var d=c.getResult();BUI.each(d,function(b){a.validRecord(b,a.getFields())})}a.set("hasValid",!0)},isValid:function(){var a=this,b=a.get("grid");return a.get("hasValid")||a.valid(),!b.get("el").find("."+c).length},clearErrors:function(){var a=this,b=a.get("grid");b.get("el").find("."+c).remove()},getFields:function(){},validRecord:function(a,b,c){var d=this,e=[];d.setInternal("record",a),b=b||d.getFields(),BUI.each(b,function(b){var c=b.get("name"),d=a[c]||"",f=b.getValidError(d);f&&e.push({name:c,error:f,id:b.get("id")})}),d.showRecordError(a,e,c)},showRecordError:function(a,b,c){var d=this,e=d.get("grid");c=c||e.findRow(a),c&&(d._clearRowError(c),BUI.each(b,function(a){var b=e.findCell(a.id,c);d._showCellError(b,a.error)}))},updateRecord:function(){},_clearRowError:function(a){a.find("."+c).remove()},_showCellError:function(a,c){var d=this,e=BUI.substitute(d.get("errorTpl"),{error:c}),f=a.find("."+b);$(e).appendTo(f)},edit:function(a,b){var c=this,d=c._createEditOptions(a,b),e=c.getEditor(b);c.showEditor(e,d)},cancel:function(){var a=this,b=a.get("editors");BUI.each(b,function(a){a.get("visible")&&a.cancel()}),a.set("curEditor",null),a.set("record",null)},destructor:function(){var a=this,b=a.get("editors");BUI.each(b,function(a){a.destroy||a.destroy()}),a.off(),a.clearAttrVals()}}),a}),define("bui/grid/plugins/cellediting",["bui/grid/plugins/editing"],function(a){var b=a("bui/grid/plugins/editing"),c=BUI.prefix+"grid-body",d=BUI.prefix+"grid-cell",e=function(a){e.superclass.constructor.call(this,a)};return e.ATTRS={triggerCls:{value:d}},BUI.extend(e,b),BUI.augment(e,{getEditorCfgs:function(a){var b=this,d=b.get("grid"),e=d.get("el").find("."+c),f=[];return BUI.each(a,function(a){var b={field:a,changeSourceEvent:null,hideExceptNode:e,autoUpdate:!1,preventHide:!1,editableFn:a.editableFn};"checkbox"===a.xtype&&(b.innerValueField="checked"),f.push(b)}),f},getEditor:function(a){if(!a)return null;var b=this,c=b.get("editors"),d=null;return BUI.each(c,function(b){return b.get("field").get("name")===a?(d=b,!1):void 0}),d},beforeShowEditor:function(a,b){var c=this,d=$(b.cell);c.resetWidth(a,d.outerWidth()),c._makeEnable(a,b)},_makeEnable:function(a,b){var c,d,e,f=a.get("editableFn");BUI.isFunction(f)&&(c=b.field,e=b.record,e&&c&&(d=f(e[c],e),d?a.get("field").enable():a.get("field").disable()))},resetWidth:function(a,b){a.set("width",b)},updateRecord:function(a,b,c){var d=c.getValue(),e=c.get("field").get("name"),f=b[e];d=BUI.isDate(d)?d.getTime():d,f!==d&&a.setValue(b,e,d)},getAlignNode:function(a){return $(a.cell)},getFields:function(){var a=[],b=this,c=b.get("editors");return BUI.each(c,function(b){a.push(b.get("field"))}),a},getEditValue:function(a){if(a.record&&a.field){var b=a.record[a.field];return null==b?"":b}return""}}),e}),define("bui/grid/plugins/rowediting",["bui/common","bui/grid/plugins/editing"],function(a){var b=a("bui/common"),c=a("bui/grid/plugins/editing"),d=b.prefix+"grid-row",e=function(a){e.superclass.constructor.call(this,a)};return e.ATTRS={align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:d}},b.extend(e,c),b.augment(e,{getEditorCfgs:function(a){var b=[];return b.push({changeSourceEvent:null,autoUpdate:!1,form:{children:a,buttonBar:{elCls:"centered toolbar"}}}),b},wrapValidator:function(a){var b=this;return function(c){var d=b.get("curEditor"),e=d?d.getValue():b.get("record");return e?a(c,e):void 0}},focusEditor:function(a,b){var c=a.get("form"),d=c.getField(b);d&&d.focus()},getFieldConfig:function(a){var b=a.get("editor");if(b)return"checkbox"===b.xtype&&(b.innerValueField="checked"),b;var c={xtype:"plain"};return a.get("dataIndex")&&a.get("renderer")&&(c.renderer=a.get("renderer")),c},updateRecord:function(a,c,d){var e=d.getValue();b.each(e,function(a,c){b.isDate(a)&&(e[c]=a.getTime())}),b.mix(c,e),a.update(c)},getEditor:function(){var a=this,b=a.get("editors");return b[0]},onColumnVisibleChange:function(a){var b=this,c=a.get("id"),d=b.getEditor(),e=d.getChild(c,!0);e&&e.set("visible",a.get("visible"))},beforeShowEditor:function(a,c){var d=this,e=d.get("grid"),f=e.get("columns"),g=a.get("form"),h=$(c.row);a.set("width",h.width()),b.each(f,function(a){if(a.get("visible")){var b=a.get("dataIndex"),c=g.getField(b),d=a.get("el").outerWidth()-c.getAppendWidth();c.set("width",d)}else c.set("visible",!1)})},getEditValue:function(a){return a.record},getEditorConstructor:function(a){return a.RecordEditor},getAlignNode:function(a){return $(a.row)},getFields:function(){var a=this,b=a.get("editors");return b[0].get("form").get("children")}}),e}),define("bui/grid/plugins/dialogediting",["bui/common"],function(a){function b(a){b.superclass.constructor.call(this,a)}var c=a("bui/common"),d="add",e="edit";return b.ATTRS={record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:!1}},editType:{}},c.extend(b,c.Base),c.augment(b,{initializer:function(a){var b=this;b.set("grid",a),c.use("bui/editor",function(a){b._initEditor(a)})},bindUI:function(a){var b=this,c=b.get("triggerCls");c&&a.on("cellclick",function(d){var e=$(d.domTarget),f=b.get("editor");return e.hasClass(c)&&f&&(b.edit(d.record),a.get("multipleSelect"))?!1:void 0})},_initEditor:function(a){var b=this,d=b.get("contentId"),e=$("#"+d).find("form"),f=b.get("editor"),g=c.merge(f,{contentId:d,form:{srcNode:e}});f=new a.DialogEditor(g),b._bindEditor(f),b.set("editor",f),b.set("form",f.get("form"))},_bindEditor:function(a){var b=this;a.on("accept",function(){var c=a.get("form"),d=c.serializeToObject();b.saveRecord(d)})},edit:function(a){var b=this;b.set("editType",e),b.showEditor(a)},add:function(a,b){var c=this;c.set("editType",d),c.set("curIndex",b),c.showEditor(a)},saveRecord:function(a){var b=this,e=b.get("grid"),f=b.get("editType"),g=b.get("curIndex"),h=e.get("store"),i=b.get("record");c.mix(i,a),f==d?null!=g?h.addAt(i,g):h.add(i):h.update(i)},showEditor:function(a){var b=this,c=b.get("editor");c.show(),c.setValue(a,!0),b.set("record",a),b.fire("recordchange",{record:a,editType:b.get("editType")})},cancel:function(){var a=this,b=a.get("editor");b.cancel()},destructor:function(){var a=this,b=a.get("editor");b&&b.destroy(),a.off(),a.clearAttrVals()}}),b}),define("bui/tree",["bui/common","bui/tree/treemixin","bui/tree/treelist","bui/tree/treemenu"],function(a){var b=a("bui/common"),c=b.namespace("Tree");return b.mix(c,{TreeList:a("bui/tree/treelist"),Mixin:a("bui/tree/treemixin"),TreeMenu:a("bui/tree/treemenu")}),c}),define("bui/tree/treemixin",["bui/common","bui/data"],function(a){function b(a,b){return c.isString(b)&&(b=a.findNode(b)),b}var c=a("bui/common"),d=a("bui/data"),e="expanded",f="loading",g="checked",h="partial-checked",i={NONE:"none",ALL:"all",CUSTOM:"custom",ONLY_LEAF:"onlyLeaf"},j="x-tree-icon",k="x-tree-elbow",l="x-tree-show-line",m=k+"-",n=j+"-wraper",o=m+"line",p=m+"end",q=m+"empty",r=m+"expander",s=j+"-checkbox",t=j+"-radio",u=r+"-end",v=function(){};return v.ATTRS={store:{getter:function(a){if(!a){var b=this,c=new d.TreeStore({root:b.get("root"),data:b.get("nodes")});return b.setInternal("store",c),c}return a}},root:{},nodes:{sync:!1},iconContainer:{},iconWraperTpl:{value:'<span class="'+n+'">{icons}</span>'},showLine:{value:!1},showIcons:{value:!0},iconTpl:{value:'<span class="x-tree-icon {cls}"></span>'},leafCls:{value:m+"leaf"},dirCls:{value:m+"dir"},checkType:{value:"custom"},accordion:{value:!1},multipleCheck:{value:!0},checkedField:{valueFn:function(){return this.getStatusField("checked")}},checkableField:{value:"checkable"},itemStatusFields:{value:{expanded:"expanded",disabled:"disabled",checked:"checked"}},dirSelectable:{value:!0},showRoot:{value:!1},events:{value:{expanded:!1,collapsed:!1,checkedchange:!1}},expandEvent:{value:"itemdblclick"},expandAnimate:{value:!1},collapseEvent:{value:"itemdblclick"},startLevel:{value:1}},c.augment(v,{collapseAll:function(){var a=this,b=a.get("view").getAllElements();c.each(b,function(b){var c=a.getItemByElement(b);c&&a._collapseNode(c,b,!0)})},collapseNode:function(a){var b,d=this;c.isString(a)&&(a=d.findNode(a)),a&&(b=d.findElement(a),d._collapseNode(a,b))},expandAll:function(){var a=this,b=a.get("view").getAllElements();c.each(b,function(b){var c=a.getItemByElement(b);a._expandNode(c,b,!0)})},expandNode:function(a,b){var d,e=this;c.isString(a)&&(a=e.findNode(a)),a&&(a.parent&&!e.isExpanded(a.parent)&&e.expandNode(a.parent),d=e.findElement(a),e._expandNode(a,d,b))},expandPath:function(a,b,c){if(a){c=c||0;var d,e,f,g,h=this,i=h.get("store"),j=a.split(",");for(d=h.findNode(j[c]),f=c+1;f<j.length;f++)if(g=j[f],e=h.findNode(g,d),d&&e)h.expandNode(d),d=e;else if(d&&b){i.load({id:d.id},function(){e=h.findNode(g,d),e&&h.expandPath(a,b,f)});break}}},findNode:function(a,b){return this.get("store").findNode(a,b)},getCheckedLeaf:function(a){var b=this,c=b.get("store");return c.findNodesBy(function(a){return a.leaf&&b.isChecked(a)},a)},getCheckedNodes:function(a){var b=this,c=b.get("store");return c.findNodesBy(function(a){return b.isChecked(a)},a)},isItemSelectable:function(a){var b=this,c=b.get("dirSelectable"),d=a;return!d||c||d.leaf?!0:!1},isExpanded:function(a){if(!a||a.leaf)return!1;var b,d=this;return d._isRoot(a)&&!d.get("showRoot")?!0:(c.isString(a)&&(item=d.getItem(a)),b=d.findElement(a),this._isExpanded(a,b))},isChecked:function(a){return a?!!a[this.get("checkedField")]:!1},toggleExpand:function(a){var b,d=this;c.isString(a)&&(item=d.getItem(a)),b=d.findElement(a),d._toggleExpand(a,b)},setNodeChecked:function(a,d,e){if(e=null==e?!0:e,a){var f,h,i=this,j=i.get("multipleCheck");if(a=b(this,a),a&&(f=a.parent,i.isCheckable(a))){if(i.isChecked(a)!==d||i.hasStatus(a,"checked")!==d){if(h=i.findElement(a),h?(i.setItemStatus(a,g,d,h),j?i._resetPatialChecked(a,d,d,h):d&&f&&i.isChecked(f)!=d&&i.setNodeChecked(f,d,!1)):i.isItemDisabled(a)||i.setStatusValue(a,"checked",d),f&&(i.isChecked(f)!=d?i._resetParentChecked(f):j&&i._resetPatialChecked(f,null,null,null,!0)),d&&!j&&(i.isChecked(f)||f==i.get("root"))){var k=f.children;c.each(k,function(b){b!==a&&i.isChecked(b)&&i.setNodeChecked(b,!1)})}i.fire("checkedchange",{node:a,element:h,checked:d})}!a.leaf&&e&&c.each(a.children,function(a,b){(j||!d||!j&&0==b)&&i.setNodeChecked(a,d,e)})}}},setChecked:function(a){this.setNodeChecked(a,!0)},clearAllChecked:function(){var a=this,b=a.getCheckedNodes();c.each(b,function(b){a.setNodeChecked(b,!1)})},_initRoot:function(){var a,b,d=this,e=d.get("store"),f=d.get("showRoot");e&&(a=e.get("root"),d.setInternal("root",a),b=f?[a]:a.children,c.each(b,function(a){d._initChecked(a,!0)}),d.clearItems(),d.addItems(b))},_initChecked:function(a,b){var d,e=this,f=e.get("checkType"),g=e.get("checkedField"),h=e.get("multipleCheck"),j=e.get("checkableField");return f===i.NONE?(a[j]=!1,a[g]=!1,void 0):f===i.ONLY_LEAF?(a.leaf?a[j]=!0:(a[j]=!1,a[g]=!1,b&&c.each(a.children,function(a){e._initChecked(a,b)})),void 0):(f===i.CUSTOM&&null==a[j]&&(a[j]=null!=a[g]),f===i.ALL&&(a[j]=!0),a&&e.isCheckable(a)&&(d=a.parent,e.isChecked(a)||(d&&e.isChecked(d)&&(h||!e._hasChildChecked(d))&&e.setStatusValue(a,"checked",!0),(a.children&&a.children.length&&e._isAllChildrenChecked(a)||!h&&e._hasChildChecked(a))&&e.setStatusValue(a,"checked",!0)),b&&c.each(a.children,function(a){e._initChecked(a,b)})),void 0)},_resetPatialChecked:function(a,b,c,d,e){if(!a||a.leaf)return!0;var c,f=this;return(b=null==b?f.isChecked(a):b)?(f.setItemStatus(a,h,!1,d),void 0):(c=null==c?f._hasChildChecked(a):c,f.setItemStatus(a,h,c,d),e&&a.parent&&f._resetPatialChecked(a.parent,!1,c?c:null,null,e),void 0)},_resetParentChecked:function(a){if(this.isCheckable(a)){var b=this,c=b.get("multipleCheck"),d=c?b._isAllChildrenChecked(a):b._hasChildChecked(a);b.setStatusValue(a,"checked",d),b.setNodeChecked(a,d,!1),c&&b._resetPatialChecked(a,d,null,null)}},__bindUI:function(){var a=this,b=(a.get("el"),a.get("multipleCheck"));a.on("itemclick",function(b){var c=$(b.domTarget),d=b.element,e=b.item;if(c.hasClass(r))return a._toggleExpand(e,d),!1;if(c.hasClass(s)){var f=a.isChecked(e);a.setNodeChecked(e,!f)}else c.hasClass(t)&&a.setNodeChecked(e,!0)}),a.on("itemrendered",function(c){var d=c.item,e=c.domTarget;a._resetIcons(d,e),a.isCheckable(d)&&b&&a._resetPatialChecked(d,null,null,e),a._isExpanded(d,e)&&a._showChildren(d)}),a._initExpandEvent()},_initExpandEvent:function(){function a(a){return function(c){var d=$(c.domTarget),e=c.element,f=c.item;d.hasClass(r)||b[a](f,e)}}var b=this,c=(b.get("el"),b.get("expandEvent")),d=b.get("collapseEvent");c==d?b.on(c,a("_toggleExpand")):(c&&b.on(c,a("_expandNode")),d&&b.on(d,a("_collapseNode")))},_isForceChecked:function(){var a=this,b=a.get("multipleCheck");return b?a._isAllChildrenChecked():_isForceChecked()},_isAllChildrenChecked:function(a){if(!a||a.leaf)return!1;var b=this,d=a.children,e=!0;return c.each(d,function(a){return e=e&&b.isChecked(a),e?void 0:!1}),e},_hasChildChecked:function(a){if(!a||a.leaf)return!1;var b=this;return 0!=b.getCheckedNodes(a).length},_isRoot:function(a){var b=this,c=b.get("store");return c&&c.get("root")==a?!0:!1},_setLoadStatus:function(a,b,c){var d=this;d.setItemStatus(a,f,c,b)},_beforeLoadNode:function(a){var b,d=this;c.isString(a)&&(a=d.findNode(a)),b=d.findElement(a),b?(d._collapseNode(a,b),d._setLoadStatus(a,b,!0)):a&&c.each(a.children,function(a){d._removeNode(a)})},onBeforeLoad:function(a){var b=this,c=a.params,d=c.id,e=b.findNode(d)||b.get("root");b._beforeLoadNode(e)},_addNode:function(a,b){var c,d,e,f=this,g=a.parent;f._initChecked(a,!0),g?(f.isExpanded(g)&&(c=g.children.length,e=f._getInsetIndex(a),f.addItemAt(a,e),b==c-1&&b>0&&(d=g.children[b-1],f._updateIcons(d))),f._updateIcons(g)):(e=f._getInsetIndex(a),f.addItemAt(a,e),d=f.get("nodes")[b-1],f._updateIcons(d))},_getInsetIndex:function(a){var b,c=this;return b=c._getNextItem(a),b?c.indexOfItem(b):c.getItemCount()},_getNextItem:function(a){var b,d,e=this,f=a.parent,g=null;return f?(b=f.children,d=c.Array.indexOf(a,b),g=b[d+1],g||e._getNextItem(f)):null},onAdd:function(a){var b=this,c=a.node,d=a.index;b._addNode(c,d)},_updateNode:function(a){var b=this;b.updateItem(a),b._updateIcons(a)},onUpdate:function(a){var b=this,c=a.node;b._updateNode(c)},_removeNode:function(a,b){var c,d,e=this,f=a.parent;e.collapseNode(a),f&&(e.removeItem(a),e.isExpanded(f)&&(c=f.children.length,c==b&&0!==b&&(d=f.children[b-1],e._updateIcons(d))),e._updateIcons(f),e._resetParentChecked(f))},onRemove:function(a){var b=this,c=a.node,d=a.index;b._removeNode(c,d)},_loadNode:function(a){var b=this;b._initChecked(a,!0),b.expandNode(a),b._updateIcons(a),b.setItemStatus(a,f,!1)},__syncUI:function(){var a=this,b=a.get("store"),c=a.get("showRoot");c&&!b.hasData()&&a._initRoot()},onLoad:function(a){var b=this,c=b.get("store"),d=c.get("root");a&&a.node!=d||b._initRoot(),a&&a.node&&b._loadNode(a.node)},_isExpanded:function(a,b){return this.hasStatus(a,e,b)},_getIconsTpl:function(a){var b,d=this,e=a.level,f=d.get("startLevel"),g=d.get("iconWraperTpl"),h=[];for(b=f;e>b;b+=1)h.push(d._getLevelIcon(a,b));return h.push(d._getExpandIcon(a)),h.push(d._getCheckedIcon(a)),h.push(d._getNodeTypeIcon(a)),c.substitute(g,{icons:h.join("")})},_getCheckedIcon:function(a){var b,c=this,d=c.isCheckable(a);return d?(b=c.get("multipleCheck")?s:t,c._getIcon(b)):""},isCheckable:function(a){return a[this.get("checkableField")]},_getExpandIcon:function(a){var b=this,c=r;return a.leaf?b._getLevelIcon(a):(b._isLastNode(a)&&(c=c+" "+u),b._getIcon(c))},_getNodeTypeIcon:function(a){var b=this,c=a.cls?a.cls:a.leaf?b.get("leafCls"):b.get("dirCls");return b._getIcon(c)},_getLevelIcon:function(a,b){var c,d=this,e=d.get("showLine"),f=q;return e&&(a.level===b||null==b?f=d._isLastNode(a)?p:k:(c=d._getParentNode(a,b),f=d._isLastNode(c)?q:o)),d._getIcon(f)},_getParentNode:function(a,b){var c=a.level,d=a.parent,e=c-1;if(b>=c)return null;for(;e>b;)d=d.parent,e-=1;return d},_getIcon:function(a){var b=this,d=b.get("iconTpl");return c.substitute(d,{cls:a})},_isLastNode:function(a){if(!a)return!1;if(a==this.get("root"))return!0;var b,c=this,d=a.parent,e=d?d.children:c.get("nodes");return b=e.length,e[b-1]===a},_initNodes:function(a,b,d){var e=this;c.each(a,function(a){a.level=b,null==a.leaf&&(a.leaf=a.children?!1:!0),d&&!a.parent&&(a.parent=d),e._initChecked(a),a.children&&e._initNodes(a.children,b+1,a)})},_collapseNode:function(a,b,c){var d=this;a.leaf||d.hasStatus(a,e,b)&&(d.setItemStatus(a,e,!1,b),c?(d._collapseChildren(a,c),d.removeItems(a.children)):d._hideChildrenNodes(a),d.fire("collapsed",{node:a,element:b}))},_hideChildrenNodes:function(a){var b=this,d=a.children,e=[];c.each(d,function(a){var c=b.findElement(a);c&&(e.push(c),b._hideChildrenNodes(a))}),b.get("expandAnimate")?(e=$(e),e.animate({height:0},function(){b.removeItems(d)})):b.removeItems(d)},_collapseChildren:function(a,b){var d=this,e=a.children;c.each(e,function(a){d.collapseNode(a,b)})},_expandNode:function(a,b,d){var f=this,g=f.get("accordion"),h=f.get("store");if(!a.leaf){if(!f.hasStatus(a,e,b)){if(g&&a.parent){var i=a.parent.children;c.each(i,function(b){b!=a&&f.collapseNode(b)})}h&&!h.isLoaded(a)?f._isLoading(a,b)||h.loadNode(a):b&&(f.setItemStatus(a,e,!0,b),f._showChildren(a),f.fire("expanded",{node:a,element:b}))}c.each(a.children,function(a){(d||f.isExpanded(a))&&f.expandNode(a,d)})}},_showChildren:function(a){if(a&&a.children){var b,c=this,d=c.indexOfItem(a),e=a.children.length,f=e-1;for(f=e-1;f>=0;f--)b=a.children[f],c.getItem(b)||(c.get("expandAnimate")?(el=c._addNodeAt(b,d+1),el.hide(),el.slideDown()):c.addItemAt(b,d+1))}},_addNodeAt:function(a,b){var c=this,d=c.get("items");return void 0===b&&(b=d.length),d.splice(b,0,a),c.addItemToView(a,b)},_isLoading:function(a,b){var c=this;return c.hasStatus(a,f,b)},_resetIcons:function(a,b){if(this.get("showIcons")){var c,d=this,e=d.get("iconContainer"),f=d._getIconsTpl(a);$(b).find("."+n).remove(),c=$(b).find(e).first(),e&&c.length?$(f).prependTo(c):$(b).prepend($(f))}},_toggleExpand:function(a,b){var c=this;c._isExpanded(a,b)?c._collapseNode(a,b):c._expandNode(a,b)},_updateIcons:function(a){var b=this,d=b.findElement(a);d&&(b._resetIcons(a,d),b._isExpanded(a,d)&&!a.leaf&&c.each(a.children,function(a){b._updateIcons(a)}))},_uiSetShowRoot:function(){var a=this,b=this.get("showRoot")?0:1;a.set("startLevel",b)},_uiSetNodes:function(a){var b=this,c=b.get("store");c.setResult(a)},_uiSetShowLine:function(a){var b=this,c=b.get("el");a?c.addClass(l):c.removeClass(l)}}),v}),define("bui/tree/treelist",["bui/common","bui/list","bui/tree/treemixin"],function(a){var b=a("bui/common"),c=a("bui/list"),d=a("bui/tree/treemixin"),e=c.SimpleList.extend([d],{},{ATTRS:{itemCls:{value:b.prefix+"tree-item"},itemTpl:{value:"<li>{text}</li>"},idField:{value:"id"}}},{xclass:"tree-list"});return e}),define("bui/tooltip",["bui/common","bui/tooltip/tip","bui/tooltip/tips"],function(a){var b=a("bui/common"),c=b.namespace("Tooltip"),d=a("bui/tooltip/tip"),e=a("bui/tooltip/tips");return b.mix(c,{Tip:d,Tips:e}),c}),define("bui/tooltip/tip",["bui/common","bui/overlay"],function(a){function b(a,b){return"left"===a?[-1*b,-4]:"right"===a?[b,-4]:a.indexOf("top")?[0,b]:a.indexOf("bottom")?[0,-1*b]:void 0}var c=a("bui/common"),d=a("bui/overlay"),e="x-align-",f={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]},g=d.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(a){var b,d=this,e=d.get("titleTpl"),f=d._getTitleContainer(),g=d.get("titleEl");g&&g.remove(),a=a||"",c.isString(a)&&(a={title:a}),b=c.substitute(e,a),g=$(b).appendTo(f),d.set("titleEl",g)},_uiSetAlignType:function(a,b){var c=this;b&&b.prevVal&&c.get("el").removeClass(e+b.prevVal),a&&c.get("el").addClass(e+a)}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"}),h=d.Overlay.extend({_uiSetAlignType:function(a){var c=this,d=c.get("offset"),e=c.get("align")||{},g=f[a];g&&(e.points=g,d&&(e.offset=b(a,d)),c.set("align",e))}},{ATTRS:{delegateTigger:{value:!0},alignType:{view:!0},title:{view:!0},showArrow:{value:!0},arrowContainer:{view:!0},autoHide:{value:!0},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:!0,value:"<span>{title}</span>"},xview:{value:g}}},{xclass:"tooltip"});return h.View=g,h}),define("bui/tooltip/tips",["bui/common","bui/tooltip/tip"],function(a){function b(a){return/^{.*}$/.test(a)}var c=a("bui/common"),d=a("bui/tooltip/tip"),e=function(a){e.superclass.constructor.call(this,a)};return e.ATTRS={tip:{},defaultAlignType:{}},c.extend(e,c.Base),c.augment(e,{_init:function(){this._initDom(),this._initEvent()},_initDom:function(){var a,b=this,c=b.get("tip");c&&!c.isController&&(a=c.alignType,c=new d(c),c.render(),b.set("tip",c),a&&b.set("defaultAlignType",a))},_initEvent:function(){var a=this,b=a.get("tip");b.on("triggerchange",function(c){var d=c.curTrigger;a._replaceTitle(d),a._setTitle(d,b)})},_replaceTitle:function(a){var b=a.attr("title");b&&(a.attr("data-title",b),a[0].removeAttribute("title"))},_setTitle:function(a,d){var e=this,f=a.attr("data-title"),g=a.attr("data-align")||e.get("defaultAlignType");b(f)&&(f=c.JSON.looseParse(f)),d.set("title",f),g&&d.set("alignType",g)},render:function(){return this._init(),this}}),e}),function(){var a=document.getElementsByTagName("script"),b=a[a.length-1];"false"!=b.getAttribute("data-auto-use")&&BUI.use(["bui/common","bui/data","bui/list","bui/picker","bui/menu","bui/toolbar","bui/progressbar","bui/cookie","bui/form","bui/mask","bui/select","bui/tab","bui/calendar","bui/overlay","bui/editor","bui/grid","bui/tree","bui/tooltip"])
}();