/*! BUI - v0.1.0 - 2013-11-18
* https://github.com/dxq613/bui
* Copyright (c) 2013 dxq613; Licensed MIT */
define("bui/tooltip",["bui/common","bui/tooltip/tip","bui/tooltip/tips"],function(a){var b=a("bui/common"),c=b.namespace("Tooltip"),d=a("bui/tooltip/tip"),e=a("bui/tooltip/tips");return b.mix(c,{Tip:d,Tips:e}),c}),define("bui/tooltip/tip",["bui/common","bui/overlay"],function(a){function b(a,b){return"left"===a?[-1*b,-4]:"right"===a?[b,-4]:a.indexOf("top")?[0,b]:a.indexOf("bottom")?[0,-1*b]:void 0}var c=a("bui/common"),d=a("bui/overlay"),e="x-align-",f={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]},g=d.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(a){var b,d=this,e=d.get("titleTpl"),f=d._getTitleContainer(),g=d.get("titleEl");g&&g.remove(),a=a||"",c.isString(a)&&(a={title:a}),b=c.substitute(e,a),g=$(b).appendTo(f),d.set("titleEl",g)},_uiSetAlignType:function(a,b){var c=this;b&&b.prevVal&&c.get("el").removeClass(e+b.prevVal),a&&c.get("el").addClass(e+a)}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"}),h=d.Overlay.extend({_uiSetAlignType:function(a){var c=this,d=c.get("offset"),e=c.get("align")||{},g=f[a];g&&(e.points=g,d&&(e.offset=b(a,d)),c.set("align",e))}},{ATTRS:{delegateTigger:{value:!0},alignType:{view:!0},title:{view:!0},showArrow:{value:!0},arrowContainer:{view:!0},autoHide:{value:!0},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:!0,value:"<span>{title}</span>"},xview:{value:g}}},{xclass:"tooltip"});return h.View=g,h}),define("bui/tooltip/tips",["bui/common","bui/tooltip/tip"],function(a){function b(a){return/^{.*}$/.test(a)}var c=a("bui/common"),d=a("bui/tooltip/tip"),e=function(a){e.superclass.constructor.call(this,a)};return e.ATTRS={tip:{},defaultAlignType:{}},c.extend(e,c.Base),c.augment(e,{_init:function(){this._initDom(),this._initEvent()},_initDom:function(){var a,b=this,c=b.get("tip");c&&!c.isController&&(a=c.alignType,c=new d(c),c.render(),b.set("tip",c),a&&b.set("defaultAlignType",a))},_initEvent:function(){var a=this,b=a.get("tip");b.on("triggerchange",function(c){var d=c.curTrigger;a._replaceTitle(d),a._setTitle(d,b)})},_replaceTitle:function(a){var b=a.attr("title");b&&(a.attr("data-title",b),a[0].removeAttribute("title"))},_setTitle:function(a,d){var e=this,f=a.attr("data-title"),g=a.attr("data-align")||e.get("defaultAlignType");b(f)&&(f=c.JSON.looseParse(f)),d.set("title",f),g&&d.set("alignType",g)},render:function(){return this._init(),this}}),e});