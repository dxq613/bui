/*! BUI - v0.1.0 - 2013-11-18
* https://github.com/dxq613/bui
* Copyright (c) 2013 dxq613; Licensed MIT */
define("bui/extensions/treepicker",["bui/common","bui/picker","bui/tree"],function(a){"use strict";var b=a("bui/common"),c=a("bui/picker").ListPicker;a("bui/tree");var d=c.extend({setSelectedValue:function(a){a=a||"";var d=this,e=d.get("tree");if("selected"===d.get("selectStatus"))a&&e.expandNode(a),c.prototype.setSelectedValue.call(d,a);else{e.clearAllChecked();var f=a.split(",");b.each(f,function(a){e.setChecked(a)})}},getSelectedValue:function(){var a=this,d=a.get("tree");if("selected"===a.get("selectStatus"))return c.prototype.getSelectedValue.call(a);var e=d.getCheckedNodes();return e=a._getFilterNodes(e),b.Array.map(e,function(a){return a.id}).join(",")},getSelectedText:function(){var a=this,d=a.get("tree");if("selected"===a.get("selectStatus"))return c.prototype.getSelectedText.call(a);var e=d.getCheckedNodes();return e=a._getFilterNodes(e),b.Array.map(e,function(a){return a.text}).join(",")},_getFilterNodes:function(a){var c=this,d=c.get("filter");return d&&(a=b.Array.filter(a,d)),a}},{ATTRS:{defaultChildClass:{value:"tree-list"},selectStatus:{value:"selected"},changeEvent:{getter:function(){return this.get("selectStatus")+"change"}},hideEvent:{getter:function(a){return"checked"===this.get("selectStatus")?null:a}},filter:{},tree:{getter:function(){return this.get("children")[0]}}}},{xclass:"tree-picker"});return d});